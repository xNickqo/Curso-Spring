turn RN;const i=10**e;return function(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,n){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(t,e,i,n,o,r){this._append`C${+t},${+e},${+i},${+n},${this._x1=+o},${this._y1=+r}`}arcTo(t,e,i,n,o){if(t=+t,e=+e,i=+i,n=+n,(o=+o)<0)throw new Error(`negative radius: ${o}`);let r=this._x1,a=this._y1,s=i-t,l=n-e,c=r-t,d=a-e,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>NN)if(Math.abs(d*s-l*c)>NN&&o){let h=i-r,p=n-a,g=s*s+l*l,f=h*h+p*p,m=Math.sqrt(g),C=Math.sqrt(u),y=o*Math.tan((kN-Math.acos((g+u-f)/(2*m*C)))/2),v=y/C,S=y/m;Math.abs(v-1)>NN&&this._append`L${t+v*c},${e+v*d}`,this._append`A${o},${o},0,0,${+(d*h>c*p)},${this._x1=t+S*s},${this._y1=e+S*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,i,n,o,r){if(t=+t,e=+e,r=!!r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(n),s=i*Math.sin(n),l=t+a,c=e+s,d=1^r,u=r?n-o:o-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>NN||Math.abs(this._y1-c)>NN)&&this._append`L${l},${c}`,i&&(u<0&&(u=u%wN+wN),u>MN?this._append`A${i},${i},0,1,${d},${t-a},${e-s}A${i},${i},0,1,${d},${this._x1=l},${this._y1=c}`:u>NN&&this._append`A${i},${i},0,${+(u>=kN)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(t,e,i,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function BN(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(null==i)e=null;else{const t=Math.floor(i);if(!(t>=0))throw new RangeError(`invalid digits: ${i}`);e=t}return t},()=>new LN(e)}function FN(t){return t[0]}function UN(t){return t[1]}function HN(t,e){var i=IN(!0),n=null,o=_N,r=null,a=BN(s);function s(s){var l,c,d,u=(s=PN(s)).length,h=!1;for(null==n&&(r=o(d=a())),l=0;l<=u;++l)!(l<u&&i(c=s[l],l,s))===h&&((h=!h)?r.lineStart():r.lineEnd()),h&&r.point(+t(c,l,s),+e(c,l,s));if(d)return r=null,d+""||null}return t="function"==typeof t?t:void 0===t?FN:IN(t),e="function"==typeof e?e:void 0===e?UN:IN(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:IN(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:IN(+t),s):e},s.defined=function(t){return arguments.length?(i="function"==typeof t?t:IN(!!t),s):i},s.curve=function(t){return arguments.length?(o=t,null!=n&&(r=o(n)),s):o},s.context=function(t){return arguments.length?(null==t?n=r=null:r=o(n=t),s):n},s}function GN(t){return t<0?-1:1}function VN(t,e,i){var n=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(n||o<0&&-0),a=(i-t._y1)/(o||n<0&&-0),s=(r*o+a*n)/(n+o);return(GN(r)+GN(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(s))||0}function jN(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function $N(t,e,i){var n=t._x0,o=t._y0,r=t._x1,a=t._y1,s=(r-n)/3;t._context.bezierCurveTo(n+s,o+s*e,r-s,a-s*i,r,a)}function WN(t){this._context=t}function zN(t){this._context=new KN(t)}function KN(t){this._context=t}function YN(t){return new WN(t)}function qN(t,e,i){this.k=t,this.x=e,this.y=i}LN.prototype,WN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$N(this,this._t0,jN(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,$N(this,jN(this,i=VN(this,t,e)),i);break;default:$N(this,this._t0,i=VN(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(zN.prototype=Object.create(WN.prototype)).point=function(t,e){WN.prototype.point.call(this,e,t)},KN.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,n,o,r){this._context.bezierCurveTo(e,t,n,i,r,o)}},qN.prototype={constructor:qN,scale:function(t){return 1===t?this:new qN(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new qN(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new qN(1,0,0);qN.prototype;var XN=class{getStyles(){return`\n        .headerContentWrapper {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            column-gap: 0.2rem;\n            flex-wrap: wrap;\n        }\n        .headerTitle {\n            font-weight: 600;\n            align-items: center;\n            font-size: 18px;\n            line-height: 24px;\n            margin: 0px;\n        }\n        .ratingStarsContainer {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            column-gap: 4px;\n        }\n        .ratingPublisherText {\n            font-size: 14px;\n            font-weight: 500;\n        }\n        .csrc {\n            align-items: center;\n            display: flex;\n        }\n        .priceDeltaContainer {\n            width: 65%;\n            margin: 0px auto 12px;\n            display: grid;\n            border: 1px solid rgb(240, 240, 240);\n            box-shadow: rgb(1 19 63 / 2%) 0px 0px 8px;\n            border-radius: 6px;\n            padding: 12px 6px;\n            grid-template-columns: 10% 40% 50%;\n        }\n        .priceDeltaText {\n            font-size: 14px;\n            line-height: 28px;\n            grid-columns: 2 / 2;\n        }\n        .priceDeltaStatement {\n            font-size: 12px;\n            font-weight: 400;\n            line-height: 14px;\n            text-align: start;\n            grid-columns: 3 / 3;\n        }\n        .priceInfoText {\n            fill: #000000;\n        }\n        .priceInsightBar:focus {\n            outline: #000000 auto 5px;\n        }\n        .priceRangeText {\n            fill: var(--text-normal);\n        }\n        .disclaimerTextContainer {\n            margin-bottom: 6px;\n            display: flex;\n            align-items: center;\n        }\n        .disclaimerText {\n            margin-right: 3px;\n        }\n        .portalLink {\n            height: 12px;\n            cursor: pointer;\n        }\n        .portalLink:hover {\n            text-decoration: underline;\n        }\n        @media (forced-colors: active) {\n            .priceInsightBar {\n                fill: ${KT.CanvasText} !important;\n            }\n            .priceRangeText {\n                fill: ${KT.CanvasText} !important;\n            }\n            .priceInfoText {\n                fill: ${KT.CanvasText} !important;\n            }\n            .priceRangeText {\n                fill: ${KT.CanvasText} !important;\n            }\n        }\n        `}getDarkModeStyles(){return"\n        @media (prefers-color-scheme: dark) {\n            .priceInfoText {\n                fill: #FFFFFF;\n            }\n            .priceRangeText {\n                fill: #FFFFFF;\n            }\n        }\n        "}getNotificationStyles(){return`\n        .headerContentWrapper {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            column-gap: 0.2rem;\n            flex-wrap: wrap;\n        }\n        .title {\n            font-style: normal;\n            font-weight: 600;\n            font-size: 20px;\n            line-height: 30px;\n            text-align: center;\n            margin-top: 10px;\n            margin-bottom: 4px;\n          }\n        .priceDiffPos {\n            color: rgba(0, 138, 33, 1);\n        }\n        .priceDiffNeg {\n            color: rgba(255, 0, 0, 1);\n        }\n        .priceInsight {\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 20px;\n            color: rgba(113, 113, 113, 1);\n        }\n        @media (forced-colors: active) {\n            .priceDiffNeg {\n                color: ${KT.CanvasText} !important;\n            }\n            .priceDiffPos {\n                color: ${KT.CanvasText} !important;\n            }\n        }\n        `}getNotificationDarkModeStyles(){return"\n        @media (prefers-color-scheme: dark) {\n            .priceInfoText {\n                fill: #FFFFFF;\n            }\n        }\n        "}};var JN=class extends zm{constructor(...t){super(...t),i(this,"publisher",void 0),i(this,"clickThroughUrl",void 0)}static createAutosRating(t,e,i,n){const o=zm.createRating(t,e);return o.publisher=i,o.clickThroughUrl=n,o}};var ZN=class extends CE{constructor(t,e,n){super(),i(this,"assets",void 0),i(this,"oemPriceInsightData",void 0),i(this,"SERPPriceInsightData",void 0),i(this,"scenario",void 0),i(this,"ratingData",void 0),i(this,"storageHandler",void 0),i(this,"logModule",void 0),i(this,"pageHandlerModule",void 0),i(this,"stateManagement",void 0),i(this,"flyoutData",void 0),i(this,"utilities",void 0),i(this,"telemetryUtilities",void 0),i(this,"visibilityRequest",[]),i(this,"sectionId","priceComparisonSection"),this.logModule=n.logModule,this.pageHandlerModule=n.pageHandlerModule,this.stateManagement=t,this.flyoutData=e,this.utilities=n.viewModulesUtilities,this.assets=new XN,this.telemetryUtilities=n.telemetryHandler,this.storageHandler=n.storageHandler}GetModuleName(){return tt.AUTOSPRICEINSIGHT}async ShouldRenderModule(){const t=this.flyoutData.dataStoreModule.PriceComparisonData,e=t?.segment?.toLowerCase()===dt.AUTOS,i=t?.autosPriceInsight?.validData;if(e&&i)return this.scenario=gt.PDP,Promise.resolve(!0);const n=this.flyoutData.dataStoreModule.ApiData?.retailerData,o=this.getAutosDataSelector(n);if(o){let t,e;try{const i=JSON.parse(o);t=i?.priceInsights,e=i?.ratingReview?.aggregatedRatingReview,this.scenario=gt.OEM}catch(t){const e=new u(C.OnErrorInvoked);this.logModule.LogErrorEvent(p.EdgeFlyoutStatus,`Error in parsing Autos OEM Price Insight data: ${t.message}`,e)}if(e&&(this.ratingData=JN.createAutosRating(e?.rating?.value,e.rating?.maxValue,e?.publisher,e?.clickThroughUrl)),t)return this.oemPriceInsightData=new Ed(t),this.oemPriceInsightData.validData?Promise.resolve(!0):Promise.resolve(!1)}const r=await this.storageHandler.getStorageString(Cn.AutosMarketplace);if(r)try{const t=JSON.parse(r);if(t?.autosData?.priceInsights&&t?.currentUrl?.toLowerCase()===this.flyoutData.common.lastCommittedURL?.toLowerCase())return this.SERPPriceInsightData=new Ed(t?.autosData?.priceInsights),this.scenario=gt.SERP,this.SERPPriceInsightData.validData?Promise.resolve(!0):Promise.resolve(!1)}catch(t){}return Promise.resolve(!1)}renderModule(){const t=document.createElement("msft-edge-shopping-section");t.id=this.sectionId,t.accordion=!0,t.expanded=!0,t.titleText="Market Price Insight";let e=!1;const i=this.flyoutData.dataStoreModule.PriceComparisonData;if(i&&i.autosPriceInsight?(this.populatePriceInsight(t),e=!0):this.oemPriceInsightData?(this.populateOemPriceInsight(t),e=!0):this.SERPPriceInsightData&&(this.populateSERPPriceInsight(t),e=!0),!e)return Promise.resolve(null);this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());const n=this.CreateModule(t,J.AUTOSPRICEINSIGHT,tt.AUTOSPRICEINSIGHT,ot.CONTEXTUAL,rt.LIST),o=new u(C.AutosPriceInsightRenderViewModule,void 0,void 0,void 0,this.constructTelemetryMetaData()),r="["+this.scenario+"Scenario]";return this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,"Autos Price Insight Module Rendered - ["+r,o),Promise.resolve(n)}populateMainHeader(){const t=this.flyoutData.dataStoreModule.PriceComparisonData;let e;t?.autosPriceInsight?e=t?.autosPriceInsight:this.oemPriceInsightData?e=this.oemPriceInsightData:this.SERPPriceInsightData&&(e=this.SERPPriceInsightData);const i=this.flyoutData.common.shopping,n=pi("DIV",{className:"headerContentWrapper"});n.slot="header-content";const o=pi("H2",{className:"headerTitle"}),r=this.constructTitleEntityName(e),a=this.constructAnchorTagFromTitleName(r,e,"en-us","headerTitle",!1);o.textContent=this.flyoutData.strings.autosPriceInsightSectionTitle,n.appendChild(o),n.appendChild(a),i.appendChild(n)}sendAutosPriceInsightDwellTimeTelemery(t,e,i){const n=Date.now()-t,o=new u(e,void 0,void 0,void 0,this.constructTelemetryMetaData()),r="["+this.scenario+"Scenario]";this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,`${i} - ${n} ms - ${r}`,o),n>=1e3&&di&&this.pageHandlerModule.RecordAsUserAction(di.AUTOS_PRICE_INSIGHT_HOVER)}getAutosDataSelector(t){if(!t)return null;const e=this.flyoutData.common.lastCommittedURL?.toLowerCase();let i=null;return t.allCheckoutPages.forEach((t=>{-1!==e.indexOf(t.checkoutPageUrl?.toLowerCase())&&(i=t.autosDataSelector)})),i}constructAnchorTagFromTitleName(t,e,i,n,o){const r=pi("fluent-anchor",{className:n});r.setAttribute("appearance","lightweight"),r.textContent=t;const a=this.flyoutData.common.currentDevice;return r.onclick=()=>{this.pageHandlerModule.RecordAsUserAction(di.AUTOS_MARKETPLACE_TITLE_CLICK),this.pageHandlerModule.RecordAsUserEngagement(Xe.AUTOS_MARKETPLACE_TITLE_CLICK,this.flyoutData.common.popupOrigination);const t=new ci(g.NavigatedToAutosMarketplace,this.telemetryUtilities.setContentViewed(this.GetModuleName()),void 0,this.constructTelemetryMetaData()),n="["+this.scenario+" scenaro]",r=o?"Navigate to Autos Marketplace from AutoShow - [AutosPriceInsightNotificationModule] - "+n+"click on anchor title link":"Navigate to Autos Marketplace - [AutosPriceInsightModule] - "+n+"click on anchor title link";this.logModule.LogInfoEvent(p.ButtonClick,r,t);let s=`https://www.msn.com/${i}/autos/marketplace/v/`;e?.make&&e?.model&&(s+=e?.year?e.year+"_"+e.make+"_"+e.model:e.make+"_"+e.model);s+=this.scenario===gt.OEM?"?form=MARFL3":"?form=MARFL2",a===V.Desktop&&this.pageHandlerModule.NavigateToOtherSellerWithDisposition(s,cn.NEW_FOREGROUND_TAB)},r}constructTitleEntityName(t){let e=this.flyoutData.strings.autosPriceInsightEntityName;return t?.year&&t?.model?e=t.year+" "+this.formatMakeModel(t.model):t?.make&&t?.model&&(e=this.formatMakeModel(t?.make)+" "+this.formatMakeModel(t?.model)),e+"*"}createRatingSection(t){if(this.ratingData&&this.ratingData?.publisher&&this.ratingData?.clickThroughUrl&&this.ratingData?.publisher?.length>0){const e=pi("DIV",{className:"ratingStarsContainer"}),i=pi("fluent-anchor",{className:"ratingPublisherText"});i.setAttribute("appearance","lightweight"),i.textContent=this.ratingData?.publisher;const n=this.flyoutData.common.currentDevice;i.onclick=()=>{this.pageHandlerModule.RecordAsUserAction(di.AUTOS_PRICE_INSIGHT_RATINGURL_CLICK),this.pageHandlerModule.RecordAsUserEngagement(Xe.AUTOS_PRICE_INSIGHT_RATINGURL_CLICK,this.flyoutData.common.popupOrigination);const t=new ci(g.NavigatedToAutosMarketplacePriceInsightsRatingURL,this.telemetryUtilities.setContentViewed(this.GetModuleName()),void 0,this.constructTelemetryMetaData());this.logModule.LogInfoEvent(p.ButtonClick,"Navigate to Autos Marketplace - [AutosPriceInsightModule] - click on rating stars publisher url",t);const e=this.ratingData?.clickThroughUrl||"";n===V.Desktop&&this.pageHandlerModule.NavigateToOtherSellerWithDisposition(e,cn.NEW_FOREGROUND_TAB)};const o=this.createStarRatingElement(this.ratingData);e.append(o,i),t.appendChild(e)}}constructTelemetryMetaData(){try{return JSON.stringify({pageType:this.scenario})}catch(t){return""}}formatMakeModel(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}populatePriceInsight(t){const e=this.flyoutData.dataStoreModule.PriceComparisonData,i=e?.autosPriceInsight;if(e&&i?.validData){if(!1===isNaN(e?.Price)){const n=pi("DIV",{className:"priceDeltaContainer"}),o=e.Price-i.avgPrice,r=pi("IMG",{style:"display: flex; place-self: center; grid-column: 1 / 1;"});r.setAttribute("aria-hidden","true"),r.src=o<0?this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":o>0?this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg";const a=pi("DIV",{className:"priceDeltaText"});a.textContent=`$${this.utilities.formatPrice(Math.abs(o))}`;const s=pi("DIV",{className:"priceDeltaStatement"});s.textContent=o<0?this.flyoutData.strings.autosPriceInsightBelowAverage+` ${i.currency}${this.utilities.formatPrice(i.avgPrice)}`:this.flyoutData.strings.autosPriceInsightAboveAverage+` ${i.currency}${this.utilities.formatPrice(i.avgPrice)}`,n.append(r),n.append(a),n.append(s),n.setAttribute("aria-label",a.textContent+" "+s.textContent),t.appendChild(n)}const n=this.drawGraph(e.autosPriceInsight);t.appendChild(n);const o=this.constructTitleEntityName(i);t.title=this.flyoutData.strings.autosPriceInsightSectionTitle+o;const r=this.flyoutData.dataStoreModule.PriceComparisonData?.entityName||"";this.renderSeeMoreLink(t,e.CompetingPrices[0].marketHint||"en-us",r)}}populateOemPriceInsight(t){this.createRatingSection(t);const e=this.drawGraph(this.oemPriceInsightData);t.appendChild(e);const i=this.constructTitleEntityName(this.oemPriceInsightData);t.title=this.flyoutData.strings.autosPriceInsightSectionTitle+i;const n=this.oemPriceInsightData?.make+" "+this.oemPriceInsightData?.model;this.renderSeeMoreLink(t,"en-us",n)}populateSERPPriceInsight(t){const e=this.drawGraph(this.SERPPriceInsightData);t.appendChild(e);const i=this.constructTitleEntityName(this.SERPPriceInsightData);t.title=this.flyoutData.strings.autosPriceInsightSectionTitle+i;const n=this.SERPPriceInsightData?.make+" "+this.SERPPriceInsightData?.model;this.renderSeeMoreLink(t,"en-us",n)}drawGraph(t){const e=t,i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(!e)return i;const n=300,o=100;let r=0;const a=EN(i).attr("role","grid").attr("width",n).attr("height",170).style("margin-left","25px").on("mouseenter",(()=>r=Date.now())).on("mouseleave",(t=>{this.sendAutosPriceInsightDwellTimeTelemery(r,C.AutosPriceInsightDwellTimeHover,"Autos Price Insight Module - hover time over graph");const e=new u(C.AutosPriceInsightBarHovered,void 0,void 0,void 0,this.constructTelemetryMetaData()),i="["+this.scenario+"Scenario]";this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,"Autos Price Insight Module - hovered - "+i,e)})),s=e.buckets.map((t=>t.count)),l=b_().domain(GE(s.length)).rangeRound([0,n]).paddingInner(.18),c=ck().domain([0,UE(s)]).range([0,o]);a.append("g").attr("role","row").attr("width","100%").attr("height","100%").selectAll("rect").data(s).enter().append("rect").attr("x",((t,e)=>l(e))).attr("y",(t=>140-c(t))).attr("width",l.bandwidth()).attr("height",(t=>c(t))).attr("rx","3px").attr("ry","3px").attr("index",((t,e)=>e));const d=a.append("defs").append("linearGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient");d.append("stop").attr("class","stop-left").attr("offset","0%").attr("stop-color","rgba(39, 172, 34, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-mid").attr("offset","51.02%").attr("stop-color","rgba(242, 200, 17, 0.71)").attr("stop-opacity",1),d.append("stop").attr("class","stop-right").attr("offset","89.75%").attr("stop-color","rgba(232, 58, 58, 0.71)").attr("stop-opacity",1);const h=a.append("g").attr("class","priceInfoText").style("opacity",0).style("transition-duration","0.4s").style("transition-property","opacity").style("fill","var(--text-normal)"),g=h.append("text").attr("x",150).attr("y",10).style("text-anchor","middle").style("font-weight",600),f=h.append("text").attr("x",150).attr("y",30).style("text-anchor","middle"),m=t=>{const i=Number(t.target.attributes.index.value);h.style("opacity",1);const n=this.utilities.formatPrice(e.buckets[i].minPrice),o=this.utilities.formatPrice(e.buckets[i].maxPrice);g.text(`${e.currency}${n} - ${e.currency}${o}`);const r=e.numberOfVehicles,a=0!==r?(e.buckets[i].count/r*100).toFixed():"0";f.text(`${a}`+this.flyoutData.strings.autosPriceInsightPriceRangeText)},y=()=>{h.style("opacity",0),g.text(""),f.text("")};return a.selectAll("rect").attr("class","priceInsightBar").attr("fill","url(#linear-gradient)").attr("role","gridcell").attr("aria-label",((t,i)=>((t,i)=>{const n=Math.round(e.buckets[i].minPrice),o=Math.round(e.buckets[i].maxPrice);let r=`${t} listings within price range:`;return r+=` from $${n.toString()} to $${o.toString()}`,r})(t,i))).on("focusin",(t=>m(t))).on("focusout",(()=>y())).on("mouseover",(t=>m(t))).on("mouseout",(()=>y())),a.append("text").attr("class","priceRangeText").attr("x",0).attr("y",160).attr("aria-label",`minimum price: $${this.utilities.formatPrice(e.minPrice)}`).style("text-anchor","start").style("font-size","12px").style("line-height","16px").text(`${e.currency}${this.utilities.formatPrice(e.minPrice)}`),a.append("text").attr("class","priceRangeText").attr("x",150).attr("y",160).attr("aria-label",`average price: $${this.utilities.formatPrice(e.avgPrice)}`).style("text-anchor","middle").style("font-size","12px").style("line-height","16px").text(`${e.currency}${this.utilities.formatPrice(e.avgPrice)} avg.`),a.append("text").attr("class","priceRangeText").attr("x",n).attr("y",160).attr("aria-label",`maximum price: $${this.utilities.formatPrice(e.maxPrice)}`).style("text-anchor","end").style("font-size","12px").style("line-height","16px").text(`${e.currency}${this.utilities.formatPrice(e.maxPrice)}`),i}renderSeeMoreLink(t,e,i){const n=pi("DIV",{className:"disclaimerTextContainer"});n.classList.add("lateralMargin");const o=pi("DIV",{className:"disclaimerText"});o.textContent=this.flyoutData.strings.autosPriceInsightDisclaimerText;const r=pi("fluent-anchor",{className:"portalLink"});r.setAttribute("appearance","lightweight"),r.textContent=this.flyoutData.strings.autosMarketplaceName;const a=this.flyoutData.common.currentDevice;r.onclick=()=>{this.pageHandlerModule.RecordAsUserAction(di.AUTOS_PRICE_INSIGHT_SEE_MORE_CLICK),this.pageHandlerModule.RecordAsUserEngagement(Xe.AUTOS_PRICE_INSIGHT_SEE_MORE_CLICK,this.flyoutData.common.popupOrigination);const t=new ci(g.NavigatedToAutosMarketplace,this.telemetryUtilities.setContentViewed(this.GetModuleName()),void 0,this.constructTelemetryMetaData()),n="["+this.scenario+" scenaro]";this.logModule.LogInfoEvent(p.ButtonClick,"Navigate to Autos Marketplace from Autoshow - [AutosPriceInsightModule] - "+n+" click on portal link in disclaimer text",t);const o=this.scenario===gt.OEM?`https://www.msn.com/${e}/autos/marketplace/search?q=${i}&form=MARFL3`:`https://www.msn.com/${e}/autos/marketplace/search?q=${i}&form=MARFL2`;a===V.Desktop&&this.pageHandlerModule.NavigateToOtherSellerWithDisposition(o,cn.NEW_FOREGROUND_TAB)},n.appendChild(o),n.appendChild(r),t.appendChild(n)}createStarRatingElement(t){const e=t.normalizedValue,i=pi("span",{className:"csrc",role:"img",title:`Star rating: ${e.toFixed(1)} out of ${zm.NormalizedMaxRating}`}),n="http://www.w3.org/2000/svg",o=this.utilities.isDarkMode()?"#fff":"#FF9529",r=document.createElementNS(n,"svg");r.setAttribute("height",14..toString()),r.setAttribute("width",(16*zm.NormalizedMaxRating).toString());const a=document.createElementNS(n,"defs"),s=document.createElementNS(n,"path");s.setAttribute("d","M7 1.435l1.386 4.161 4.221.09-3.364 2.662 1.223 4.217L7 10.049l-3.466 2.516 1.223-4.217-3.364-2.662 4.221-.09L7 1.435l1.386 4.161z"),s.setAttribute("id","rnr_st"),s.setAttribute("stroke",o),s.setAttribute("stroke-width","0.8"),a.appendChild(s),r.appendChild(a);for(let t=0;t<zm.NormalizedMaxRating;t++){let i;if(e>=t+1)i=o;else if(e>t){const a=Math.round(15+70*(e-t))+"%",s=document.createElementNS(n,"linearGradient");s.id="rnr_sth";const l=document.createElementNS(n,"stop");l.setAttribute("offset",a),l.setAttribute("stop-color",o);const c=document.createElementNS(n,"stop");c.setAttribute("offset",a),c.setAttribute("stop-opacity","0"),s.appendChild(l),s.appendChild(c),r.appendChild(s),i="url(#rnr_sth)"}else i="none";const a=document.createElementNS(n,"use");a.setAttribute("fill",i),a.setAttribute("transform",`translate(${16*t} .5) scale(.95 .95)`),a.setAttribute("href","#rnr_st"),r.appendChild(a)}return i.appendChild(r),i}};var QN=class{getStyles(){return`\n            ::part(header) {\n                margin-bottom: 0px;\n            }\n            ::part(title) {\n                margin: 10px 0px 6px;\n            }\n            .headerContentWrapper {\n                display: flex;\n                text-align: center;\n                flex-direction: column;\n                align-items: center;\n            }\n            .headerTitle {\n                font-weight: 600;\n                align-items: center;\n                font-size: 18px;\n                line-height: 24px;\n                margin: 0px;\n            }\n            msft-horizontal-card-slider msft-shopping-link, .vid_cds msft-shopping-link {\n                margin: 0 !important;\n            }\n            #rnrWrapper {\n                padding: 0 20px 20px;\n                border-radius: 8px;\n                display: flex;\n                flex-direction: column;\n                row-gap: 12px;\n            }\n            #rnrWrapper msft-product-card {\n                border-radius: 8px;\n                background-color: var(--fill-color);\n                overflow: hidden;\n            }\n            #rnrWrapper msft-product-card::part(control) {\n                border: none;\n            }\n            #rnrWrapper msft-product-card::part(txtRetailer) {\n                color: var(--text-neutral-foreground);\n            }\n            .vid_cds {\n                display: flex;\n                column-gap: 8px;\n            }\n            .vid_cds msft-shopping-link { flex: 1 }\n            msft-shopping-link + .vid_cds { margin-top: 5px; }\n            .vid_cds:last-of-type { margin-bottom: 5px; }\n            .vid_thv, .vid_thh { position: relative; }\n            .vid_thv img {\n                border-radius: 4px 4px 0 0;\n                max-width: 100%;\n            }\n            .vid_thh {\n                max-width: unset;\n                max-height: unset;\n            }\n            .vid_thov {\n                position: absolute;\n                bottom: 0;\n                right: 0;\n                margin: 8px;\n                border-radius: 2px\n            }\n            .vid_thov span {\n                background-color: rgba(0,0,0,0.75);\n                color: #fff;\n                padding: 1px 4px;\n                font-weight: bold;\n                font-size: 11px;\n                line-height: 14px;\n                float: right;\n            }\n            .vid_thov .vid_thply {\n                background-image: url(${this.getPlayIconUri()});\n                background-repeat: no-repeat;\n                background-position: center;\n                width: 7px;\n                height: 14px;\n            }\n            .seeAllLinkContainer {\n                display: flex;\n                justify-content: flex-end;\n                padding: 0px 20px;\n            }\n            .seeAllLink: {\n                text-decoration: none;\n                cursor: pointer;\n            }\n            .seeAllLink:hover {\n                text-decoration: underline;\n                cursor: pointer;\n            }\n            #rnrWrapper msft-product-card:focus-visible, #rnrWrapper msft-product-card:focus {\n                box-shadow: 0 0 0 calc(var(--focus-stroke-width) * 1px) var(--focus-stroke-outer);\n                outline: 1px solid var(--focus-stroke-outer);\n            }\n            @media (prefers-color-scheme: dark) {\n                #rnrWrapper msft-product-card::part(control) {\n                    background-color: #424242;\n                }\n                #rnrWrapper msft-product-card::part(txtRetailer) {\n                    color: #c2c2c2;\n                }\n            }`}getExpertReviewShoppingLinkShadowStyles(){return"\n            .control {\n                padding: 8px 15px 10px 15px !important;\n                grid-template-columns: auto 1fr auto !important;\n                grid-template-rows: minmax(20px, auto) 1fr;\n                grid-row-gap: 8px;\n            }\n            .control .caption, .provider, .cardtitle {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }\n            .provider, .cardtitle { font-size: 14px; }\n            .cardtitle { grid-column: 1 / 3; }\n            .rating { font-size: 16px; }\n            .control .caption {\n                grid-column: 1 / 4;\n                font-weight: normal;\n            }"}getPlayIconUri(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAIBAMAAADHKvg1AAAAIVBMVEX///////////////////////////////////////////9/gMdvAAAACnRSTlMAETNEVWaImbvuo4D1oAAAAB9JREFUCB1jmMoABKuaQcSqQhCxKgFGgLhNQIkpQAwA8zkLyQAl6F0AAAAASUVORK5CYII="}getNotificationStyles(){return"\n        .title {\n            font-size: 16px;\n            font-weight: 600;\n            line-height: 22px;\n            margin-top: 0px;\n            margin-bottom: 12px;\n            text-align: left;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n        }\n        .reviewTitle {\n            font-size: 16px;\n            font-weight: 600;\n            line-height: 22px;\n            width: 100%;\n            text-align: left;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            margin-top: 12px;\n        }\n        .imageWrapper {\n            width: 250px;\n            height: 130px;\n            overflow: hidden;\n            margin-right: 12px;\n            border-radius: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n        }\n        .notifCoverImage {\n            width: 100%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .videoPlayButton {\n            position: absolute;\n        }\n        .btnActions {\n            width: calc(100% - 32px);\n            margin-top: 12px;\n            justify-content: center;\n        }\n        "}getNotificationDarkModeStyles(){return""}};class tM extends CE{constructor(t,e,n){super(),i(this,"assets",void 0),i(this,"stateManagement",void 0),i(this,"pageHandlerModule",void 0),i(this,"logModule",void 0),i(this,"flyoutData",void 0),i(this,"telemetryUtilities",void 0),i(this,"utilities",void 0),i(this,"reviewData",void 0),i(this,"newsAsReviewData",void 0),i(this,"scenario",void 0),this.stateManagement=t,this.pageHandlerModule=n.pageHandlerModule,this.logModule=n.logModule,this.flyoutData=e,this.utilities=n.viewModulesUtilities,this.telemetryUtilities=n.telemetryHandler,this.assets=new QN}GetModuleName(){return tt.AUTOSREVIEWS}async ShouldRenderModule(){if(!this.flyoutData.dataStoreModule.AutosData?.isAutosSupportedDomain)return Promise.resolve(!1);const t=this.flyoutData.dataStoreModule.AutosData.isAutosSupportedDomain,e=this.flyoutData.common?.lastCommittedURL?.toLowerCase();if(!Vp.checkPathAllowed(e,t,this.flyoutData.dataStoreModule.AutosData.includePaths))return!1;this.reviewData=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(!!this.reviewData&&(this.reviewData.hasExpertReviews||this.reviewData.hasVideos))return this.scenario=gt.SERP,Promise.resolve(!0);const i=await this.fetchAutosNewsData();return this.newsAsReviewData=this.transformNewsData(i),this.newsAsReviewData?(this.scenario=gt.FEED,Promise.resolve(!0)):Promise.resolve(!1)}renderModule(){if(!this.reviewData&&!this.newsAsReviewData)return Promise.resolve(null);const t=pi("msft-edge-shopping-section");t.id=tM.ShoppingSectionId,t.accordion=!0,t.expanded=!0;const e=pi("DIV");if(e.id=tM.ReviewAndRatingsContainerId,this.reviewData){t.titleText=this.reviewData.sectionTitle??(this.reviewData.hasExpertReviews?this.reviewData.hasVideos?this.flyoutData.strings.rrExpertAndVideoReviews:this.flyoutData.strings.rrExpertReviews:this.flyoutData.strings.rrVideoReviews),t.append(e),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());const i=this.RankOrderedCards(this.reviewData),n={l:[]};this.RenderCards(e,i,n)}else if(this.newsAsReviewData){t.titleText=this.newsAsReviewData.sectionTitle||this.flyoutData.strings.autosLatestNews,t.append(e),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());const i=this.RankOrderedCards(this.newsAsReviewData),n={l:[]};this.RenderCards(e,i,n),this.renderSeeMoreLink(t)}const i=this.CreateModule(t,J.AUTOSREVIEWS,tt.AUTOSREVIEWS,ot.CONTEXTUAL,rt.LIST),n=new u(C.AutosRatingsAndReviewsRendered,void 0,void 0,void 0,this.constructTelemetryMetaData());return this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,"Autos RatingAndReview Rendered",n),Promise.resolve(i)}populateMainHeader(){const t=this.flyoutData.common.shopping,e=pi("DIV",{className:"headerContentWrapper"});e.slot="header-content";const i=pi("H2",{className:"headerTitle"});i.textContent=this.reviewData?.sectionTitle||this.newsAsReviewData?.sectionTitle||this.flyoutData.strings.autosLatestNews,e.appendChild(i),t.appendChild(e)}RankOrderedCards(t){let e=[];const i=t.hasExpertReviews,n=t.hasVideos;if(i&&!n&&t.expertReviews)e=t.expertReviews;else if(!i&&n&&t.videos){for(const e of t.videos)e.cardOrientation=qm.V;e=t.videos}else t.expertReviews&&t.videos&&(e=t.expertReviews.concat(t.videos));return e.sort($m.Compare),e}sendAutosMarketplaceDwellTimeTelemery(t,e,i){const n=Date.now()-t,o=new u(e,void 0,void 0,void 0,this.constructTelemetryMetaData());this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,`${i} - ${n} ms`,o),n>=1e3&&di&&this.pageHandlerModule.RecordAsUserAction(di.AUTOS_MARKETPLACE_RATING_REVIEW_HOVER)}RenderCards(t,e,i){for(let n=0,o=0;n<e.length&&o<tM.MaxCardRows;n++,o++){const o=e[n],r=Jm.Narrow(o),a=void 0===r?o:void 0;if(r){const o=[r];if(i.l.push({t:"V",id:r.id,o:qm[r.cardOrientation]}),r.cardOrientation===qm.H)for(;e[n+1]?.cardOrientation===qm.H;){const t=e[++n];o.push(t),i.l.push({t:"V",id:t.id,o:qm[t.cardOrientation]})}this.renderVideosCarousel(o,t)}else a&&(this.renderExpertReview(a,t),i.l.push({t:"R",id:a.id}))}}addNavigateHandler(t,e,i,n,o,r){const a=this.logModule,s=this.pageHandlerModule,l=()=>{a.LogInfoEvent(p.ButtonClick,`Navigate to Autos Marketplace from review Id:${n}`,new ci(i,this.telemetryUtilities.setContentViewed(this.GetModuleName()),void 0,this.constructTelemetryMetaData())),s.RecordAsUserAction(r),e(s,n,o,cn.NEW_FOREGROUND_TAB)};t.addEventListener("click",(()=>{l()})),t.addEventListener("mousedown",(t=>{1===t.button&&l()}));let c=0,d=0,h=!0;t.addEventListener("mouseenter",(()=>{g()})),t.addEventListener("mouseleave",(()=>{f()})),t.addEventListener("focus",(()=>{g()})),t.addEventListener("blur",(()=>{f()}));const g=()=>{if(!(Date.now()-d>200))return;h=!0,c=Date.now();const t=new u(C.AutosMarketplaceRatingAndReviewHovered,void 0,void 0,void 0,this.constructTelemetryMetaData());a.LogInfoEvent(p.EdgeFlyoutStatus,"Autos Marketplace Module - ratingreview hovered",t)},f=()=>{d=Date.now(),setTimeout((()=>{if(h){h=!1,this.sendAutosMarketplaceDwellTimeTelemery(c,C.AutosMarketDwellTimeHover,"Autos Marketplace - hover time over listing");const t=new u(C.AutosMarketDwellTimeHover,void 0,void 0,void 0,this.constructTelemetryMetaData());a.LogInfoEvent(p.EdgeFlyoutStatus,"Autos Marketplace Module - ratingreview exited hover",t)}}),200)}}renderExpertReview(t,e){let i;i=pi("msft-product-card"),i.shadowRoot&&(i.href="#",this.addNavigateHandler(i,((t,e,i,n)=>t.NavigateToProfessionalReviewWithDisposition(e,i,n)),g.ClickExpertReview,t.id,t.url,di.NAVIGATE_TO_PROFESSIONAL_REVIEW),this.utilities.applyStyles(i.shadowRoot,this.assets.getExpertReviewShoppingLinkShadowStyles()),this.stateManagement.addEventListener(dn.ModulesRendered,(()=>{const e=i.shadowRoot?.querySelector(".control");if(e){for(;e.childElementCount>0;)e.removeChild(e.children[0]);const i=!!t.attribution;if(i)e.appendChild(pi("div",{className:"cardtitle"},t.title));else{if(t.favIconDomain){const i=pi("img",{className:"icon",role:"presentation"});this.utilities.addFavIconSrc(i,e,t.favIconDomain)}e.appendChild(pi("div",{className:"provider"},t.provider))}if(t.rating){const i=pi("div",{className:"rating"},t.rating.rawValue.toFixed(1)),n=pi("SPAN");n.textContent="/"+t.rating.maxValue,n.style.fontWeight="normal",this.utilities.isDarkMode()?n.style.color="#FFFFFF":n.style.color="#666666",i.appendChild(n),e.appendChild(i)}if(t.caption){let i=t.caption;if(i.length>160){const t=i.match(/^.{160}\S{0,20}/),e=t&&t[0]?t[0]:i.substr(0,160);e.length<i.length&&(i=e+"...")}e.appendChild(pi("div",{className:"caption"},i))}if(i&&t.attribution){const i=pi("msft-attribution");if(i.innerText=t.attribution,t.favIconDomain){const e=pi("img",{className:"icon",role:"presentation",slot:"image"});this.utilities.addFavIconSrc(e,i,t.favIconDomain)}e.appendChild(i)}}})),e.appendChild(i))}renderVideosCarousel(t,e){if(t&&t.length>0){let i=e;2===t.length&&(i=pi("div",{className:"vid_cds"}));for(let e=0;e<t.length&&e<tM.MaxVideos;e++)this.renderVideo(t[e],i,t.length);t.length>1&&e.appendChild(i)}}renderVideo(t,e,i){const n=i>2,o=i>1,r=n?128:o?166:160,a=o?160:90,s=t.publisher?t.creator?`${t.publisher} > ${t.creator}`:t.publisher:t.creator;let l,c=t.title;t.creator&&(c+=" from "+t.creator),t.publisher&&(c+=" on "+t.publisher),c+=" Â· Duration: "+t.durationLabel,l=pi("msft-product-card",{"aria-label":c}),l.isVideoCard=!0,l.description=t.title,l.retailer=s,l.href="#",this.addNavigateHandler(l,((t,e,i,n)=>t.NavigateToVideoReviewWithDisposition(e,i,n)),g.ClickVideoReview,t.id,t.clickthroughUrl,di.NAVIGATE_TO_VIDEO_REVIEW);const d=pi("style");d.textContent=`\n            .control {\n                height: ${a}px !important;\n                padding: 0 !important;\n            }\n            .control .content {\n                padding: 8px;\n                display: block;\n            }\n            msft-attribution.attribution { grid-template-columns: initial; }`,o&&(n&&(d.textContent+=`.control { width: ${r} !important; }`),d.textContent+="\n                .control {\n                    grid-template-columns: 1fr !important;\n                    grid-template-rows: auto 1fr;\n                }"),l.shadowRoot?.appendChild(d);const u=pi("div",{className:o?"vid_thv":"vid_thh"});u.slot="image",o||(u.style.height=a+"px");const h=pi("img",{role:"presentation"});h.width=r,h.height=o?a-74:a;const p=this.flyoutData.common.urlPrefix;t.thumbnailUrl?h.src=`${p}${t.thumbnailUrl}&w=${h.width}&h=${h.height}&c=7&rs=1`:t.thumbnailId&&(h.src=`${p}https://th.bing.com/th?id=${t.thumbnailId}&pid=Api&w=${h.width}&h=${h.height}&c=7&rs=1`),u.appendChild(h);const f=pi("div",{className:"vid_thov"});t.durationText&&f.appendChild(pi("span",{className:"vid_thdur"},t.durationText)),f.appendChild(pi("span",{className:"vid_thply"})),this.scenario!==gt.FEED&&u.appendChild(f),l.appendChild(u),e.appendChild(l)}renderSeeMoreLink(t){const e=pi("DIV",{className:"seeAllLinkContainer"}),i=pi("A",{className:"seeAllLink"});i.textContent=this.flyoutData.strings.commonSeeAll;const n=this.flyoutData.common.currentDevice;i.onclick=t=>{t.preventDefault(),this.pageHandlerModule.RecordAsUserAction(di.AUTOS_REVIEWS_VIDEO_SEE_MORE_CLICK),this.pageHandlerModule.RecordAsUserEngagement(Xe.AUTOS_REVIEWS_VIDEO_SEE_MORE_CLICK,this.flyoutData.common.popupOrigination);const e=new ci(g.NavigatedToAutosMarketplace,this.telemetryUtilities.setContentViewed(this.GetModuleName()),void 0,this.constructTelemetryMetaData());this.logModule.LogInfoEvent(p.ButtonClick,"Navigate to Autos Marketplace News",e);n===V.Desktop&&this.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/en-us/news/autos?cvid=044D3187FEA440ED9A67A784BB24C135",cn.NEW_FOREGROUND_TAB)},e.appendChild(i),t.appendChild(e)}constructTelemetryMetaData(){try{return JSON.stringify({pageType:this.scenario})}catch(t){return""}}transformNewsData(t){if(!t||0===t.length)return;const e=new Qm;e.sectionTitle=this.flyoutData.strings.autosLatestNews;const i=[];return t.forEach(((t,e)=>{const n=Jm.create(t.id,e,"V",t.title,t.id,t.images[0].url,t.url,t.provider.name,"",0);n&&i.push(n)})),i.length>0&&(e.videos=i),e}async fetchAutosNewsData(){try{const t=await fetch("https://www.bingapis.com/api/autosmarketplace/v1/news?ids=Y_059cef73-df8b-4b3e-ac43-38da0f02c061&market=en-us&ocid=sampleapp&fdhead=1s-brcolors",{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){return(await t.json()).newsItems}return[]}catch(t){return[]}}}i(tM,"ShoppingSectionId","sectRatingsAndReviews"),i(tM,"MaxCardRows",3),i(tM,"MaxVideos",5),i(tM,"ReviewAndRatingsContainerId","rnrWrapper");var eM=tM;var iM=class{getThumbsUp(){return Mt.getTrustedHTML`<svg aria-hidden="true" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">
                                          <path d="M8.9999 3.0102C8.9999 1.38227 8.23983 0.211066 6.99563 0.211066C6.3457 0.211066 6.10136 0.572932 5.86823 1.40827L5.73083 1.92287C5.6635 2.162 5.5463 2.5692 5.3795 3.14353C5.37503 3.15893 5.36843 3.17347 5.3599 3.1868L3.4487 6.17727C2.99667 6.88453 2.32969 7.4282 1.54577 7.7284L1.23025 7.8492C0.399096 8.1674 -0.0834571 9.03658 0.0859628 9.91029L0.355623 11.301C0.516576 12.1311 1.14568 12.7917 1.9669 12.993L7.05203 14.2393C8.7395 14.6529 10.4451 13.6296 10.8744 11.9461L11.8176 8.2466C12.1133 7.08713 11.413 5.90747 10.2534 5.6118C10.0785 5.5672 9.8987 5.54467 9.7181 5.54467L8.50256 5.54467C8.8333 4.45607 8.9999 3.6162 8.9999 3.0102ZM1.06768 9.71993C0.99067 9.32279 1.21001 8.92771 1.58781 8.78306L1.90333 8.66226C2.88707 8.2856 3.72406 7.60333 4.29132 6.7158L6.2025 3.72533C6.2625 3.6314 6.30876 3.52933 6.33983 3.42233L6.70776 2.14213L6.8489 1.6146C6.94183 1.28927 6.98863 1.21107 6.99563 1.21107C7.5741 1.21107 7.9999 1.86713 7.9999 3.0102C7.9999 3.59987 7.7827 4.5672 7.34403 5.88693C7.23643 6.2106 7.47736 6.54467 7.8185 6.54467L9.7181 6.54467C9.81536 6.54467 9.91216 6.5568 10.0064 6.5808C10.6308 6.74 11.0078 7.3752 10.8486 7.99953L9.90536 11.699C9.61163 12.8509 8.4447 13.551 7.2901 13.2681L2.20495 12.0217C1.76276 11.9133 1.42401 11.5576 1.33734 11.1107L1.06768 9.71993Z" fill="currentcolor"/>
                                          </svg>
                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">
                                          <path d="M9.03773 5.54467C9.34493 4.59327 9.5 3.76053 9.5 3.04247C9.5 1.44333 8.874 0.210867 7.83334 0.210867C7.3002 0.210867 7.11474 0.510667 6.91167 1.24187L6.7318 1.92287C6.66454 2.162 6.54733 2.5692 6.38047 3.14353C6.376 3.15893 6.36947 3.17347 6.36087 3.1868L4.44971 6.17727C3.99768 6.88453 3.3307 7.4282 2.54678 7.7284L1.70862 8.04927C1.17971 8.2518 0.872628 8.80489 0.980441 9.36089L1.43788 11.72C1.54931 12.2947 1.98484 12.752 2.55337 12.8914L8.05307 14.2393C9.74053 14.6529 11.4461 13.6296 11.8754 11.9461L12.9246 7.83093C13.1748 6.8498 12.5822 5.85167 11.6011 5.60147C11.4531 5.56373 11.3009 5.54467 11.1481 5.54467L9.03773 5.54467Z" fill="currentcolor"/>
                                          </svg>`}getThumbsDown(){return Mt.getTrustedHTML`<svg aria-hidden="true" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">
                                          <path d="M8.99965 11.9898C8.99965 13.6177 8.23958 14.7889 6.99539 14.7889C6.34545 14.7889 6.10112 14.4271 5.86798 13.5917L5.73058 13.0771C5.66325 12.838 5.54605 12.4308 5.37925 11.8565C5.37479 11.8411 5.36819 11.8265 5.35965 11.8132L3.44846 8.82273C2.99642 8.11547 2.32944 7.5718 1.54552 7.2716L1.23 7.1508C0.398852 6.8326 -0.0837017 5.96342 0.0857183 5.08971L0.355378 3.69899C0.516332 2.86893 1.14544 2.20833 1.96665 2.00705L7.05178 0.760694C8.73925 0.347101 10.4449 1.37039 10.8741 3.05394L11.8174 6.7534C12.1131 7.91287 11.4127 9.09253 10.2532 9.3882C10.0783 9.4328 9.89845 9.45533 9.71785 9.45533H8.50232C8.83305 10.5439 8.99965 11.3838 8.99965 11.9898ZM1.06743 5.28007C0.990425 5.67721 1.20977 6.07229 1.58757 6.21694L1.90309 6.33774C2.88683 6.7144 3.72382 7.39667 4.29108 8.2842L6.20225 11.2747C6.26225 11.3686 6.30852 11.4707 6.33958 11.5777L6.70752 12.8579L6.84865 13.3854C6.94158 13.7107 6.98839 13.7889 6.99539 13.7889C7.57385 13.7889 7.99965 13.1329 7.99965 11.9898C7.99965 11.4001 7.78245 10.4328 7.34379 9.11307C7.23619 8.7894 7.47712 8.45533 7.81825 8.45533H9.71785C9.81512 8.45533 9.91192 8.4432 10.0061 8.4192C10.6305 8.26 11.0076 7.6248 10.8484 7.00047L9.90512 3.30101C9.61138 2.14911 8.44445 1.44896 7.28985 1.73195L2.2047 2.9783C1.76251 3.08668 1.42377 3.44239 1.3371 3.88935L1.06743 5.28007Z" fill="currentcolor"/>
                                          </svg>
                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">
                                          <path d="M9.03773 9.45533C9.34493 10.4067 9.5 11.2395 9.5 11.9575C9.5 13.5567 8.874 14.7891 7.83334 14.7891C7.3002 14.7891 7.11474 14.4893 6.91167 13.7581L6.7318 13.0771C6.66454 12.838 6.54733 12.4308 6.38047 11.8565C6.376 11.8411 6.36947 11.8265 6.36087 11.8132L4.44971 8.82273C3.99768 8.11547 3.3307 7.5718 2.54678 7.2716L1.70862 6.95073C1.17971 6.7482 0.872628 6.19511 0.980441 5.63911L1.43788 3.27999C1.54931 2.70533 1.98484 2.24799 2.55337 2.10865L8.05307 0.760693C9.74053 0.3471 11.4461 1.37039 11.8754 3.05394L12.9246 7.16907C13.1748 8.1502 12.5822 9.14833 11.6011 9.39853C11.4531 9.43627 11.3009 9.45533 11.1481 9.45533L9.03773 9.45533Z" fill="currentcolor"/>
                                          </svg>`}getStyles(){return"\n        #feedbackDiv {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            background: var(--fill-color);\n        }\n        #feedbackPrompt {\n            font-size: 12px;\n            line-height: 16px;\n            margin-left: 12px;\n            margin-top: 12px;\n            margin-bottom: 10px;\n            font-weight: 600;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        .iconButton {\n            border-color: transparent;\n            background: transparent;\n            margin-top: 5px;\n            width: 32px;\n            height: 32px;\n            cursor: pointer;\n        }\n        :is(.iconButton:hover, .iconButton:focus) {\n            background: #E6E6E6;\n            border-radius: 2px;\n            outline: none;\n        }\n        .feedbackText {\n            font-size: 14px;\n            line-height: 18px;\n            margin: 0px;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        #closeButton {\n            margin-top: 2px;\n            margin-left: auto;\n            margin-right: 5px;\n            padding: 0px;\n            border: none;\n            background: transparent;\n            cursor: pointer;\n        }\n        #closeButton:focus {\n            outline: none;\n            border: 2px solid #898989;\n            border-radius: 3px;\n        }\n        #feedbackDivThanks {\n            background: linear-gradient(90deg, #EEFCFF 20.31%, #F5F9FF 46.87%, #FFFFFF 98.44%);\n            padding: 10px;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            border-top: 1px solid #F1F1F1;\n            column-gap: 12px;\n        }\n        "}getDarkModeStyles(){return"\n        #feedbackDiv {\n            background: #3b3b3b;\n            border-top: 1px solid rgb(241, 241, 241, 0.08);\n        }\n        #feedbackDivThanks {\n            background: linear-gradient(90deg, #324654 20.31%, #3E444E 46.87%, #3b3b3b 98.44%);\n            border-top: 1px solid rgb(241, 241, 241, 0.08);\n        }\n        #feedbackPrompt, .feedbackText {\n            color: rgba(255, 255, 255, 0.83);\n        }\n        :is(.iconButton:hover, .iconButton:focus) {\n            background: #5f5f5f;\n        }\n        #closeButton svg path {\n            fill: #FFFFFF;\n        }\n        "}};var nM=new class{UpdateExtractedIndex(t,e,i){const n=e.common.shopping.querySelector("msft-ax-shopping-index"),o=wf(t,e,i);(!e.dataStoreModule.AXShopData||o.length>e.dataStoreModule.AXShopData.length)&&(e.dataStoreModule.AXShopData=o),n?.handleUIContent(e.dataStoreModule.AXShopData)}GetModuleName(){return tt.AX_SHOPPING_NAV}UpdateData(t,e,i){const n=t.detail?.data?.extracted_entity;n&&this.UpdateExtractedIndex(n,e,i.pageHandlerModule)}};const oM=new Map;oM[0]=g.FeedbackDislikeMenu0,oM[1]=g.FeedbackDislikeMenu1,oM[2]=g.FeedbackDislikeMenu2,oM[3]=g.FeedbackDislikeMenu3;var rM=class extends CE{constructor(t,e,n,o){super(),i(this,"feedbackAssets",void 0),i(this,"pageHandlerModule",void 0),i(this,"assets",void 0),i(this,"flyoutData",void 0),i(this,"utilities",void 0),i(this,"stateManagement",void 0),i(this,"tooltipUtilities",void 0),i(this,"commonAssets",void 0),i(this,"axShopNav",void 0),i(this,"options",void 0),i(this,"clientId",void 0),i(this,"telemetryUtilities",void 0),i(this,"timeoutDuration",void 0),this.stateManagement=t,this.pageHandlerModule=n.pageHandlerModule,this.flyoutData=e,this.utilities=n,this.tooltipUtilities=n.tooltipUtilities,this.telemetryUtilities=n.telemetryHandler,this.feedbackAssets=new iM,this.commonAssets=o;const r=c.getMultipleVariants(a.axShopping);this.timeoutDuration=c.getVariantValue(r,"timeoutDuration",1e4),this.clientId="",this.options=[],this.options.push(this.flyoutData.strings.indexDoesNotWork),this.options.push(this.flyoutData.strings.popsUpTooFrequently),this.options.push(this.flyoutData.strings.incorrectProductInformation),this.options.push(this.flyoutData.strings.untrustworthyWebsite),this.stateManagement.addEventListener(dn.CompleteEntityExtracted,(t=>{const i=t.detail?.data?.complete_extracted_entity;i&&nM.UpdateExtractedIndex(i,e,this.pageHandlerModule)}))}GetModuleName(){return tt.AX_SHOPPING_NAV}ShouldRenderModule(){return this.flyoutData.common.isScreenReaderDetected&&this.pageHandlerModule.TriggerExperiment(a.axShopping),Promise.resolve(Of(this.flyoutData))}renderModule(){const t=pi("msft-edge-shopping-section");t.titleText=this.flyoutData.strings.axShopTitle,t.id="axShoppingSection",t.accordion=!0,t.expanded=!0,t.style.position="relative",t.appendChild(this.createTooltip()),this.axShopNav=pi("msft-ax-shopping-index"),this.axShopNav.init(this.utilities,this.flyoutData,this.timeoutDuration),this.axShopNav.id="ax-shopping-index",t.appendChild(this.axShopNav),this.flyoutData.dataStoreModule.AXShopData&&this.axShopNav.handleUIContent(this.flyoutData.dataStoreModule.AXShopData),this.flyoutData.common.popupOrigination===qt.OPEN_FLYOUT_AX_SHOPPING&&this.utilities.viewModulesUtilities.switchShoppingTab(yt.Contextual);const e=pi("div");e.id="feedbackDiv",e.style.alignItems="center",e.style.display="flex",e.style.flexDirection="row",e.style.marginLeft="10px",e.style.marginRight="10px",e.setAttribute("role","group"),this.createFeedbackPrompt(e),t.appendChild(e);const i=this.CreateModule(t,J.AX_SHOPPING_NAV,tt.AX_SHOPPING_NAV,ot.CONTEXTUAL,rt.BLOCK);return Promise.resolve(i)}populateMainHeader(){const t=this.flyoutData.common.shopping.querySelector("#axShoppingSection");t&&(t.accordion=!1,t.expanded=!0,t.titleText=this.flyoutData.strings.axShopTitle,t.slot="header-content")}PostProcessing(t,e,i){}ShowAlways(){return!1}GetAssets(){return null}CalculateRanking(){return H.Unknown}handleMenuDismiss(t,e,i){if(t.selected&&!t.menuVisible||i){for(;e.lastChild;)e.lastChild.remove();this.createThankYouDialogue(e,i)}}getLogData(t,e=""){if(!this.flyoutData.dataLoader.GetLoadTimeDataValue("is_metrics_reporting_enabled",!1))return{};let i;if("MicroFeedbackVote"===t)i={fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===Y.Auto,itemID:1,itemName:"Accessible Shopping"};else if("MicroFeedbackFollowUpVote"===t){i={answer:e,answerId:this.options.indexOf(e),clientFeedbackId:this.clientId,fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===Y.Auto,itemId:1,itemName:"Accessible Shopping",vote:"dislike"}}return i}async microFeedbackLog(t){const e="like"===t?g.FeedbackLike:g.FeedbackDislike,i=new ci(e,this.telemetryUtilities.setContentViewed(this.GetModuleName()));i.Metadata=JSON.stringify({popupOriginationEnum:this.flyoutData.common.popupOrigination});const n=this.getLogData("MicroFeedbackVote");if(this.utilities.logModule.LogInfoEvent(p.ButtonClick,"Vote: "+t,i),this.flyoutData.common.openedWith===Y.Auto&&this.flyoutData.common.popupOrigination===qt.AUTO_SHOW_COUPONS_CHECKOUT&&"unlike"===t){const t=144e5;await this.utilities.autoOpenControllerUtilities.addNegativeEngagement(this.flyoutData.common.popupOrigination,1,t)}const o=await this.pageHandlerModule.SendMicroFeedbackVote(t,n,!1);o?.clientFeedbackId&&(this.clientId=o.clientFeedbackId)}dislikeMenuLog(t,e,i){const n=i.target.textContent??"",o=this.options.indexOf(n);let r=oM[o];r||(r=g.Unknown);const a=new ci(r,this.telemetryUtilities.setContentViewed(this.GetModuleName())),s=this.getLogData("MicroFeedbackFollowUpVote",n);for(this.utilities.logModule.LogInfoEvent(p.ButtonClick,"Clicked follow up menu option for feedback: "+this.clientId,a),this.pageHandlerModule.SendMicroFeedbackFollowUpVote(this.clientId,o.toString(),n,s,!1),"Other"===n&&0!==Object.entries(s).length&&this.pageHandlerModule.OpenMicroFeedback(JSON.stringify(s));t.lastChild;)t.lastChild.remove();this.createThankYouDialogue(t,e)}async createFeedbackPrompt(t){const e=pi("p");e.className="txtSmall",e.id="feedbackPrompt",e.textContent=this.flyoutData.strings.axShopFeedbackPrompt,this.flyoutData.common.isPane&&(e.style.fontSize="14px",e.style.lineHeight="20px"),t.setAttribute("aria-labelledby","feedbackPrompt");const i=pi("msft-micro-feedback");i.style.marginRight="6px",i.style.marginLeft="auto";const n=pi("msft-micro-feedback-item");n.ariaLabel=this.flyoutData.strings.feedbackAriaLike,n.className="iconButton",n.innerHTML=this.feedbackAssets.getThumbsUp(),n.addEventListener("click",(async e=>{for(await this.microFeedbackLog("like");t.lastChild;)t.lastChild.remove();const i=Me.IsKeyboardClick(e);this.createThankYouDialogue(t,i),e.preventDefault()}));const o=pi("msft-micro-feedback-item");o.ariaLabel=this.flyoutData.strings.feedbackAriaDislike,o.id="btnFeedbackDislike",o.setAttribute("flyout-vertical-position","top"),o.className="iconButton",o.innerHTML=this.feedbackAssets.getThumbsDown();const r=this.createDislikeMenu(t,o);o.addEventListener("click",(async e=>{if(r.style.maxWidth="220px",r.style.maxHeight="75px",!o.selected){for(;t.lastChild;)t.lastChild.remove();const i=Me.IsKeyboardClick(e);this.createThankYouDialogue(t,i)}const i=e.target.textContent??"";-1===this.options.indexOf(i)&&await this.utilities.autoOpenControllerUtilities.userEngagementStoreManager.addEngagement(Ze.NEGATIVE,this.flyoutData.common.popupOrigination,this.stateManagement.getState(un.topContextualModuleName),We.dislikeDefaultWeight,g.FeedbackDislike);i===this.flyoutData.dataLoader.GetLoadTimeDataValue(He.feedbackTooFrequently.message,"")&&await this.utilities.autoOpenControllerUtilities.userEngagementStoreManager.addEngagement(Ze.NEGATIVE,this.flyoutData.common.popupOrigination,this.stateManagement.getState(un.topContextualModuleName),He.feedbackTooFrequently.weight);i===this.flyoutData.dataLoader.GetLoadTimeDataValue(He.feedbackAXShopIndexDoesNotWork.message,"")&&await this.utilities.autoOpenControllerUtilities.userEngagementStoreManager.increasecIndexExpectationWeight(this.flyoutData.common.popupOrigination,this.stateManagement.getState(un.topContextualModuleName)),await this.microFeedbackLog("unlike"),e.preventDefault()})),i.append(n),i.append(o),t.append(e),t.append(i)}createDislikeMenu(t,e){const i=pi("fluent-menu");i.id="dislikeMenu",i.slot="menu",i.style.width="270px",i.style.overflow="auto",i.setAttribute("aria-label","Reason for thumbs down"),i.addEventListener("click",(e=>{this.dislikeMenuLog(t,!1,e)})),i.addEventListener("keydown",(i=>{"Enter"===i.key?this.dislikeMenuLog(t,!0,i):"Tab"!==i.key&&"Escape"!==i.key||this.handleMenuDismiss(e,t,!0)})),document.addEventListener("click",(()=>{this.handleMenuDismiss(e,t,!1)}));for(const t of this.options)if(""!==t){const e=pi("fluent-menu-item");e.textContent=t,i.append(e)}return e.append(i),i}createThankYouDialogue(t,e=!1){t.id="feedbackDivThanks",t.style.position="sticky",t.setAttribute("aria-labelledby","feedbackText"),this.utilities.viewModulesUtilities.applyStyles(t,this.feedbackAssets.getStyles(),void 0,this.feedbackAssets.getDarkModeStyles());const i=pi("img");i.src=this.flyoutData.common.resourcesEndpoint+"feedbackIcons/like_1.png",i.setAttribute("aria-hidden","true"),i.style.height="fit-content";const n=pi("p");n.className="txtSmall feedbackText",n.textContent=this.flyoutData.strings.feedbackThanks,this.flyoutData.common.isPane&&(n.style.fontSize="14px",n.style.lineHeight="20px"),n.style.fontSize="12px",n.setAttribute("tabindex","-1"),t.style.background="var(--fill-color)",t.style.padding="0px",t.parentElement&&(t.parentElement.style.gridTemplateColumns="calc(40% - 26px) calc(60% - 26px)");const o=pi("div");o.innerHTML=this.commonAssets.getCloseButton(),o.setAttribute("aria-hidden","true"),o.style.height="16px",o.style.fill="var(--neutral-foreground-rest)";const r=pi("fluent-button");r.appendChild(o),r.id="closeButton",r.style.cursor="pointer",r.appearance="stealth",r.setAttribute("aria-label",this.flyoutData.strings.feedbackAriaClose),r.addEventListener("click",(e=>{const i=new ci(g.FeedbackClose,this.telemetryUtilities.setContentViewed(this.GetModuleName()));i.Metadata=JSON.stringify({popupOriginationEnum:this.flyoutData.common.popupOrigination}),this.utilities.logModule.LogInfoEvent(p.ButtonClick,"Closed out of feedback module",i);const n=this.flyoutData.common.shopping.querySelector(`#${mt.CLOSE}`),o=Me.IsKeyboardClick(e);n&&o&&n.focus(),t.remove();const r=this.flyoutData.common.shopping.querySelectorAll("hr");let a;r&&r.length>0&&(a=r[r.length-1],a.remove());const s=this.flyoutData.common.shopping.querySelector("#axShoppingSection");s&&s.focus()})),t.append(i),t.append(n),t.append(r),e&&n&&n.focus()}createTooltip(){const t=pi("DIV",{style:"padding: 6px 6px 0px; position: absolute; right: 0px;"}),e=this.flyoutData.strings.axShopTooltipMessage,i=this.tooltipUtilities.createInfoIconTooltip(e);i.style.alignSelf="center",i.id="ax-shopping-tooltip";const n=i.querySelector("svg");return n.setAttribute("height","14"),n.setAttribute("width","14"),t.appendChild(i),t}};var aM=class{constructor(t,e){i(this,"utilities",void 0),i(this,"flyoutData",void 0),this.flyoutData=t,this.utilities=e}GetPopupOriginationList(){return[qt.AUTO_SHOW_AX_SHOPPING]}async RenderNotification(){this.flyoutData.common.shopping.classList.add("noSections");const t=pi("DIV",{className:"lateralMargin"});t.id="divNotificationActions",t.slot="actions";const e=pi("DIV"),i=pi("h2",{style:"margin: 0px 16px;"});i.innerText=this.flyoutData.strings.axShopNurturingTitle;const n=pi("div",{style:"margin: 0px 16px;"});n.innerText=this.flyoutData.strings.axShopNurturingMessage,e.append(i),e.append(n);const o=mi(this.utilities.viewModulesUtilities);return o.style.height="32px",o.textContent=this.flyoutData.strings.axShopTryNowButton,o.addEventListener("click",(()=>{this.utilities.pageHandlerModule.RecordAsUserAction(di.AX_SHOPPING_NAV_TRY_NOW_CLICK),this.utilities.pageHandlerModule.OpenPane(this.flyoutData.common.popupOrigination)})),t.appendChild(o),e.appendChild(t),await this.utilities.footerUtilities.showFooter()&&this.flyoutData.common.shopping.classList.add("noSections"),Promise.resolve(this.utilities.viewModulesUtilities.createNotificationModule(e,this.GetNotificationName(),this))}async ShouldRenderNotification(){const t=this.flyoutData.common.openedWith===Y.Auto&&this.flyoutData.common.popupOrigination===qt.AUTO_SHOW_AX_SHOPPING;return Promise.resolve(t&&Of(this.flyoutData))}GetNotificationName(){return et.AX_SHOPPING_NAV_NOTIFICATION}PostProcessingNotification(t,e){}};var sM=class{getStyles(){return"\n        html {\n            overflow: hidden;\n        }\n        .btnBannerPrimary {\n            background: #0078D4;\n            border: none;\n            border-radius: 2px;\n            color: #FFFFFF;\n            min-height: 32px;\n            height: auto;\n            padding: 10px 24px;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            border-width: 0px;\n            cursor: pointer;\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            font-weight: bold;\n            outline: none;\n        }\n        .bannerMainTitleAlt {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 18px;\n            line-height: 25px;\n            margin: 0px;\n        }\n        .btnBannerPrimary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        .btnBannerSecondary {\n            border: none;\n            border-radius: 2px;\n            min-height: 32px;\n            height: auto;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            cursor: pointer;\n            background: rgba(0, 0, 0, 0.07);\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            outline: none;\n            padding: 1px 15px;\n        }\n        .btnBannerSecondary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        #mainDiv {\n            display: grid;\n            grid-template-columns: auto auto auto auto;\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 50px;\n            overflow-y: auto;\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n            z-index: 3000000000;\n        }\n        .divTitle {\n            display: grid;\n            grid-gap: 10px;\n            grid-template-columns: 1fr auto;\n            justify-self: start;\n            grid-column-start: 1;\n            align-items: center;\n            margin-left: 16px;\n            margin-right: 16px;\n        }\n        #divContent {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            justify-self: flex-end;\n            align-items: center;\n            grid-column-start: 4;\n            grid-gap: 10px;\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 22px;\n            margin: 0px;\n        }\n        .copiedIndicator {\n            display: flex;\n            flex-direction: row;\n            width: 100%;\n            height: 100%;\n            z-index: 1;\n            background-color: #0078D4;\n            position: absolute;\n            align-items: center;\n            justify-content: center;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            padding: 0px;\n        }\n        .btnBannerClose {\n            width: 30px;\n            height: 30px;\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            appearance: none;\n            background: none;\n            border-width: 0px;\n            outline: none;\n        }\n        .btnBannerClose:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n            border-radius: 2px;\n        }\n        #btnDisableAutoShowBanner {\n            width: 0px;\n            overflow: hidden;\n            min-width: unset;\n            transition: width 2s;\n        }\n        .bannerBackground1 {\n            background: linear-gradient(269.25deg, #FFFFFF 3.48%, #DDF1FF 34.6%, #DDFDFF 56.91%, #F3FFF9 80.98%, #FFFFFF 100.94%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground2 {\n            background: white;\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground3 {\n            background: linear-gradient(91.11deg, #2250AB -2.43%, #3C79D6 2.35%, #D2EFFF 21.53%, #DBFDFF 42.49%, #63B8E8 52.13%, #3C79D6 58.88%, #2250AB 69.83%, #0840B0 86.55%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground4 {\n            height: 50px;\n            background: linear-gradient(91.11deg, #D2EFFF -2.41%, #DBFDFF 18.89%, #D8F5FF 27.92%, #63B8E8 40.11%, #3C79D6 49.19%, #2250AB 64.05%, #0840B0 89.38%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground5 {\n            height: 50px;\n            background: linear-gradient(269.29deg, #FFF4F8 0.61%, #FFFCDE 21.7%, #FFFDE7 63.38%, #ECFFEF 86.01%, #F1FFFE 99.39%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        #viewMorePricesButton {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            align-items: center;\n            padding: 5px 28px 5px 27px;\n            background: linear-gradient(221.42deg, #FF8A1E -21.61%, #FC5C82 109.89%, #FFD98E 150.42%);\n            box-shadow: 0px 1px 2px 1px rgba(0, 0, 0, 0.1), 0px 4px 4px rgba(0, 0, 0, 0.15);\n            border-radius: 100px;\n        }\n    "}getWhiteTriangleButtonIcon(){return Mt.getTrustedHTML`<svg aria-hidden="true" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.39519 6.5125L7.38869 2.8125C7.52119 2.649 7.52819 2.4455 7.44969 2.2835C7.37119 2.1215 7.20569 2 6.99369 2H1.00669C0.794689 2 0.629689 2.121 0.551189 2.2835C0.472689 2.446 0.479689 2.6485 0.612189 2.8125L3.60569 6.5125C3.70669 6.6375 3.85319 6.7 4.00019 6.7C4.14719 6.7 4.29369 6.6375 4.39519 6.5125Z" fill="white"/>
        </svg>`}getCloseButtonWhite(){return Mt.getTrustedHTML`<svg id="flyoutCloseWhite" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z" fill="#FFFFFF"/>
        </svg>`}getCloseButtonSeparatorCss(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid #ECECEC;\n        transform: rotate(90deg);"}getCloseButtonSeparatorCssWhite(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid rgba(255, 255, 255, 0.16);\n        transform: rotate(90deg);"}getBannerConfettiImage(){return Mt.getTrustedHTML`<svg width="405" height="50" viewBox="0 0 405 54" fill="none" xmlns="http://www.w3.org/2000/svg">
        <mask id="mask0" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="405" height="54">
        <rect width="405" height="54" fill="#C4C4C4"/>
        </mask>
        <g mask="url(#mask0)">
        <rect width="11.4496" height="11.4496" transform="matrix(-0.691149 0.722712 0.722712 0.691149 216.914 7)" fill="#77E0B5"/>
        <circle r="5.72479" transform="matrix(-4.37114e-08 1 1 4.37114e-08 6.72479 30.7248)" fill="#77E0B5"/>
        <rect width="11.4496" height="22.8992" transform="matrix(-0.258819 0.965926 0.965926 0.258819 382.963 23)" fill="#FEAC93"/>
        <g filter="url(#filter0_f)">
        <rect width="11.4496" height="22.8992" rx="5.72479" transform="matrix(-0.915822 -0.401584 -0.401584 0.915822 337.682 -1.40186)" fill="#F67173"/>
        </g>
        <path d="M111.904 13.3424C117.117 8.12971 125.569 8.12972 130.781 13.3424C135.994 18.5551 135.994 27.0065 130.781 32.2192L111.904 13.3424Z" fill="#F67173"/>
        <rect width="9.72902" height="6.94028" transform="matrix(-0.5 0.866025 0.866025 0.5 86.8643 -5)" fill="#3F8EF6"/>
        <rect width="11.4496" height="23.3405" transform="matrix(0.965926 0.258819 0.258819 -0.965926 235 54.5454)" fill="#38D4FA"/>
        </g>
        <defs>
        <filter id="filter0_f" x="309" y="-15" width="37.6817" height="43.5695" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
        <feGaussianBlur stdDeviation="4.5" result="effect1_foregroundBlur"/>
        </filter>
        </defs>
        </svg>
        `}};var lM=class{constructor(t,e,n,o){i(this,"ExperimentActive",!1),i(this,"ContentImageFile",void 0),i(this,"ContentImageSize",void 0),i(this,"TitleDivMarginLeft",void 0),i(this,"ContentDivMarginRight",void 0),i(this,"TitleDivSwapElementOrder",!1),i(this,"AddConfetti",!1),i(this,"UseSavingsTextGradient",!1),i(this,"ShowTitleInWhite",!1),i(this,"ClassName",void 0),i(this,"UseWhiteCloseButton",!1),i(this,"FlyoutData",void 0),i(this,"PageHandlerModule",void 0),i(this,"CommonAssets",void 0),this.FlyoutData=e,this.PageHandlerModule=t,this.CommonAssets=o,c.isPCBannerUXExperimentActive()&&(this.ExperimentActive=!0,c.isExperimentActive(a.pcBannerUXExperimentation1)?(this.ClassName="bannerBackground1",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="Emoji.png",this.ContentImageSize=32,this.UseSavingsTextGradient=!0):c.isExperimentActive(a.pcBannerUXExperimentation2)?(this.ClassName="bannerBackground2",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.AddConfetti=!0,this.UseSavingsTextGradient=!0):c.isExperimentActive(a.pcBannerUXExperimentation3)?(this.ClassName="bannerBackground3",this.TitleDivMarginLeft=375,this.ContentDivMarginRight=187,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):c.isExperimentActive(a.pcBannerUXExperimentation4)?(this.ClassName="bannerBackground4",this.TitleDivMarginLeft=112,this.ContentDivMarginRight=58,this.TitleDivSwapElementOrder=!0,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):c.isExperimentActive(a.pcBannerUXExperimentation5)?(this.ClassName="bannerBackground5",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="ClappingHands.png",this.ContentImageSize=36,this.UseSavingsTextGradient=!0):c.isExperimentActive(a.pcBannerUXExperimentation6)&&(this.ExperimentActive=!0,this.ClassName="bannerBackground6"))}TriggerActiveExperiment(){this.ExperimentActive&&(c.isExperimentActive(a.pcBannerUXExperimentation1)?this.PageHandlerModule.TriggerExperiment(a.pcBannerUXExperimentation1):c.isExperimentActive(a.pcBannerUXExperimentation2)?this.PageHandlerModule.TriggerExperiment(a.pcBannerUXExperimentation2):c.isExperimentActive(a.pcBannerUXExperimentation3)?this.PageHandlerModule.TriggerExperiment(a.pcBannerUXExperimentation3):c.isExperimentActive(a.pcBannerUXExperimentation4)&&this.PageHandlerModule.TriggerExperiment(a.pcBannerUXExperimentation4))}RenderViewAllButton(t,e){function i(t,e){const i=t.querySelector("path");null!==i&&(i.style.fill=e)}let n=0;if(c.isExperimentActive(a.pcBannerUXExperimentation1)||c.isExperimentActive(a.pcBannerUXExperimentation2))n=20,t.innerHTML=this.CommonAssets.getArrowButtonIcon(),i(t,"#FA003C"),t.style.marginRight="-10px";else if(c.isExperimentActive(a.pcBannerUXExperimentation3))n=8,t.innerHTML=(new sM).getWhiteTriangleButtonIcon();else if(c.isExperimentActive(a.pcBannerUXExperimentation4)){t.id="viewMorePricesButton",t.innerText=this.FlyoutData.strings.viewMorePricesButtonText,t.style.color="white";const e=pi("DIV");e.innerHTML=this.CommonAssets.getArrowButtonIcon(),i(e,"#FFFFFF"),e.style.float="right",e.style.marginLeft="14px",t.appendChild(e)}else c.isExperimentActive(a.pcBannerUXExperimentation5)&&(n=20,t.innerHTML=this.CommonAssets.getArrowButtonIcon(),i(t,"#FA003C"),t.style.marginRight="-10");if(t.style.backgroundColor="transparent",t.style.border="none",n>0){const e=t.querySelector("SVG");e&&(e.setAttribute("width",n.toString()),e.setAttribute("height",n.toString()))}}};var cM=class{constructor(t,e,n,o,r,s,l,d){i(this,"logModule",void 0),i(this,"pagehandlerModule",void 0),i(this,"data",void 0),i(this,"utilities",void 0),i(this,"stateManagement",void 0),i(this,"classBtnBannerPrimary","btnBannerPrimary"),i(this,"classSpanCouponCode","spanCouponCode"),i(this,"classDivActionButtonWrapper","divActionButtonWrapper"),i(this,"idMainDiv","mainDiv"),i(this,"idContent","divContent"),i(this,"classTitle","divTitle"),i(this,"classBtnViewMorePrices","viewMorePricesButton"),i(this,"classBtnBannerClose","btnBannerClose"),i(this,"classTxtSmall","txtSmall"),i(this,"classCopiedIndicator","copiedIndicator"),i(this,"classActionsButton",Rt.Primary),i(this,"cashBackData",void 0),i(this,"isCashbackActivated",void 0),i(this,"cashBackModule",void 0),i(this,"priceHistoryModule",void 0),i(this,"priceComparisonModule",void 0),i(this,"couponsModule",void 0),i(this,"isPriceHistoryExperimentActive",void 0),i(this,"isPriceComparisonExperimentActive",void 0),i(this,"isCashBackExperimentActive",void 0),i(this,"isCouponsExperimentActive",void 0),i(this,"isPCBannerUXExperimentActive",void 0),i(this,"pcBannerUXConfig",void 0),i(this,"assets",void 0),i(this,"commonAssets",void 0),this.logModule=l.logModule,this.pagehandlerModule=l.pageHandlerModule,this.cashBackModule=t,this.priceComparisonModule=e,this.priceHistoryModule=n,this.couponsModule=o,this.data=r,this.cashBackData=this.data.dataStoreModule.CashBackData,this.isCashbackActivated=this.cashBackData?.isCashBackActivated,this.stateManagement=s,this.utilities=l.viewModulesUtilities,this.assets=new sM,this.commonAssets=d,this.isPriceHistoryExperimentActive=c.isExperimentActive(a.bannerShowPriceHistory),this.isPriceComparisonExperimentActive=c.isExperimentActive(a.bannerShowPriceComparison),this.isCashBackExperimentActive=c.isExperimentActive(a.bannerShowCashback),this.isCouponsExperimentActive=c.isExperimentActive(a.bannerShowCoupons),this.isPCBannerUXExperimentActive=c.isPCBannerUXExperimentActive(),this.pcBannerUXConfig=new lM(this.pagehandlerModule,r,this.utilities,this.commonAssets)}async renderBanner(){const t=document.querySelector("#divContentWrapper");if(t){this.utilities.applyStyles(t,this.assets.getStyles());const e=pi("fluent-design-system-provider");this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ClassName?e.className=this.pcBannerUXConfig.ClassName:this.utilities.isDarkMode()?e.setAttribute("background-color","#4a4a4a"):e.setAttribute("background-color","#F7F7F7"),e.id=this.idMainDiv;const i=this.populateMainHeader(),n=await this.getModuleToRender(),o=pi("DIV");o.id=this.idContent,this.pcBannerUXConfig.ExperimentActive&&(o.style.display="flex");const r=pi("P",{style:"font-weight: 600"});let a;r.className=this.classTxtSmall,this.createBannerContent(n,o,r),this.createBannerMenu(o),e.appendChild(i),e.appendChild(o),t.appendChild(e),e.addEventListener("click",(()=>{this.pagehandlerModule.ShowFlyoutFromBanner(Y.Mouse)})),e.addEventListener("mouseover",(()=>{a=setTimeout((()=>{this.pagehandlerModule.ShowFlyoutFromBanner(Y.Mouse)}),500)})),e.addEventListener("mouseout",(()=>{a&&clearTimeout(a)}));const s=new u(C.BannerRendered);this.logModule.LogInfoEvent(p.EdgeFlyoutStatus,`user saw banner with ${n}`,s),this.pagehandlerModule.OnBannerLoad();const l=document.querySelector("."+this.classBtnViewMorePrices);l&&l.addEventListener("keydown",(t=>{"Enter"===t.key&&this.pagehandlerModule.ShowFlyoutFromBanner(Y.Keyboard),t.stopPropagation()})),document.addEventListener("visibilitychange",(t=>{"hidden"===document.visibilityState?re("banneropen","false"):"visible"===document.visibilityState&&re("banneropen","true")}))}}populateMainHeader(){const t=pi("DIV",{style:"display:flex;"}),e=pi("DIV",{style:"float:left;"});e.className=this.classTitle,this.pcBannerUXConfig.ExperimentActive&&(e.style.marginLeft=this.pcBannerUXConfig.TitleDivMarginLeft.toString()+"px");const i=pi("DIV");i.setAttribute("aria-hidden","true"),i.innerHTML=this.commonAssets.getHeaderIcon();const n=i.querySelector("SVG");n&&(n.setAttribute("width","26px"),n.setAttribute("height","26px"));const o=pi("H1",{style:"font-weight: 600; color: #000000;"});if(o.className=this.classTxtSmall,o.textContent=this.data.strings.commonFixedTitle,this.pcBannerUXConfig.TitleDivSwapElementOrder?(e.appendChild(o),e.appendChild(i)):(e.appendChild(i),e.appendChild(o)),t.appendChild(e),this.pcBannerUXConfig.AddConfetti){const e=pi("DIV",{style:"float:left;"});e.setAttribute("aria-hidden","true"),e.innerHTML=this.assets.getBannerConfettiImage(),e.style.marginLeft="40",e.className=this.classTitle,t.appendChild(e)}return t}createBannerMenu(t){const e=pi("DIV",{style:this.pcBannerUXConfig.UseWhiteCloseButton?this.assets.getCloseButtonSeparatorCssWhite():this.assets.getCloseButtonSeparatorCss()});t.appendChild(e);const i=document.createElement("fluent-button");let n;i.setAttribute("aria-label",this.data.strings.commonClose),i.id=mt.CLOSE,i.className=this.classBtnBannerClose,i.style.marginLeft="-15px",i.style.color="#000000",this.pcBannerUXConfig.UseWhiteCloseButton?i.innerHTML=this.assets.getCloseButtonWhite():i.innerHTML=this.commonAssets.getCloseButton(),i.addEventListener("click",(()=>{n=new ci(g.BannerDismiss,an.BANNER),this.logModule.LogInfoEvent(p.ButtonClick,"Banner Dismissed",n),this.pagehandlerModule.DismissBanner()}));const o=i.querySelector("SVG");o&&o.setAttribute("aria-hidden","true"),t.appendChild(i)}IsPriceComparisonExperimentActive(){return this.isPriceComparisonExperimentActive||this.isPCBannerUXExperimentActive}async getModuleToRender(){this.pcBannerUXConfig.TriggerActiveExperiment(),this.pagehandlerModule.TriggerExperiment(a.bannerShowPriceHistory),this.pagehandlerModule.TriggerExperiment(a.bannerShowPriceComparison),this.pagehandlerModule.TriggerExperiment(a.bannerShowCashback),this.pagehandlerModule.TriggerExperiment(a.bannerShowCoupons);switch(this.stateManagement.getState(un.topModuleName)){case tt.PRICEHISTORY:if(this.isPriceHistoryExperimentActive)return tt.PRICEHISTORY;break;case tt.PRICECOMPARISON:if(this.IsPriceComparisonExperimentActive())return tt.PRICECOMPARISON;break;case tt.CASHBACK:if(this.isCashBackExperimentActive)return tt.CASHBACK;break;case tt.COUPON:if(this.isCouponsExperimentActive)return tt.COUPON}return this.isPriceHistoryExperimentActive&&await this.priceHistoryModule.ShouldRenderModule()?tt.PRICEHISTORY:this.isPriceComparisonExperimentActive&&await this.priceComparisonModule.ShouldRenderModule()?tt.PRICECOMPARISON:this.isCashBackExperimentActive&&await this.cashBackModule.ShouldRenderModule()?this.isCashbackActivated&&this.isCouponsExperimentActive&&await this.areCouponsHighSuccessRate()?tt.COUPON:tt.CASHBACK:tt.COUPON}async areCouponsHighSuccessRate(){const t=this.data.dataStoreModule.CouponData;if(await this.couponsModule.ShouldRenderModule()){return(t?.Coupons[0].successRate??-1)>=75}return!1}createBannerContent(t,e,i){switch(t){case tt.PRICECOMPARISON:this.renderPriceComparison(e,i);break;case tt.CASHBACK:this.renderCashBack(e,i);break;case tt.PRICEHISTORY:this.renderPriceHistory(e,i);break;case tt.COUPON:default:this.renderCoupons(e,i)}}createBannerTitle(t,e,i,n){if(e&&e.length>0){const o=window.trustedTypes.emptyHTML;if(t.innerHTML=o,t.textContent=e[0],this.pcBannerUXConfig.ExperimentActive&&(t.className="bannerMainTitleAlt"),e.length>1){const o=pi(i,n);o.textContent=e[1],t.appendChild(o)}if(e.length>2){const i=pi("P",{style:"display: inline;"});i.textContent=e[2],t.appendChild(i)}}}getCouponTextInfo(t,e){if(t.Coupons[0].successRate>=75)if(t.Coupons.length>1&&(t.Coupons[1].successRate<75||!t.Coupons[1].successRate)){let i=Me.GetICUPluralString(this.data.strings.bannerCouponTitle,M.One);i=Me.ReplaceValueInKey("bannerCouponTitle",i,t.Coupons[0].successRate.toString());const n=i.split("|");this.createBannerTitle(e,n,"B")}else{let i=t.Coupons[0].successRate;t.Coupons.length>1&&t.Coupons[0].successRate>t.Coupons[1].successRate&&(i=t.Coupons[1].successRate);let n=Me.GetICUPluralString(this.data.strings.bannerCouponTitle,M.Other);n=Me.ReplaceValueInKey("bannerCouponTitle",n,i.toString());const o=n.split("|");this.createBannerTitle(e,o,"B")}else if(1===t.Coupons.length){const t=Me.GetICUPluralString(this.data.strings.bannerCouponHeadingLabel,M.One).split("|");this.createBannerTitle(e,t,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}else{const i=Me.GetICUPluralString(this.data.strings.bannerCouponHeadingLabel,M.Other,t.Coupons.length).split("|");this.createBannerTitle(e,i,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}}renderCoupons(t,e){const i=this.data.dataStoreModule.CouponData;if(i&&i.Coupons&&i.Coupons.length>0){this.getCouponTextInfo(i,e),t.appendChild(e);let n=2;i.Coupons.length<n&&(n=i.Coupons.length);const o=this.data.strings.commonLearnMore,r=i.Coupons[0].successRate>=75??!1;for(let e=0;e<n;e++)r&&i.Coupons[e].successRate>=75?this.createCouponCodeButtons(i,o,e,t):r||this.createCouponCodeButtons(i,o,e,t);const a=document.createElement("fluent-button");i.Coupons.length>1?a.textContent=Me.GetICUPluralString(this.data.strings.bannerViewAllCouponsStr,M.Other,i.Coupons.length):a.textContent=Me.GetICUPluralString(this.data.strings.bannerViewAllCouponsStr,M.One),a.addEventListener("click",(()=>{this.pagehandlerModule.StartShopping(Y.Banner,"viewAll")})),t.appendChild(a)}}createCouponCodeButtons(t,e,i,n){const o=this.createBannerButtonWrapper(t.Coupons[i].couponCode+" "+this.data.strings.couponCopyLabel),r=pi("BUTTON");r.className=this.classBtnBannerPrimary;const a=pi("SPAN");if(a.className=this.classSpanCouponCode,a.textContent=t.Coupons[i].couponCode,a.style.display="none",e.length>t.Coupons[i].couponCode.length){r.textContent=e,o.appendChild(r);const n=this.createHoverDiv(t.Coupons[i].couponCode,!1);n&&o.appendChild(n)}else{r.textContent=t.Coupons[i].couponCode,o.appendChild(r);const n=this.createHoverDiv(e,!0);n&&o.appendChild(n)}o.appendChild(a),n.appendChild(o),this.manageBannerEvents(o,tt.COUPON)}renderPriceComparison(t,e){const i=this.data.dataStoreModule.PriceComparisonData;if(i&&i.CompetingPrices&&i.CompetingPrices.length>0){let n,o=i.CompetingPrices[0].IntendedPrice,r=i.CompetingPrices[0].SellerName,a=i.CompetingPrices[0];if(-1!==i.Price&&i.CompetingPrices.forEach((t=>{const e=t.IntendedPrice;e&&o&&e<o&&(o=e,r=t.SellerName,a=t)})),o&&(n=i.Price-o),n>1){if(this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ContentImageFile){const e=pi("DIV");e.style.width=this.pcBannerUXConfig.ContentImageSize.toString()+"px",e.style.height=this.pcBannerUXConfig.ContentImageSize.toString()+"px",e.setAttribute("aria-hidden","true"),e.style.background=`url( "${this.data.common.resourcesEndpoint}banner/${this.pcBannerUXConfig.ContentImageFile}") no-repeat`,t.appendChild(e)}const i=(this.pcBannerUXConfig.ExperimentActive?this.data.strings.bannerFoundBestPriceAlt:this.data.strings.bannerFoundBestPrice).split("|");if(e.style.fontWeight="400",e.style.color="#000000",this.createBannerTitle(e,i,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e),this.pcBannerUXConfig.ExperimentActive){const i=pi("DIV",{style:"top: 0px; position: fixed; opacity: 0; pointer-events: none;"});i.setAttribute("aria-live","assertive"),t.appendChild(i),i.innerText=this.data.strings.pcNotificationNarratorIntro+this.data.strings.commonFixedTitle+". "+this.data.strings.bannerFoundBestPriceAlt+" "+Me.ReplaceValueInKey("pcNotificationTitle",this.data.strings.pcNotificationTitle,`${a.CurrencySymbol}${n.toFixed(2)}`);const o=pi("DIV",{style:"display:flex; grid-gap:5px;font-weight: 600;"}),r=pi("DIV",{style:this.pcBannerUXConfig.UseSavingsTextGradient?"background: linear-gradient(to right, #D0006A, #FF6B00);\n                        color: transparent;\n                        -webkit-background-clip: text;":"color: white;\n                        font-weight: 600;"});r.innerText=this.data.strings.commonYouCanSave,r.className="bannerMainTitleAlt",o.appendChild(r);const s=`${a.CurrencySymbol}${n.toFixed(2)}`;if(this.pcBannerUXConfig.UseSavingsTextGradient)r.innerText+=" "+s;else{const t=pi("DIV",{style:"font-weight: bold; color: orange;"});t.textContent=s+"!",t.className="bannerMainTitleAlt",t.style.fontWeight="bold",o.appendChild(t)}this.pcBannerUXConfig.ShowTitleInWhite&&(e.style.color="white"),t.appendChild(o)}else{const e=this.data.strings.bannerVisitItem,i=Me.ReplaceValueInKey("bannerVisitItem",this.data.strings.bannerSave,`${a.CurrencySymbol}${n.toFixed(2)}`,r),o=this.createBannerButtonWrapper(i+" "+e),s=pi("BUTTON");if(s.className=this.classBtnBannerPrimary,e.length>i.length){s.textContent=e;const t=this.createHoverDiv(i,!1);o.appendChild(s),o.appendChild(t)}else{s.textContent=i;const t=this.createHoverDiv(e,!0);o.appendChild(s),o.appendChild(t)}t.appendChild(o),this.manageBannerEvents(o,tt.PRICECOMPARISON,a)}}else{const i=this.data.strings.bannerYouHaveBestPrice.split("|");this.createBannerTitle(e,i,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e)}this.renderPCBannerViewAllButton(t,n>0)}}renderPCBannerViewAllButton(t,e){let i;this.pcBannerUXConfig.ExperimentActive?(i=document.createElement("BUTTON"),i.setAttribute("aria-label","Find better prices"),i.classList.add(this.classBtnViewMorePrices),this.pcBannerUXConfig.RenderViewAllButton(i,this.data.common.resourcesEndpoint)):(i=document.createElement("fluent-button"),i.classList.add(this.classBtnViewMorePrices),i.textContent=e?this.data.strings.bannerViewAll:this.data.strings.pcPriceSectionTitle),t.appendChild(i)}renderCashBack(t,e){const i=this.data.dataStoreModule.CashBackData,n=this.utilities.retrieveCashBackAmount().cashBackAmount;if(n){if(i?.isCashBackActivated){let i=this.data.strings.bannerCashBackOnTitle;i=Me.ReplaceValueInKey("bannerCashBackOnTitle",i,n);const o=i.split("|");this.createBannerTitle(e,o,"B"),t.appendChild(e)}else{let i=this.data.strings.bannerCashBackOffTitle;i=Me.ReplaceValueInKey("bannerCashBackOffTitle",i,n);let o=i.split("|");this.createBannerTitle(e,o,"B"),t.appendChild(e);const r=pi("fluent-button");this.styleDefaultState(r),r.textContent=this.data.strings.cbActivateButtonRefresh,r.addEventListener("click",(async t=>{await this.cashBackModule.handleActivateCashbackClick(r,t,"Cash back activated from banner")?(this.cashBackModule.cashbackStyles.styleActivatedState(r),i=this.data.strings.bannerCashBackOnTitle,i=Me.ReplaceValueInKey("bannerCashBackOnTitle",i,n),o=i.split("|"),this.createBannerTitle(e,o,"B")):this.styleDefaultState(r)})),t.appendChild(r)}const o=document.createElement("fluent-button");o.textContent=this.data.strings.bannerSeeDetails,o.addEventListener("click",(()=>{const t=new ci(g.RebatesLearnMore,an.CASHBACK_RETAILER);this.pagehandlerModule.RecordAsUserAction(di.REBATES_LEARN_MORE),this.logModule.LogInfoEvent(p.ButtonClick,"User navigated to rebates see details from banner",t,de.CouponImpressionId),this.pagehandlerModule.NavigateToLearnMore(cn.NEW_FOREGROUND_TAB)})),t.appendChild(o)}}renderPriceHistory(t,e){const i=this.data.dataStoreModule.PriceHistoryData;if(i&&i.CurrentPrice&&i.DailyPrices&&i.DailyPrices.length>1){const n=i.getPriceHistoryType(),o=this.priceHistoryModule.createPriceHistoryTypeIllustration(n,!0);t.appendChild(o);const r=i.ProductDetails&&i.ProductDetails.currency&&""!==i.ProductDetails.currency?i.ProductDetails.currency:"$",a=this.priceHistoryModule.getPriceDifference(i,n);let s;switch(n){case Nn.PRICEDROP:a&&(s=this.data.strings.bannerPriceDropTitle,s=Me.ReplaceValueInKey("bannerPriceDropTitle",s,`${r}${a.toFixed(2)}`));break;case Nn.PRICEINCREASE:a&&(s=this.data.strings.bannerPriceIncreaseTitle,s=Me.ReplaceValueInKey("bannerPriceIncreaseTitle",s,`${r}${a.toFixed(2)}`));break;case Nn.FAIRPRICE:default:s=this.data.strings.bannerPriceStableTitle}const l=s.split("|");this.createBannerTitle(e,l,"B"),t.appendChild(e);const c=document.createElement("fluent-button");c.textContent=this.data.strings.bannerShowPriceHistory,c.addEventListener("click",(()=>{this.pagehandlerModule.StartShopping(Y.Auto,"viewPriceHistory")})),t.appendChild(c)}}styleDefaultState(t){t.style.minWidth="175px",t.appearance="accent",t.style.fontSize="14px",t.style.borderRadius="2px",t.style.marginTop="0px",t.style.height="32px",t.className+=` ${this.classActionsButton}`,t.style.width="auto"}removeFocusBanner(t){const e=t.querySelector(`.${this.classCopiedIndicator}`),i=t.querySelector("BUTTON");e&&i&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}createBannerButtonWrapper(t){const e=pi("DIV");return e.style.position="relative",e.className=this.classDivActionButtonWrapper,e.setAttribute("role","button"),e.setAttribute("aria-label",t),e}manageBannerEvents(t,e,i){t.addEventListener("mouseover",(()=>{this.addFocusBanner(t)})),t.addEventListener("mouseout",(()=>{this.removeFocusBanner(t)})),t.addEventListener("focusin",(()=>{this.addFocusBanner(t)})),t.addEventListener("focusout",(()=>{this.removeFocusBanner(t)})),t.addEventListener("click",(()=>{if(e===tt.COUPON){const e=t.querySelector(".spanCouponCode")?.textContent;e&&this.pagehandlerModule.StartShopping(Y.Auto,e)}else e===tt.PRICECOMPARISON&&i&&this.priceComparisonModule.navigateToRetailer(i,f.BannerPriceComparisonModule,cn.NEW_FOREGROUND_TAB)})),e===tt.PRICECOMPARISON&&i&&t.addEventListener("mousedown",(t=>{if(1===t.button)this.priceComparisonModule.navigateToRetailer(i,f.BannerPriceComparisonModule,cn.NEW_FOREGROUND_TAB)}))}addFocusBanner(t){if(t.querySelector("BUTTON")){const e=t.querySelector(`.${this.classCopiedIndicator}`);e&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}}createHoverDiv(t,e){const i=pi("DIV");i.className=`${this.classBtnBannerPrimary} ${this.classCopiedIndicator}`;const n=pi("SPAN");return n.textContent=t,i.style.visibility=e?"hidden":"visible",i.appendChild(n),i}};const dM=(t,e)=>{const i=pi("DIV",{style:"\n            background: rgba(0, 0, 0, 0.7);\n            background-blend-mode: luminosity;\n            backdrop-filter: blur(2px);\n            border-radius: 6px;\n            width: fit-content;\n            padding: 0px 6px;\n            display: flex;\n            gap: 4px;\n            justify-content: center;\n            align-items: center;\n            height: 18px;\n            box-sizing: border-box;\n            text-transform: uppercase;\n        "}),n=pi("p",{style:"\n                font-weight: 400;\n                font-size: 12px;\n                line-height: 12px;\n                margin: 0;\n                color: #ffffff;\n                margin-bottom: 2px;\n            "},e),o=CM(t.common.resourcesEndpoint+"common/whiteCoupon.svg",12,12);return i.appendChild(o),i.appendChild(n),i},uM=(t,e,i,n,o,r,a,s,l,c,d,u)=>{const h=pi("DIV",{style:"\n            display: flex;\n            position: relative;\n            width: fit-content;\n            gap: 6px;\n        "});h.className="gcPriceContainer";const p=pi("p",{style:`\n                font-weight: 600;\n                font-size: ${c||"32px"};\n                line-height: ${d||"22px"};\n                color: ${a?"#008A21":r?"#DE3700":"unset"};\n                margin: 0;\n            `},i.toDisplay);if(p.className="gcAfterDiscountPrice",h.appendChild(p),s){const n=pM(t,"","",void 0,l);n.style.marginLeft="2px";const r=pi("DIV",{style:"\n                display: flex;\n                gap: 3px;\n            "});n.contentElement=s.outerHTML,n.caratTopOffset="70px",n.width="160px",e.amount!==i.amount&&r.appendChild(hM(o,e.amount,c,d,u)),r.appendChild(n),h.appendChild(r)}else e.amount!==i.amount&&h.appendChild(hM(o,e.amount,c,d,u));return h},hM=(t,e,i,n,o)=>{const r=pi("p",{style:`\n                    font-weight: ${o??400};\n                    font-size: ${i||"18px"};\n                    line-height: ${n||"22px"};\n                    display: flex;\n                    align-items: center;\n                    text-decoration-line: line-through;\n                    color: ${t?"#ffffff":"#7A7A7A"};\n                    margin: 0;\n                `},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e));return r.className="gcCrossedPrice",r},pM=(t,e,i,n,o,r=!1)=>{const a=pi("IMG"),s=r?"infoIconGrey.svg":"infoIcon.svg";a.src=t.common.resourcesEndpoint+"/common/"+s,a.style.width="10px",a.slot="hover-anchor",a.setAttribute("aria-label","Info icon");const l=pi("msft-shopping-tooltip");return l.className="gcTooltip",e&&(l.content=e),n&&i&&(l.linkText=i,l.linkHandler=n),l.addEventListener("click",(t=>{t.stopPropagation()})),o&&l.addEventListener("hover",(()=>{o()})),l.append(a),l},gM=(t,e,i,n=!1)=>{const o=n?t.strings.gcWithAfterCashback:t.strings.gcEarnAfterCashback;if(e){const t=o.split("<value>");return pi("p",{style:`\n                display: flex;\n                margin: 0;\n                font-weight: 600;\n                font-size: 14px;\n                line-height: 22px;\n                color: ${i?"#ffffff":"#7A7A7A"};\n                `},`${t[0]} ${e} ${t[1]}`)}return pi("p",{style:`\n                    display: flex;\n                    align-items: center;\n                    letter-spacing: -0.01em;\n                    color: ${i?"#ffffff":"#7A7A7A"};\n                    text-shadow: 0px 0px 1px rgba(0, 0, 0, 0.17);\n                    margin: 0;\n                `},o.replace(/<value>/g,""))},fM=(t,e,i,n,o)=>{const r=pi("DIV",{style:"\n            display: flex;\n            position: relative;\n            width: fit-content;\n        "}),a=document.createElement("DIV");a.innerHTML=AM(),a.style.marginLeft="-3px",a.style.height=`${n??20}px`,a.ariaHidden="true";const s=a.firstElementChild;if(s&&(s.style.height=`${n??20}px`),t){const n=mM(t,"#0078D4",i,e);n.title=t,r.appendChild(n)}return r.appendChild(a),r},mM=(t,e,i,n)=>{const o=`\n        font-weight: 600;\n        font-size: 24px;\n        line-height: 24px;\n        color: #FFFFFF;\n        inset: 0px;\n        display: flex;\n        justify-content: center;\n        height: fit-content;\n        margin: auto;\n        border-radius: 6px;\n        white-space: nowrap;\n        padding: 0px 5px;\n        border-radius: 6px 0px 0px 6px;\n        background-color: ${e};\n    `,r=pi("div",{style:`\n            display: flex;\n            height: 100%;\n            border-radius: 6px 0px 0px 6px;\n            background-color: ${e};\n        `});if(!i){const e=pi("p",{style:`\n                    ${o}\n                    ${n}\n                `},t);return r.appendChild(e),r}const a=t.replace(/[\d\., ]/g,"");const s=t.replace(a,"").split("."),l=pi("p",{style:`\n                ${o}\n                ${n}\n            `});l.setAttribute("aria-label",t);const c={style:"\n            font-weight: 600;\n            font-size: 14px;\n            line-height: 16px;\n        "};if(a){const t=pi("span",c,a);l.appendChild(t)}const d=pi("span",{style:"\n                font-weight: 600;\n                font-size: 22px;\n                line-height: 22px;\n            "},s[0]);if(l.appendChild(d),s.length>1){const t=pi("span",c,s[1]);l.appendChild(t)}return r.appendChild(l),r},CM=(t,e,i)=>{const n=document.createElement("IMG");return n.src=t,i>0&&(n.width=i),e>0&&(n.height=e),n.style.objectFit="contain",n.addEventListener("contextmenu",(t=>{t.preventDefault()})),n},yM=(t,e)=>{const i=pi("fluent-button");i.ariaLabel=t.strings.commonClose,i.title=t.strings.commonClose;const n=pi("DIV");return n.style.display="flex",n.style.alignContent="center",n.setAttribute("aria-hidden","true"),n.innerHTML=OM(),i.appearance="stealth",i.appendChild(n),e&&(n.style.width=e,n.style.height=e,n.style.alignItems="center"),i},vM=(t,e,i)=>{const n=pi("fluent-button");n.ariaLabel=e,n.title=e,n.appearance="stealth";const o=pi("IMG");return o.style.display="flex",o.style.alignContent="center",o.setAttribute("aria-hidden","true"),o.src=t.common.resourcesEndpoint+"/common/infoIcon.svg",n.appendChild(o),i&&(o.style.width=i,o.style.height=i),n},SM=()=>Mt.getTrustedHTML`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM5.80943 5.11372C5.61456 4.97872 5.34514 4.99801 5.17157 5.17157L5.11372 5.24082C4.97872 5.43569 4.99801 5.70511 5.17157 5.87868L7.29289 8L5.17157 10.1213L5.11372 10.1906C4.97872 10.3854 4.99801 10.6549 5.17157 10.8284L5.24082 10.8863C5.43569 11.0213 5.70511 11.002 5.87868 10.8284L8 8.70711L10.1213 10.8284L10.1906 10.8863C10.3854 11.0213 10.6549 11.002 10.8284 10.8284L10.8863 10.7592C11.0213 10.5643 11.002 10.2949 10.8284 10.1213L8.70711 8L10.8284 5.87868L10.8863 5.80943C11.0213 5.61456 11.002 5.34514 10.8284 5.17157L10.7592 5.11372C10.5643 4.97872 10.2949 4.99801 10.1213 5.17157L8 7.29289L5.87868 5.17157L5.80943 5.11372Z" fill="#767676"/>
    </svg>`,bM=()=>Mt.getTrustedHTML`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M5.5 0C8.53757 0 11 2.46243 11 5.5C11 6.83879 10.5217 8.06586 9.72656 9.01962L13.8536 13.1464C14.0488 13.3417 14.0488 13.6583 13.8536 13.8536C13.68 14.0271 13.4106 14.0464 13.2157 13.9114L13.1464 13.8536L9.01962 9.72656C8.06586 10.5217 6.83879 11 5.5 11C2.46243 11 0 8.53757 0 5.5C0 2.46243 2.46243 0 5.5 0ZM5.5 1C3.01472 1 1 3.01472 1 5.5C1 7.98528 3.01472 10 5.5 10C7.98528 10 10 7.98528 10 5.5C10 3.01472 7.98528 1 5.5 1Z" fill="#1A1A1A"/>
    </svg>`,TM=()=>Mt.getTrustedHTML`<svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.7999 3.59998C2.7999 1.94312 4.14305 0.599976 5.7999 0.599976H16.5999C18.2568 0.599976 19.5999 1.94312 19.5999 3.59998V12C19.5999 13.6568 18.2568 15 16.5999 15H5.7999C4.14305 15 2.7999 13.6568 2.7999 12V3.59998ZM10.8957 8.91714L3.9999 5.35318V12C3.9999 12.9941 4.80579 13.8 5.7999 13.8H16.5999C17.594 13.8 18.3999 12.9941 18.3999 12V5.35558L11.5041 8.91714L11.4069 8.96316C11.24 9.02452 11.0522 9.00918 10.8957 8.91714ZM16.5999 1.79998H5.7999C4.80579 1.79998 3.9999 2.60586 3.9999 3.59998V3.96118L11.1999 7.70387L18.3999 3.96238V3.59998C18.3999 2.60586 17.594 1.79998 16.5999 1.79998ZM14.1999 17.4C15.1814 17.4 16.0528 16.9286 16.6001 16.2H5.7999C3.48031 16.2 1.5999 14.3196 1.5999 12V3.59997C0.871234 4.1473 0.399902 5.01848 0.399902 5.99997V12C0.399902 14.9823 2.81757 17.4 5.7999 17.4H14.1999Z" fill="#1A1A1A"/>
    </svg>`,AM=()=>Mt.getTrustedHTML`<svg width="14" height="30" viewBox="0 0 14 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path class="tagRightPath" d="M4.96265 28.0486C4.01617 29.279 2.55188 30 0.999532 30H0V0H0.999532C2.55188 0 4.01617 0.72102 4.96265 1.95145L12.655 11.9514C14.0375 13.7487 14.0375 16.2513 12.655 18.0486L4.96265 28.0486Z" />
    </svg>`,OM=()=>Mt.getTrustedHTML`<svg id="closeButtonSvg" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
    <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z"/>
    </svg>`,xM=(t,e,i)=>{const n=pi("fluent-button");n.ariaLabel=t,n.title=t;const o=pi("DIV");return o.style.display="flex",o.style.alignContent="center",o.style.alignItems="center",o.setAttribute("aria-hidden","true"),o.innerHTML=e(),n.appearance="stealth",n.appendChild(o),i&&(o.style.width=i,o.style.height=i),n},EM=t=>pi("p",{style:"\n                font-weight: 700;\n                font-size: 12px;\n                line-height: 16px;\n                display: flex;\n                align-items: center;\n                letter-spacing: -0.01em;\n                margin: 0;\n                text-transform: uppercase;\n            "},t),PM=(t,e,i,n,o,r,a,s,l)=>{const c=pi(a?"a":"div");if(c.id=t,a&&s&&(c.href="#",c.addEventListener("click",(t=>{t.stopPropagation(),s()})),c.style.textDecoration="none"),l){const t=()=>{l(),c.removeEventListener("mouseover",t)};c.addEventListener("mouseover",t)}const d=pi("div",{style:"\n            padding: 0 16px 12px 16px;\n            display: flex;\n            flex-direction: column;\n            margin: 0 auto;\n        "});d.id=e;const u=pi("div",{style:`${`\n        background-color: ${n?o?"unset":"#424242":"#ffffff"};\n    `} ${r?`\n        border: 1px solid ${n?"unset":"#F2F2F2"};\n        border-radius: 6px;\n        padding: 16px;\n    `:""}`});return u.id=i,d.appendChild(u),c.appendChild(d),{rootDiv:c,wrapper:d,content:u}},IM=(t,e,i,n=!1)=>{const o=pi("div",{style:"\n            display: flex;\n            flex-direction: column;\n        "}),r=pi("div",{style:`\n            border: 1px solid ${i?"#5E5E5E":"#F2F2F2"};\n            border-radius: 6px;\n            padding: 8px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            gap: 7px;\n        `}),a=pi("p",{style:"\n                font-weight: 400;\n                font-size: 14px;\n                line-height: 20px;\n                margin: 0;\n            "},n?t.strings.gcInstantAddedToCartActivated:t.strings.gcPurchaseToEarn),s=pi("div");return s.innerHTML=e.getGreenCheckCircle(),s.style.display="flex",s.setAttribute("role","presentation"),s.setAttribute("aria-hidden","true"),r.appendChild(s),r.appendChild(a),o.appendChild(r),o},DM=(t,e,i=2)=>{const n=pi("p",{style:`\n                margin: 0;\n                color: ${t?"#ffffff":"#1A1A1A"};\n                font-weight: 400;\n                font-size: 12px;\n                line-height: 16px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                display: -webkit-box !important;\n                -webkit-line-clamp: ${i};\n                -webkit-box-orient: vertical;\n                white-space: normal;\n                margin-top: 2px;\n        `},e);return n.title=e,n},_M=(t,e,i)=>{const n=pi("a",{style:`\n            cursor: pointer;\n            color: ${e?"#9EECFD":"#2533D4"};\n            text-decoration: none;\n    `});return n.textContent=t,n.href="#",n.addEventListener("click",i),n};var kM=class{getStyles(){return"\n            .buying-guides__containerPane {\n                padding: 0px 16px;\n            }\n\n            .buying-guides__card {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n                isolation: isolate;\n                color: #242424;\n                margin: 0;\n                padding: 10px 16px 16px 16px;\n            }\n\n            .buying-guides__cardPane {\n                border-radius: 8px;\n                background: #FFFFFF;\n                box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.14), 0px 0px 2px rgba(0, 0, 0, 0.12);\n                margin-bottom: 20px;\n            }\n\n            .buying-guides__guide {\n                display: flex;\n                flex-direction: column;\n                gap: 2px;\n                width: 100%;\n                border-bottom: 1px solid #E0E0E0;\n            }\n\n            .buying-guides__guide:last-child,\n            .buying-guides__guide.no-bottom {\n                border-bottom: none;\n            }\n\n            .buying-guides__guide-title-container {\n                margin-top: 13px;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n            }\n            .buying-guides__dropdown-arrow {\n                border-radius: 4px;\n                margin-right: -10px;\n            }\n\n            .buying-guides__guide[active] .buying-guides__dropdown-arrow {\n                transform: rotate(180deg);\n                background: #E0E0E0;\n            }\n            .buying-guides__dropdown-arrow::part(control) {\n                background-color: transparent;\n            }\n\n            .buying-guides__guide[active] .buying-guides__dropdown-arrow svg>path {\n                fill: #115EA3;\n            }\n\n            .buying-guides__guide-title {\n                font-style: normal;\n                font-weight: 600;\n                font-size: 16px;\n                line-height: 22px;\n            }\n\n            .buying-guides__guide-description-container {\n                margin-top: 5px;\n                margin-bottom: 12px;\n                overflow: hidden;\n                display: -webkit-box;\n                -webkit-box-orient: vertical;\n                -webkit-line-clamp: 1;\n            }\n\n            .buying-guides__guide[active] .buying-guides__guide-description-container {\n                -webkit-line-clamp: unset;\n            }\n\n            .buying-guides__guide-description-container.multi-line {\n                -webkit-line-clamp: 2;\n            }\n\n            .buying-guides__guide-description {\n                font-style: normal;\n                font-weight: 400;\n                font-size: 14px;\n                line-height: 20px;\n\n                margin-inline: 0px;\n\n                color: #111111;\n            }\n\n            .buying-guides__title-main {\n                font-style: normal;\n                font-weight: 600;\n                font-size: 16px;\n                line-height: 22px;\n            }\n\n            .buying-guides__title-pipe {\n                font-style: normal;\n                font-weight: 400;\n                font-size: 14px;\n                line-height: 20px;\n\n                margin-inline: 0px;\n\n                color: #111111;\n            }\n\n            .buying-guides__title-category {\n                font-style: normal;\n                font-weight: 400;\n                font-size: 12px;\n                line-height: 20px;\n\n                margin-top: 3px;\n                margin-inline: 0px;\n\n                color: #111111;\n            }\n\n            .buying-guides__title-container {\n                margin-top: 8px;\n            }\n\n            .buying-guides__title-pipe {\n                margin: 0px 4px 0px 4px;\n            }\n\n            .buying-guides__title-icon svg {\n                fill: #212121;\n            }\n\n            button.buying-guides__show-button {\n                box-sizing: border-box;\n                margin: 4px 6px 4px 0px;\n                padding: 3px 7px;\n                height: 36px;\n                color: #174AE4;\n                backdrop-filter: blur(120px);\n                font-style: normal;\n                font-weight: 600;\n                font-size: 14px;\n                line-height: 22px;\n                font-family:  'Segoe UI Variable', 'Segoe UI';\n                cursor: pointer;\n                background: #FFFFFF;\n                border: 1px solid #DDDDDD;\n                border-radius: 20px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            button.buying-guides__show-button:hover {\n                box-shadow: 0px 1.2px 3.6px rgba(0, 0, 0, 0.1), 0px 6.4px 14.4px rgba(0, 0, 0, 0.13);\n            }\n\n            button.buying-guides__show-button:active {\n                background: #F5F5F5;\n                box-shadow: none;\n            }\n\n            .buying-guides__show-button-icon {\n                margin: 6px 0px 0px 10px;\n            }\n\n            .buying-guides__show-button-icon svg {\n                fill: #212121;\n            }\n\n            .buying-guides__show-more-icon svg {\n                transform: rotate(90deg);\n            }\n\n            .buying-guides__show-less-icon svg {\n                transform: rotate(270deg);\n            }\n\n            .buying-guides__hidden {\n                display: none!important;\n            }\n\n            .buying-guides__card > div:first-child .buying-guides__guide-title-container {\n                margin-top: 0;\n            }\n            .buying-guides__card > div:last-child .buying-guides__guide-description-container {\n                margin-bottom: 0;\n            }\n        "}getDarkModeStyles(){return"\n        .buying-guides__card {\n            color: #FFFFFF\n        }\n        .buying-guides__cardPane {\n            background: #444444;\n            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.14), 0px 0px 2px rgba(0, 0, 0, 0.12);\n        }\n\n        .buying-guides__guide {\n            border-color: #666666;\n        }\n\n        .buying-guides__guide-description,\n        .buying-guides__title-category,\n        .buying-guides__title-pipe {\n            color: currentColor;\n        }\n        .buying-guides__dropdown-arrow svg>path {\n            fill: #D6D6D6;\n        }\n        .buying-guides__dropdown-arrow {\n            background: none;\n        }\n        .buying-guides__guide[active] .buying-guides__dropdown-arrow {\n            background: #2E2E2E;\n        }\n        .buying-guides__guide[active] .buying-guides__dropdown-arrow svg>path {\n            fill: #2886DE;\n        }\n        .buying-guides__title-icon svg {\n            fill: #ffffff;\n        }\n        .buying-guides__title-container {\n            color: currentColor;\n        }\n        .buying-guides__show-button-icon svg {\n            fill: #A2B7F4;\n        }\n        button.buying-guides__show-button {\n            background-color: #343434;\n            color: #A2B7F4;\n            border: 1px solid #A2B7F4;\n        }\n\n        button.buying-guides__show-button:hover {\n            background-color: #2B2B2B;\n            color: #A2B7F4;\n            border: 1px solid #A2B7F4;\n        }\n\n        button.buying-guides__show-button:active {\n            background-color: #2B2B2B;\n            color: #A2B7F4;\n            border: 1px solid #A2B7F4;\n        }\n        "}};var wM=class extends CE{constructor(t,e,n,o){super(),i(this,"utilities",void 0),i(this,"assets",void 0),i(this,"commonAssets",void 0),i(this,"flyoutData",void 0),i(this,"pageHandlerModule",void 0),i(this,"logModule",void 0),i(this,"stateManagement",void 0),i(this,"storageHandler",void 0),i(this,"renderedPageType",void 0),i(this,"telemetryHandler",void 0),i(this,"uxUtils",void 0),i(this,"moduleName",tt.BUYING_GUIDES),i(this,"isDarkMode",!1),i(this,"sectionId","buying-guides-shopping-section"),i(this,"buyingGuides",[]),i(this,"categoryName",void 0),this.flyoutData=t,this.uxUtils=e,this.utilities=e.viewModulesUtilities,this.telemetryHandler=e.discoverTelemetryHandler,this.pageHandlerModule=e.pageHandlerModule,this.logModule=e.logModule,this.storageHandler=e.storageHandler,this.commonAssets=n,this.stateManagement=o,this.isDarkMode=this.utilities.isDarkMode(),this.assets=new kM}GetModuleName(){return this.moduleName}async ShouldRenderModule(){const t=this.GetBuyingGuides();this.buyingGuides=t?.guides??[],this.categoryName=t?.name;if(this.buyingGuides.length>0){if(this.stateManagement.AddDiscoverRenderModule(tt.BUYING_GUIDES),c.isExperimentActive(a.discoverShopping)&&this.flyoutData.common.isDiscoverPane)return Promise.resolve(!0);if(c.isTestFlagActive(l.msShoppingTestExp99))return Promise.resolve(!0)}return Promise.resolve(!1)}populateMainHeader(){const t=this.flyoutData.common.shopping.querySelector("#buying-guides-shopping-section");t&&(t.slot="header-content")}async renderModule(){this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles(),void 0,this.assets.getDarkModeStyles());const t=pi("msft-edge-shopping-section",{id:this.sectionId,titleText:this.flyoutData.strings.bgSectionTitle,accordion:this.flyoutData.common.currentDevice===V.Desktop,expanded:!0});return this.CreateUx(t),this.CreateModule(t,J.BUYING_GUIDES,this.moduleName,ot.CONTEXTUAL,rt.LIST)}PostProcessing(t,e,i){const n=`position ${e}`;0===e&&this.telemetryHandler.LogEventTelemetry(C.BuyingGuidesView,n,this.renderedPageType,t,{buyingGuidesCount:this.buyingGuides?.length||0},an.BUYING_GUIDES)}GetBuyingGuides(){return this.flyoutData.dataStoreModule.DiscoverShoppingData?.BuyingGuideData}CreateUx(t){const e=pi("div",{className:this.withClassNamePrefix("container")}),i=pi("dl",{className:this.withClassNamePrefix("card"),title:this.flyoutData.strings.bgSectionTitle});this.flyoutData.common.isDiscoverPane||(i.classList.add(this.withClassNamePrefix("cardPane")),e.classList.add(this.withClassNamePrefix("containerPane"))),i.appendChild(this.createBuyingGuideTitle());for(const[t,{title:n,description:o}]of this.buyingGuides.entries()){const r=this.createBuyingGuideCard(n,o,e,t,t===this.buyingGuides.length-1);i.appendChild(r)}this.buyingGuides.length>3&&(i.appendChild(this.createBuyingGuideShowMoreButton(i)),i.appendChild(this.createBuyingGuideShowLessButton(i))),e.appendChild(i);const n=()=>{const t={buyingGuideData:this.buyingGuides,buyingGuidesCount:this.buyingGuides?.length||0};this.telemetryHandler.LogEventTelemetry(C.BuyingGuidesHover,"Buying Guides Hover",this.renderedPageType,this.moduleName,t,void 0,Xe.BUYING_GUIDES),e.removeEventListener("mouseover",n)};e.addEventListener("mouseover",n),t.appendChild(e)}createBuyingGuideShowMoreButton(t){const e=pi("button",{className:`${this.withClassNamePrefix("show-button")} ${this.withClassNamePrefix("show-more-button")}`});e.title=this.flyoutData.strings.bgShowMore,e.setAttribute("aria-label",`${this.flyoutData.strings.bgShowMore} ${this.flyoutData.strings.bgSectionTitle}`);const i=pi("span",{className:this.withClassNamePrefix("show-button")},this.flyoutData.strings.bgShowMore),n=pi("span",{className:`${this.withClassNamePrefix("show-button-icon")} ${this.withClassNamePrefix("show-more-icon")}`});return n.innerHTML=this.commonAssets.getRightChevronIcon(),e.appendChild(i),e.appendChild(n),e.addEventListener("click",(()=>{this.show(t,".buying-guides__show-less-button"),this.show(t,".buying-guides__guide-overflow"),e.classList.add(this.withClassNamePrefix("hidden")),t.querySelector(".buying-guides__guide-pre-overflow")?.classList.remove("no-bottom"),t.querySelector(".buying-guides__show-less-button")?.focus(),this.telemetryHandler.LogClickTelemetry(C.BuyingGuidesClick,"Buying guide Show More button click",this.renderedPageType,this.moduleName,{buyingGuidesCount:this.buyingGuides?.length||0},Xe.BUYING_GUIDES)})),e}createBuyingGuideShowLessButton(t){const e=pi("button",{className:`${this.withClassNamePrefix("show-button")} ${this.withClassNamePrefix("show-less-button")} ${this.withClassNamePrefix("hidden")}`});e.title=this.flyoutData.strings.bgShowLess,e.setAttribute("aria-label",`${this.flyoutData.strings.bgShowLess} ${this.flyoutData.strings.bgSectionTitle}`);const i=pi("span",{className:this.withClassNamePrefix("show-button")},this.flyoutData.strings.bgShowLess),n=pi("span",{className:`${this.withClassNamePrefix("show-button-icon")} ${this.withClassNamePrefix("show-less-icon")}`});return n.innerHTML=this.commonAssets.getRightChevronIcon(),e.appendChild(i),e.appendChild(n),e.addEventListener("click",(()=>{this.show(t,".buying-guides__show-more-button"),this.hide(t,".buying-guides__guide-overflow"),e.classList.add(this.withClassNamePrefix("hidden")),t.querySelector(".buying-guides__guide-pre-overflow")?.classList.add("no-bottom"),t.querySelector(".buying-guides__show-more-button")?.focus(),this.telemetryHandler.LogClickTelemetry(C.BuyingGuidesClick,"Buying guide Show Less button click",this.renderedPageType,this.moduleName,{buyingGuidesCount:this.buyingGuides?.length||0},Xe.BUYING_GUIDES)})),e}show(t,e){const i=t.querySelectorAll(e);i?.forEach((t=>t.classList.remove(this.withClassNamePrefix("hidden"))))}hide(t,e){const i=t.querySelectorAll(e);i?.forEach((t=>t.classList.add(this.withClassNamePrefix("hidden"))))}createBuyingGuideTitle(){const t=pi("div",{className:this.withClassNamePrefix("title-container")}),e=pi("div",{className:this.withClassNamePrefix("title-main")},this.flyoutData.strings.bgCardTitle);return t.appendChild(e),this.categoryName&&t.appendChild(pi("div",{className:this.withClassNamePrefix("title-category")},this.categoryName)),t}createBuyingGuideCard(t,e,i,n,o){let r;r=2===n?`${this.withClassNamePrefix("guide")} ${this.withClassNamePrefix("guide-pre-overflow")} no-bottom`:n<2?this.withClassNamePrefix("guide"):o?`${this.withClassNamePrefix("guide")} ${this.withClassNamePrefix("guide-overflow")} ${this.withClassNamePrefix("hidden")} no-bottom`:`${this.withClassNamePrefix("guide")} ${this.withClassNamePrefix("guide-overflow")} ${this.withClassNamePrefix("hidden")}`;const s=pi("div",{className:r}),l=pi("div",{className:this.withClassNamePrefix("guide-title-container")});s.title=t,s.setAttribute("aria-label",t),s.tabIndex=0;const d=pi("dt",{className:this.withClassNamePrefix("guide-title")},t);d.role="heading",l.appendChild(d);const u=xM(this.flyoutData.strings.bgChevronTitle,this.commonAssets.getChevronIcon);u.className=this.withClassNamePrefix("dropdown-arrow"),u.role="button",u.setAttribute("aria-pressed","false"),u.setAttribute("aria-expanded","false"),u.setAttribute("aria-label",t),l.appendChild(u),s.addEventListener("click",(()=>{const t=Array.from(i.getElementsByClassName(this.withClassNamePrefix("guide"))),e=!s.hasAttribute("active");t.forEach((t=>{t.removeAttribute("active")})),e&&s.toggleAttribute("active"),u.setAttribute("aria-pressed",e?"true":"false"),u.setAttribute("aria-expanded",e?"true":"false"),this.telemetryHandler.LogClickTelemetry(C.BuyingGuidesClick,"Toggle buying guide section click",this.renderedPageType,this.moduleName,{buyingGuidesCount:this.buyingGuides?.length||0,isExpand:e},Xe.BUYING_GUIDES)})),s.addEventListener("focus",(t=>{const e=t?.target?.querySelector(`.${this.withClassNamePrefix("dropdown-arrow")}`);e?.shadowRoot?.querySelector("button")?.setAttribute("aria-hidden","true")}));const h=pi("div",{className:this.withClassNamePrefix("guide-description-container")});c.isExperimentActive(a.buyingGuideMultiLine)&&h.classList.add("multi-line");const p=pi("dd",{className:this.withClassNamePrefix("guide-description")},e);return h.appendChild(p),s.appendChild(l),s.appendChild(h),s}withClassNamePrefix(t){return`buying-guides__${t}`}};var NM=class{getStyles(){return"\n        .campaign-logo-text, .campaign-pdp-cashback-title, .campaign-merchant-banner-title {\n            background: linear-gradient(89.58deg, #050F8D -0.77%, #0077D4 100%);\n            -webkit-text-fill-color: transparent;\n            -webkit-background-clip: text;\n        }\n\n        .campaign-merchant-banner {\n            background: linear-gradient(271.34deg, rgba(214, 222, 255, 0.8) -0.15%, rgba(224, 234, 255, 0.8) 99.85%);\n        }\n\n        .campaign-merchant-banner-timer {\n            color: #000;\n        }\n\n        .campaign-merchant-banner-title {\n            border-right-color: rgba(0, 0, 0, 0.2);\n        }\n\n        .campaign-merchant-banner-link-text {\n            color: #235CCF;\n            text-decoration: none;\n        }\n\n        .campaign-merchant-banner:hover .campaign-merchant-banner-link-text {\n            color: #235CCF;\n            text-decoration: underline;\n            text-decoration-color: #235CCF;\n        }\n\n        .campaign-banner {\n            background: linear-gradient(118deg, rgba(224, 234, 255, 0.8) 0%, rgba(214, 222, 255, 0.8) 100%);\n        }\n\n        .campaign-shop-now-button {\n            background: #2169EB;\n            color: #FFF;\n        }\n\n        .campaign-shop-now-button:hover {\n            background: #145cdd;\n            cursor: pointer;\n        }\n\n        .campaign-feed-module {\n            background: linear-gradient(180deg, rgba(214, 222, 255, 0.8) 0%, rgba(239, 250, 255, 0) 27.6%);\n            margin-bottom: -10px;\n        }\n\n        .campaign-timer {\n            border-color: #FFF;\n            background-color: #FFF;\n        }\n\n        .campaign-timer-icon {\n            background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTEnIHZpZXdCb3g9JzAgMCAxMCAxMScgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cGF0aCBkPSdNMiAwLjVDMiAwLjIyMzg1OCAyLjIyMzg2IDAgMi41IDBINi41QzYuNzc2MTQgMCA3IDAuMjIzODU4IDcgMC41QzcgMC43NzYxNDIgNi43NzYxNCAxIDYuNSAxSDIuNUMyLjIyMzg2IDEgMiAwLjc3NjE0MiAyIDAuNVpNNCA3LjVDNCA3Ljc3NjE0IDQuMjIzODYgOCA0LjUgOEM0Ljc3NjE0IDggNSA3Ljc3NjE0IDUgNy41VjQuNUM1IDQuMjIzODYgNC43NzYxNCA0IDQuNSA0QzQuMjIzODYgNCA0IDQuMjIzODYgNCA0LjVWNy41Wk00LjUgMkMyLjAxNDcyIDIgMCA0LjAxNDcyIDAgNi41QzAgOC45ODUyOCAyLjAxNDcyIDExIDQuNSAxMUM2Ljk4NTI4IDExIDkgOC45ODUyOCA5IDYuNUM5IDQuMDE0NzIgNi45ODUyOCAyIDQuNSAyWk0xIDYuNUMxIDQuNTY3IDIuNTY3IDMgNC41IDNDNi40MzMgMyA4IDQuNTY3IDggNi41QzggOC40MzMgNi40MzMgMTAgNC41IDEwQzIuNTY3IDEwIDEgOC40MzMgMSA2LjVaTTkuMTQ4MDEgMy44NTMyMkM5LjM0MzU5IDQuMDQ4MTYgOS42NjAxNyA0LjA0NzY0IDkuODU1MTEgMy44NTIwNUMxMC4wNTAxIDMuNjU2NDcgMTAuMDQ5NSAzLjMzOTg5IDkuODUzOTUgMy4xNDQ5NUw4Ljg1MjI5IDIuMTQ2NkM4LjY1NjcxIDEuOTUxNjYgOC4zNDAxMyAxLjk1MjE4IDguMTQ1MTkgMi4xNDc3N0M3Ljk1MDI1IDIuMzQzMzUgNy45NTA3NyAyLjY1OTkzIDguMTQ2MzYgMi44NTQ4N0w5LjE0ODAxIDMuODUzMjJaJyBmaWxsPScjNjE2MTYxJy8+PC9zdmc+Cg==\");\n        }\n\n        .campaign-timer-text {\n            color: #424242;\n        }\n\n        .campaign-pdp-cashback-new-price {\n            color: #D63600;\n        }\n\n        .campaign-pdp-cashback-old-price {\n            color: #616161;\n        }\n\n        .campaign-pdp-cashback-discount-info {\n            color: #707070;\n        }\n\n        .campaign-special-offer-icon {\n            background-image: url(\"data:image/svg+xml,%3Csvg width='10' height='11' viewBox='0 0 10 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 5.5C0 2.73858 2.23858 0.5 5 0.5C7.76142 0.5 10 2.73858 10 5.5C10 8.26142 7.76142 10.5 5 10.5C2.23858 10.5 0 8.26142 0 5.5ZM5 3C4.76988 3 4.58333 3.18655 4.58333 3.41667V5.08333H2.91667C2.68655 5.08333 2.5 5.26988 2.5 5.5C2.5 5.73012 2.68655 5.91667 2.91667 5.91667H4.58333V7.58333C4.58333 7.81345 4.76988 8 5 8C5.23012 8 5.41667 7.81345 5.41667 7.58333V5.91667H7.08333C7.31345 5.91667 7.5 5.73012 7.5 5.5C7.5 5.26988 7.31345 5.08333 7.08333 5.08333H5.41667V3.41667C5.41667 3.18655 5.23012 3 5 3Z' fill='%23008A21'/%3E%3C/svg%3E%0A\");\n        }\n\n        .campaign-special-offer-condition {\n            color: #707070;\n        }\n\n        .campaign-banner-spacing {\n            background: #f3f3f3;\n        }\n        "}getDarkModeStyles(){return'\n        .campaign-logo-text, .campaign-pdp-cashback-title, .campaign-merchant-banner-title {\n            background: unset;\n            -webkit-text-fill-color: unset;\n            -webkit-background-clip: unset;\n            color: #FFF;\n        }\n\n        .campaign-merchant-banner {\n            background: linear-gradient(91.34deg, #264B50 0%, #292448 100%);\n        }\n\n        .campaign-merchant-banner-title {\n            border-right-color: #707070;\n        }\n\n        .campaign-merchant-banner-timer {\n            color: #FFF;\n        }\n\n        .campaign-merchant-banner-link-text {\n            color: #66CDFC;\n        }\n\n        .campaign-merchant-banner:hover .campaign-merchant-banner-link-text {\n            color: #66CDFC;\n            text-decoration-color: #66CDFC;\n        }\n\n        .campaign-banner {\n            background: linear-gradient(118deg, #264B50 0%, #292448 100%);\n        }\n\n        .campaign-shop-now-button {\n            background: #82DDFD;\n            color: rgba(0, 0, 0, 0.898039);\n        }\n\n        .campaign-shop-now-button:hover {\n            background: #5cd3fc;\n        }\n\n        .campaign-feed-module {\n            background: unset;\n        }\n\n        .campaign-timer {\n            border-color: #FFF;\n            background-color: unset;\n        }\n\n        .campaign-timer-icon {\n            background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTEnIHZpZXdCb3g9JzAgMCAxMCAxMScgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cGF0aCBkPSdNMiAwLjVDMiAwLjIyMzg1OCAyLjIyMzg2IDAgMi41IDBINi41QzYuNzc2MTQgMCA3IDAuMjIzODU4IDcgMC41QzcgMC43NzYxNDIgNi43NzYxNCAxIDYuNSAxSDIuNUMyLjIyMzg2IDEgMiAwLjc3NjE0MiAyIDAuNVpNNCA3LjVDNCA3Ljc3NjE0IDQuMjIzODYgOCA0LjUgOEM0Ljc3NjE0IDggNSA3Ljc3NjE0IDUgNy41VjQuNUM1IDQuMjIzODYgNC43NzYxNCA0IDQuNSA0QzQuMjIzODYgNCA0IDQuMjIzODYgNCA0LjVWNy41Wk00LjUgMkMyLjAxNDcyIDIgMCA0LjAxNDcyIDAgNi41QzAgOC45ODUyOCAyLjAxNDcyIDExIDQuNSAxMUM2Ljk4NTI4IDExIDkgOC45ODUyOCA5IDYuNUM5IDQuMDE0NzIgNi45ODUyOCAyIDQuNSAyWk0xIDYuNUMxIDQuNTY3IDIuNTY3IDMgNC41IDNDNi40MzMgMyA4IDQuNTY3IDggNi41QzggOC40MzMgNi40MzMgMTAgNC41IDEwQzIuNTY3IDEwIDEgOC40MzMgMSA2LjVaTTkuMTQ4MDEgMy44NTMyMkM5LjM0MzU5IDQuMDQ4MTYgOS42NjAxNyA0LjA0NzY0IDkuODU1MTEgMy44NTIwNUMxMC4wNTAxIDMuNjU2NDcgMTAuMDQ5NSAzLjMzOTg5IDkuODUzOTUgMy4xNDQ5NUw4Ljg1MjI5IDIuMTQ2NkM4LjY1NjcxIDEuOTUxNjYgOC4zNDAxMyAxLjk1MjE4IDguMTQ1MTkgMi4xNDc3N0M3Ljk1MDI1IDIuMzQzMzUgNy45NTA3NyAyLjY1OTkzIDguMTQ2MzYgMi44NTQ4N0w5LjE0ODAxIDMuODUzMjJaJyBmaWxsPSd3aGl0ZScvPjwvc3ZnPgo=");\n        }\n\n        .campaign-timer-text {\n            color: #FFF;\n        }\n\n        .campaign-pdp-cashback-new-price {\n            color: #F75823;\n        }\n\n        .campaign-pdp-cashback-discount-info, .campaign-pdp-cashback-old-price {\n            color: #BDBDBD;\n        }\n\n        .campaign-special-offer-icon {\n            background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTEnIHZpZXdCb3g9JzAgMCAxMCAxMScgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cGF0aCBkPSdNMCA1LjVDMCAyLjczODU4IDIuMjM4NTggMC41IDUgMC41QzcuNzYxNDIgMC41IDEwIDIuNzM4NTggMTAgNS41QzEwIDguMjYxNDIgNy43NjE0MiAxMC41IDUgMTAuNUMyLjIzODU4IDEwLjUgMCA4LjI2MTQyIDAgNS41Wk01IDNDNC43Njk4OCAzIDQuNTgzMzMgMy4xODY1NSA0LjU4MzMzIDMuNDE2NjdWNS4wODMzM0gyLjkxNjY3QzIuNjg2NTUgNS4wODMzMyAyLjUgNS4yNjk4OCAyLjUgNS41QzIuNSA1LjczMDEyIDIuNjg2NTUgNS45MTY2NyAyLjkxNjY3IDUuOTE2NjdINC41ODMzM1Y3LjU4MzMzQzQuNTgzMzMgNy44MTM0NSA0Ljc2OTg4IDggNSA4QzUuMjMwMTIgOCA1LjQxNjY3IDcuODEzNDUgNS40MTY2NyA3LjU4MzMzVjUuOTE2NjdINy4wODMzM0M3LjMxMzQ1IDUuOTE2NjcgNy41IDUuNzMwMTIgNy41IDUuNUM3LjUgNS4yNjk4OCA3LjMxMzQ1IDUuMDgzMzMgNy4wODMzMyA1LjA4MzMzSDUuNDE2NjdWMy40MTY2N0M1LjQxNjY3IDMuMTg2NTUgNS4yMzAxMiAzIDUgM1onIGZpbGw9JyMwOUU2QzMnLz48L3N2Zz4K");\n        }\n\n        .campaign-special-offer-condition {\n            color: #BDBDBD;\n        }\n\n        .campaign-banner-spacing {\n            background: #3b3b3b;\n        }\n        '}};const MM="https://www.bing.com/shop/deals?FORM=DLHEDB";function RM(t){const e=new Date(t.getTime()-Date.now()).getTime(),i=Math.floor(e/864e5),n=Math.floor(e/36e5)%24;let o=i>0?`${i}d:`:"";if(n<10&&(o+="0"),o+=`${n}h`,i<1){const t=Math.floor(e/6e4)%60;t<10&&(o+="0"),o+=`:${t}m`}return o}function LM(t,e,i=!1){const n=i?t.dealDayTimePrefixCompact:t.dealDayTimePrefix;return Me.ReplaceValueInKey("campaignRemainingTime",n,RM(e))}function BM(){document.querySelectorAll(".campaign-module")?.forEach((t=>{t.remove()}))}function FM(t,e){const i=document.createElement("DIV");i.style.display="flex",i.style.alignItems="flex-end";const n=function(t){const e=document.createElement("DIV");return e.textContent=t.dealDays,e.className="campaign-logo-text",e.style.backgroundClip="text",e.style.fontStyle="normal",e.style.fontWeight="600",e.style.fontSize="36px",e.style.lineHeight="48px",e}(t),o=function(t,e,i){const n=document.createElement("IMG");return n.setAttribute("aria-hidden","true"),n.src=t+"campaign/cartIcon.png",e&&(n.style.height=`${e}px`),i&&(n.style.width=`${i}px`),n}(e,62,72);return o.style.marginLeft="-2px",i.appendChild(n),i.appendChild(o),i}function UM(t,e){const i=document.createElement("DIV");i.className="campaign-timer",i.style.display="flex",i.style.flexDirection="row",i.style.alignItems="center",i.style.gap="7px",i.style.padding="2px 6px",i.style.borderRadius="4px",i.style.borderWidth="1px",i.style.borderStyle="solid";const n=document.createElement("div");n.className="campaign-timer-icon",n.style.height="11px",n.style.width="10px";const o=document.createElement("DIV");o.className="campaign-timer-text",o.style.fontFamily="'Segoe UI','Roboto', Helvetica, Verdana, sans-serif",o.style.fontWeight="400",o.style.fontSize="12px",o.style.lineHeight="16px",o.textContent=LM(t,e);const r=setInterval((()=>{const i=LM(t,e);i.indexOf("00h:00m")>=0&&(BM(),clearInterval(r)),o&&(o.textContent=i)}),1e4);return i.appendChild(n),i.appendChild(o),i}function HM(t,e,i,n,o,r){const a=new NM;t.applyStyles(e.common.shopping,a.getStyles(),void 0,a.getDarkModeStyles());const s=document.createElement("DIV"),l=document.createElement("DIV");l.className="campaign-merchant-banner",l.style.display="flex",l.style.flexDirection="row",l.style.alignItems="center",l.style.padding="8px 16px",l.style.position="absolute",l.style.top=r?"45px":"0",l.style.left="0",l.style.right="0",l.style.borderRadius=e.common.isPane?"4px 4px 0px 0px":"0";const c=document.createElement("DIV");c.className="campaign-merchant-banner-title",c.style.fontSize="17px",c.style.lineHeight="23px",c.style.fontWeight="600",c.style.paddingRight="8px",c.style.borderRightStyle="solid",c.style.borderRightWidth="1px",c.style.marginRight="8px";const d=function(t){const e=document.createElement("DIV");return e.textContent=t.dealDays,e}(e.strings);d.style.marginBottom="2px",c.appendChild(d);const h=document.createElement("DIV");h.className="campaign-merchant-banner-timer",h.style.fontSize="14px",h.style.lineHeight="20px",h.textContent=LM(e.strings,o,r);const f=setInterval((()=>{const t=LM(e.strings,o,r);t.indexOf("00h:00m")>=0&&(BM(),clearInterval(f)),h&&(h.textContent=t)}),1e4),m=document.createElement("DIV");m.style.flexGrow="1",m.style.textAlign="right";const y=document.createElement("span");y.className="campaign-merchant-banner-link-text",y.style.fontSize="14px",y.style.lineHeight="20px",y.style.fontWeight="400",y.style.margin="12px 0",y.textContent=r?e.strings.dealDaysAllDeals:e.strings.dealDaysSeeAllDeals,m.appendChild(y),l.appendChild(c),l.appendChild(h),l.appendChild(m);const v=document.createElement("a");v.href=MM;const S=t=>{t.preventDefault(),t.stopPropagation();const o=new ci(g.CampaignCashbackBann