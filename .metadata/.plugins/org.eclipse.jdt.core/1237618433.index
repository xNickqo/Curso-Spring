undToPrecision(4),n=new pa(0,0,0),s=new pa(1,1,1),c=r.equalValue(s)?0:14,l=o.equalValue(n)?0:14;for(let e=100+c;e>=0-l;e-=.5){let i;if(e<0){i=Ia(e/l+1,n,o)}else if(e<=50)i=Ia(wa.ramp(e),o,a);else if(e<=100)i=Ia(wa.ramp(e),a,r);else{i=Ia((e-100)/c,r,s)}i=wa.saturationBump(a,i).roundToPrecision(4),t.push(Ea.from(i))}return new wa(e,t)}static adjustEnd(e,t,i,o){const a=-1===o?t.swatches:t.reversedSwatches,r=e=>{const i=t.closestIndexOf(e);return 1===o?t.lastIndex-i:i};1===o&&i.reverse();const n=e(i[i.length-2]);if(ua(_a(i[i.length-1],i[i.length-2]),2)<n){i.pop();const e=r(t.colorContrast(a[t.lastIndex],n,void 0,o))-r(i[i.length-2]);let s=1;for(let o=i.length-e-1;o<i.length;o++){const e=r(i[o]),n=o===i.length-1?t.lastIndex:e+s;i[o]=a[n],s++}}1===o&&i.reverse()}static createColorPaletteByContrast(e,t){const i=wa.createHighResolutionPalette(e),o=e=>ua(t.stepContrast+t.stepContrast*(1-e.relativeLuminance)*t.stepContrastRamp,2),a=[];let r=t.preserveSource?e:i.swatches[0];a.push(r);do{const e=o(r);r=i.colorContrast(r,e,void 0,1),a.push(r)}while(r.relativeLuminance>0);if(t.preserveSource){r=e;do{const e=o(r);r=i.colorContrast(r,e,void 0,-1),a.unshift(r)}while(r.relativeLuminance<1)}return this.adjustEnd(o,i,a,-1),t.preserveSource&&this.adjustEnd(o,i,a,1),a}static from(e,t){const i=void 0===t?Ra:Object.assign(Object.assign({},Ra),t);return new wa(e,Object.freeze(wa.createColorPaletteByContrast(e,i)))}}const ka=/^#((?:[0-9a-f]{6}|[0-9a-f]{3}))$/i;function Ua(e){const t=ka.exec(e);if(null===t)return null;let i=t[1];if(3===i.length){const e=i.charAt(0),t=i.charAt(1),o=i.charAt(2);i=e.concat(e,t,t,o,o)}const o=parseInt(i,16);return isNaN(o)?null:new pa(sa((16711680&o)>>>16,0,255),sa((65280&o)>>>8,0,255),sa(255&o,0,255),1)}const Ma=Ea.create(1,1,1),La=Ea.create(0,0,0),Fa=Ea.create(.5,.5,.5),Ba=Ua("#0078D4"),xa=Ea.create(Ba.r,Ba.g,Ba.b);function Ha(e,t,i,o,a){const r=e=>e.contrast(Ma)>=a?Ma:La,n=r(e),s=r(t);return{rest:n,hover:s,active:n.relativeLuminance===s.relativeLuminance?n:r(i),focus:r(o)}}var Ga;!function(e){e[e.Burn=0]="Burn",e[e.Color=1]="Color",e[e.Darken=2]="Darken",e[e.Dodge=3]="Dodge",e[e.Lighten=4]="Lighten",e[e.Multiply=5]="Multiply",e[e.Overlay=6]="Overlay",e[e.Screen=7]="Screen"}(Ga||(Ga={}));class Va{constructor(e,t,i,o){this.toColorString=()=>this.cssGradient,this.contrast=_a.bind(null,this),this.createCSS=this.toColorString,this.color=new pa(e,t,i),this.cssGradient=o,this.relativeLuminance=ga(this.color),this.r=e,this.g=t,this.b=i}static fromObject(e,t){return new Va(e.r,e.g,e.b,t)}}const Wa=new pa(0,0,0),Ka=new pa(1,1,1);function za(e,t,i,o,a,r,n,s,c=10,l=!1){const u=e.closestIndexOf(t);function d(i){if(l){const o=e.closestIndexOf(t),a=e.get(o),r=i.relativeLuminance<t.relativeLuminance?Wa:Ka,n=function(e,t,i=null){let o=0,a=i;return null!==a?o=ma(e,t,a):(a=new pa(0,0,0,1),o=ma(e,t,a),o<=0&&(a=new pa(1,1,1,1),o=ma(e,t,a))),o=Math.round(1e3*o)/1e3,new pa(a.r,a.g,a.b,o)}(Ua(i.toColorString()),Ua(a.toColorString()),r).roundToPrecision(2),s=function(e,t){if(t.a>=1)return t;if(t.a<=0)return new pa(e.r,e.g,e.b,1);const i=t.a*t.r+(1-t.a)*e.r,o=t.a*t.g+(1-t.a)*e.g,a=t.a*t.b+(1-t.a)*e.b;return new pa(i,o,a,1)}(Ua(t.toColorString()),n);return Ea.from(s)}return i}void 0===s&&(s=Da(t));const h=u+s*i,p=h+s*(o-i),C=h+s*(a-i),g=h+s*(r-i),S=-1===s?0:100-c,m=-1===s?c:100;function A(t,i){const o=e.get(t);if(i){const i=e.get(t+s*n),a=-1===s?i:o,r=-1===s?o:i,c=`linear-gradient(${d(a).toColorString()} ${S}%, ${d(r).toColorString()} ${m}%)`;return Va.fromObject(a,c)}return d(o)}return{rest:A(h,!0),hover:A(p,!0),active:A(C,!1),focus:A(g,!0)}}function Ya(e,t,i,o,a,r,n,s){null==s&&(s=Da(t));const c=e.closestIndexOf(e.colorContrast(t,i));return{rest:e.get(c+s*o),hover:e.get(c+s*a),active:e.get(c+s*r),focus:e.get(c+s*n)}}function ja(e,t,i,o,a,r,n){const s=e.closestIndexOf(t);return null==n&&(n=Da(t)),{rest:e.get(s+n*i),hover:e.get(s+n*o),active:e.get(s+n*a),focus:e.get(s+n*r)}}function Ja(e,t,i,o,a,r,n=void 0,s,c,l,u,d=void 0){return Na(t)?ja(e,t,s,c,l,u,d):ja(e,t,i,o,a,r,n)}var $a;function Xa(e,t){return e.closestIndexOf((i=t,Ea.create(i,i,i)));var i}function Za(e,t,i){return e.get(Xa(e,t)+-1*i)}!function(e){e[e.LightMode=.98]="LightMode",e[e.DarkMode=.15]="DarkMode"}($a||($a={}));const{create:qa}=aa;function Qa(e){return aa.create({name:e,cssCustomPropertyName:null})}qa("direction").withDefault(ra.ltr),qa("disabled-opacity").withDefault(.3),qa("base-height-multiplier").withDefault(8),qa("base-horizontal-spacing-multiplier").withDefault(3),qa("density").withDefault(0),qa("design-unit").withDefault(4),qa("control-corner-radius").withDefault(4),qa("layer-corner-radius").withDefault(8);const er=qa("stroke-width").withDefault(1),tr=(qa("focus-stroke-width").withDefault(2),qa("body-font").withDefault('"Segoe UI Variable", "Segoe UI", sans-serif'),qa("font-weight").withDefault(400));function ir(e){return t=>{const i=e.getValueFor(t),o=tr.getValueFor(t);if(i.endsWith("px")){const e=Number.parseFloat(i.replace("px",""));if(e<=12)return`"wght" ${o}, "opsz" 8`;if(e>24)return`"wght" ${o}, "opsz" 36`}return`"wght" ${o}, "opsz" 10.5`}}const or=qa("type-ramp-base-font-size").withDefault("14px"),ar=(qa("type-ramp-base-line-height").withDefault("20px"),qa("type-ramp-base-font-variations").withDefault(ir(or)),qa("type-ramp-minus-1-font-size").withDefault("12px")),rr=(qa("type-ramp-minus-1-line-height").withDefault("16px"),qa("type-ramp-minus-1-font-variations").withDefault(ir(ar)),qa("type-ramp-minus-2-font-size").withDefault("10px")),nr=(qa("type-ramp-minus-2-line-height").withDefault("14px"),qa("type-ramp-minus-2-font-variations").withDefault(ir(rr)),qa("type-ramp-plus-1-font-size").withDefault("16px")),sr=(qa("type-ramp-plus-1-line-height").withDefault("22px"),qa("type-ramp-plus-1-font-variations").withDefault(ir(nr)),qa("type-ramp-plus-2-font-size").withDefault("20px")),cr=(qa("type-ramp-plus-2-line-height").withDefault("26px"),qa("type-ramp-plus-2-font-variations").withDefault(ir(sr)),qa("type-ramp-plus-3-font-size").withDefault("24px")),lr=(qa("type-ramp-plus-3-line-height").withDefault("32px"),qa("type-ramp-plus-3-font-variations").withDefault(ir(cr)),qa("type-ramp-plus-4-font-size").withDefault("28px")),ur=(qa("type-ramp-plus-4-line-height").withDefault("36px"),qa("type-ramp-plus-4-font-variations").withDefault(ir(lr)),qa("type-ramp-plus-5-font-size").withDefault("32px")),dr=(qa("type-ramp-plus-5-line-height").withDefault("40px"),qa("type-ramp-plus-5-font-variations").withDefault(ir(ur)),qa("type-ramp-plus-6-font-size").withDefault("40px")),hr=(qa("type-ramp-plus-6-line-height").withDefault("52px"),qa("type-ramp-plus-6-font-variations").withDefault(ir(dr)),qa("base-layer-luminance").withDefault($a.LightMode)),pr=Qa("accent-fill-rest-delta").withDefault(0),Cr=Qa("accent-fill-hover-delta").withDefault(-2),gr=Qa("accent-fill-active-delta").withDefault(-5),Sr=Qa("accent-fill-focus-delta").withDefault(0),mr=Qa("accent-foreground-rest-delta").withDefault(0),Ar=Qa("accent-foreground-hover-delta").withDefault(3),fr=Qa("accent-foreground-active-delta").withDefault(-8),Or=Qa("accent-foreground-focus-delta").withDefault(0),Ir=Qa("neutral-fill-rest-delta").withDefault(-1),Tr=Qa("neutral-fill-hover-delta").withDefault(1),_r=Qa("neutral-fill-active-delta").withDefault(0),Er=Qa("neutral-fill-focus-delta").withDefault(0),Pr=Qa("neutral-fill-input-rest-delta").withDefault(-1),vr=Qa("neutral-fill-input-hover-delta").withDefault(1),yr=Qa("neutral-fill-input-active-delta").withDefault(0),Nr=Qa("neutral-fill-input-focus-delta").withDefault(-2),Dr=Qa("neutral-fill-input-alt-rest-delta").withDefault(2),Rr=Qa("neutral-fill-input-alt-hover-delta").withDefault(4),br=Qa("neutral-fill-input-alt-active-delta").withDefault(6),wr=Qa("neutral-fill-input-alt-focus-delta").withDefault(2),kr=Qa("neutral-fill-layer-rest-delta").withDefault(-2),Ur=Qa("neutral-fill-layer-hover-delta").withDefault(-3),Mr=Qa("neutral-fill-layer-active-delta").withDefault(-3),Lr=Qa("neutral-fill-layer-alt-rest-delta").withDefault(-1),Fr=Qa("neutral-fill-secondary-rest-delta").withDefault(3),Br=Qa("neutral-fill-secondary-hover-delta").withDefault(2),xr=Qa("neutral-fill-secondary-active-delta").withDefault(1),Hr=Qa("neutral-fill-secondary-focus-delta").withDefault(3),Gr=Qa("neutral-fill-stealth-rest-delta").withDefault(0),Vr=Qa("neutral-fill-stealth-hover-delta").withDefault(3),Wr=Qa("neutral-fill-stealth-active-delta").withDefault(2),Kr=Qa("neutral-fill-stealth-focus-delta").withDefault(0),zr=Qa("neutral-fill-strong-rest-delta").withDefault(0),Yr=Qa("neutral-fill-strong-hover-delta").withDefault(8),jr=Qa("neutral-fill-strong-active-delta").withDefault(-5),Jr=Qa("neutral-fill-strong-focus-delta").withDefault(0),$r=Qa("neutral-stroke-rest-delta").withDefault(8),Xr=Qa("neutral-stroke-hover-delta").withDefault(12),Zr=Qa("neutral-stroke-active-delta").withDefault(6),qr=Qa("neutral-stroke-focus-delta").withDefault(8),Qr=Qa("neutral-stroke-control-rest-delta").withDefault(3),en=Qa("neutral-stroke-control-hover-delta").withDefault(5),tn=Qa("neutral-stroke-control-active-delta").withDefault(5),on=Qa("neutral-stroke-control-focus-delta").withDefault(5),an=Qa("neutral-stroke-divider-rest-delta").withDefault(4),rn=Qa("neutral-stroke-layer-rest-delta").withDefault(3),nn=Qa("neutral-stroke-layer-hover-delta").withDefault(3),sn=Qa("neutral-stroke-layer-active-delta").withDefault(3),cn=Qa("neutral-stroke-strong-hover-delta").withDefault(0),ln=Qa("neutral-stroke-strong-active-delta").withDefault(0),un=Qa("neutral-stroke-strong-focus-delta").withDefault(0),dn=qa("neutral-base-color").withDefault(Fa),hn=Qa("neutral-palette").withDefault((e=>ba.from(dn.getValueFor(e)))),pn=qa("accent-base-color").withDefault(xa),Cn=Qa("accent-palette").withDefault((e=>ba.from(pn.getValueFor(e)))),gn=Qa("neutral-layer-card-container-recipe").withDefault({evaluate:e=>Za(hn.getValueFor(e),hr.getValueFor(e),kr.getValueFor(e))}),Sn=(qa("neutral-layer-card-container").withDefault((e=>gn.getValueFor(e).evaluate(e))),Qa("neutral-layer-floating-recipe").withDefault({evaluate:e=>function(e,t,i){return e.get(Xa(e,t)+i)}(hn.getValueFor(e),hr.getValueFor(e),kr.getValueFor(e))})),mn=(qa("neutral-layer-floating").withDefault((e=>Sn.getValueFor(e).evaluate(e))),Qa("neutral-layer-1-recipe").withDefault({evaluate:e=>function(e,t){return e.get(Xa(e,t))}(hn.getValueFor(e),hr.getValueFor(e))})),An=qa("neutral-layer-1").withDefault((e=>mn.getValueFor(e).evaluate(e))),fn=Qa("neutral-layer-2-recipe").withDefault({evaluate:e=>Za(hn.getValueFor(e),hr.getValueFor(e),kr.getValueFor(e))}),On=(qa("neutral-layer-2").withDefault((e=>fn.getValueFor(e).evaluate(e))),Qa("neutral-layer-3-recipe").withDefault({evaluate:e=>function(e,t,i){return e.get(Xa(e,t)+-1*i*2)}(hn.getValueFor(e),hr.getValueFor(e),kr.getValueFor(e))})),In=(qa("neutral-layer-3").withDefault((e=>On.getValueFor(e).evaluate(e))),Qa("neutral-layer-4-recipe").withDefault({evaluate:e=>function(e,t,i){return e.get(Xa(e,t)+-1*i*3)}(hn.getValueFor(e),hr.getValueFor(e),kr.getValueFor(e))})),Tn=(qa("neutral-layer-4").withDefault((e=>In.getValueFor(e).evaluate(e))),qa("fill-color").withDefault((e=>An.getValueFor(e))));var _n;!function(e){e[e.normal=4.5]="normal",e[e.large=3]="large"}(_n||(_n={}));const En=Qa("accent-fill-recipe").withDefault({evaluate:(e,t)=>function(e,t,i,o,a,r,n,s,c,l,u,d,h,p){return Na(t)?Ya(e,t,c,l,u,d,h,p):Ya(e,t,i,o,a,r,n,s)}(Cn.getValueFor(e),t||Tn.getValueFor(e),5,pr.getValueFor(e),Cr.getValueFor(e),gr.getValueFor(e),Sr.getValueFor(e),void 0,8,pr.getValueFor(e),Cr.getValueFor(e),gr.getValueFor(e),Sr.getValueFor(e),void 0)}),Pn=qa("accent-fill-rest").withDefault((e=>En.getValueFor(e).evaluate(e).rest)),vn=qa("accent-fill-hover").withDefault((e=>En.getValueFor(e).evaluate(e).hover)),yn=qa("accent-fill-active").withDefault((e=>En.getValueFor(e).evaluate(e).active)),Nn=qa("accent-fill-focus").withDefault((e=>En.getValueFor(e).evaluate(e).focus)),Dn=Qa("foreground-on-accent-recipe").withDefault({evaluate:e=>Ha(Pn.getValueFor(e),vn.getValueFor(e),yn.getValueFor(e),Nn.getValueFor(e),_n.normal)}),Rn=(qa("foreground-on-accent-rest").withDefault((e=>Dn.getValueFor(e).evaluate(e).rest)),qa("foreground-on-accent-hover").withDefault((e=>Dn.getValueFor(e).evaluate(e).hover)),qa("foreground-on-accent-active").withDefault((e=>Dn.getValueFor(e).evaluate(e).active)),qa("foreground-on-accent-focus").withDefault((e=>Dn.getValueFor(e).evaluate(e).focus)),Qa("accent-foreground-recipe").withDefault({evaluate:(e,t)=>Ya(Cn.getValueFor(e),t||Tn.getValueFor(e),9.5,mr.getValueFor(e),Ar.getValueFor(e),fr.getValueFor(e),Or.getValueFor(e))})),bn=(qa("accent-foreground-rest").withDefault((e=>Rn.getValueFor(e).evaluate(e).rest)),qa("accent-foreground-hover").withDefault((e=>Rn.getValueFor(e).evaluate(e).hover)),qa("accent-foreground-active").withDefault((e=>Rn.getValueFor(e).evaluate(e).active)),qa("accent-foreground-focus").withDefault((e=>Rn.getValueFor(e).evaluate(e).focus)),Qa("accent-stroke-control-recipe").withDefault({evaluate:(e,t)=>za(hn.getValueFor(e),t||Tn.getValueFor(e),-3,-3,-3,-3,10,1,void 0,!0)})),wn=(qa("accent-stroke-control-rest").withDefault((e=>bn.getValueFor(e).evaluate(e,Pn.getValueFor(e)).rest)),qa("accent-stroke-control-hover").withDefault((e=>bn.getValueFor(e).evaluate(e,vn.getValueFor(e)).hover)),qa("accent-stroke-control-active").withDefault((e=>bn.getValueFor(e).evaluate(e,yn.getValueFor(e)).active)),qa("accent-stroke-control-focus").withDefault((e=>bn.getValueFor(e).evaluate(e,Nn.getValueFor(e)).focus)),Qa("neutral-fill-recipe").withDefault({evaluate:(e,t)=>Ja(hn.getValueFor(e),t||Tn.getValueFor(e),Ir.getValueFor(e),Tr.getValueFor(e),_r.getValueFor(e),Er.getValueFor(e),void 0,2,3,1,2,void 0)})),kn=(qa("neutral-fill-rest").withDefault((e=>wn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-hover").withDefault((e=>wn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-active").withDefault((e=>wn.getValueFor(e).evaluate(e).active)),qa("neutral-fill-focus").withDefault((e=>wn.getValueFor(e).evaluate(e).focus)),Qa("neutral-fill-input-recipe").withDefault({evaluate:(e,t)=>Ja(hn.getValueFor(e),t||Tn.getValueFor(e),Pr.getValueFor(e),vr.getValueFor(e),yr.getValueFor(e),Nr.getValueFor(e),void 0,2,3,1,0,void 0)})),Un=(qa("neutral-fill-input-rest").withDefault((e=>kn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-input-hover").withDefault((e=>kn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-input-active").withDefault((e=>kn.getValueFor(e).evaluate(e).active)),qa("neutral-fill-input-focus").withDefault((e=>kn.getValueFor(e).evaluate(e).focus)),Qa("neutral-fill-input-alt-recipe").withDefault({evaluate:(e,t)=>Ja(hn.getValueFor(e),t||Tn.getValueFor(e),Dr.getValueFor(e),Rr.getValueFor(e),br.getValueFor(e),wr.getValueFor(e),1,Dr.getValueFor(e),Dr.getValueFor(e)-Rr.getValueFor(e),Dr.getValueFor(e)-br.getValueFor(e),wr.getValueFor(e),1)})),Mn=(qa("neutral-fill-input-alt-rest").withDefault((e=>Un.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-input-alt-hover").withDefault((e=>Un.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-input-alt-active").withDefault((e=>Un.getValueFor(e).evaluate(e).active)),qa("neutral-fill-input-alt-focus").withDefault((e=>Un.getValueFor(e).evaluate(e).focus)),Qa("neutral-fill-layer-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),kr.getValueFor(e),Ur.getValueFor(e),Mr.getValueFor(e),kr.getValueFor(e),1)})),Ln=(qa("neutral-fill-layer-rest").withDefault((e=>Mn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-layer-hover").withDefault((e=>Mn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-layer-active").withDefault((e=>Mn.getValueFor(e).evaluate(e).active)),Qa("neutral-fill-layer-alt-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),Lr.getValueFor(e),Lr.getValueFor(e),Lr.getValueFor(e),Lr.getValueFor(e))})),Fn=(qa("neutral-fill-layer-alt-rest").withDefault((e=>Ln.getValueFor(e).evaluate(e).rest)),Qa("neutral-fill-secondary-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),Fr.getValueFor(e),Br.getValueFor(e),xr.getValueFor(e),Hr.getValueFor(e))})),Bn=(qa("neutral-fill-secondary-rest").withDefault((e=>Fn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-secondary-hover").withDefault((e=>Fn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-secondary-active").withDefault((e=>Fn.getValueFor(e).evaluate(e).active)),qa("neutral-fill-secondary-focus").withDefault((e=>Fn.getValueFor(e).evaluate(e).focus)),Qa("neutral-fill-stealth-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),Gr.getValueFor(e),Vr.getValueFor(e),Wr.getValueFor(e),Kr.getValueFor(e))})),xn=(qa("neutral-fill-stealth-rest").withDefault((e=>Bn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-stealth-hover").withDefault((e=>Bn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-stealth-active").withDefault((e=>Bn.getValueFor(e).evaluate(e).active)),qa("neutral-fill-stealth-focus").withDefault((e=>Bn.getValueFor(e).evaluate(e).focus)),Qa("neutral-fill-strong-recipe").withDefault({evaluate:(e,t)=>Ya(hn.getValueFor(e),t||Tn.getValueFor(e),4.5,zr.getValueFor(e),Yr.getValueFor(e),jr.getValueFor(e),Jr.getValueFor(e))})),Hn=(qa("neutral-fill-strong-rest").withDefault((e=>xn.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-strong-hover").withDefault((e=>xn.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-strong-active").withDefault((e=>xn.getValueFor(e).evaluate(e).active)),qa("neutral-fill-strong-focus").withDefault((e=>xn.getValueFor(e).evaluate(e).focus)),Qa("neutral-foreground-recipe").withDefault({evaluate:(e,t)=>Ya(hn.getValueFor(e),t||Tn.getValueFor(e),16,0,-19,-30,0)})),Gn=(qa("neutral-foreground-rest").withDefault((e=>Hn.getValueFor(e).evaluate(e).rest)),qa("neutral-foreground-hover").withDefault((e=>Hn.getValueFor(e).evaluate(e).hover)),qa("neutral-foreground-active").withDefault((e=>Hn.getValueFor(e).evaluate(e).active)),qa("neutral-foreground-focus").withDefault((e=>Hn.getValueFor(e).evaluate(e).focus)),Qa("neutral-foreground-hint-recipe").withDefault({evaluate:(e,t)=>function(e,t,i){return e.colorContrast(t,i)}(hn.getValueFor(e),t||Tn.getValueFor(e),4.5)})),Vn=(qa("neutral-foreground-hint").withDefault((e=>Gn.getValueFor(e).evaluate(e))),Qa("neutral-stroke-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),$r.getValueFor(e),Xr.getValueFor(e),Zr.getValueFor(e),qr.getValueFor(e))})),Wn=(qa("neutral-stroke-rest").withDefault((e=>Vn.getValueFor(e).evaluate(e).rest)),qa("neutral-stroke-hover").withDefault((e=>Vn.getValueFor(e).evaluate(e).hover)),qa("neutral-stroke-active").withDefault((e=>Vn.getValueFor(e).evaluate(e).active)),qa("neutral-stroke-focus").withDefault((e=>Vn.getValueFor(e).evaluate(e).focus)),Qa("neutral-stroke-control-recipe").withDefault({evaluate:(e,t)=>za(hn.getValueFor(e),t||Tn.getValueFor(e),Qr.getValueFor(e),en.getValueFor(e),tn.getValueFor(e),on.getValueFor(e),5)})),Kn=(qa("neutral-stroke-control-rest").withDefault((e=>Wn.getValueFor(e).evaluate(e).rest)),qa("neutral-stroke-control-hover").withDefault((e=>Wn.getValueFor(e).evaluate(e).hover)),qa("neutral-stroke-control-active").withDefault((e=>Wn.getValueFor(e).evaluate(e).active)),qa("neutral-stroke-control-focus").withDefault((e=>Wn.getValueFor(e).evaluate(e).focus)),Qa("neutral-stroke-divider-recipe").withDefault({evaluate:(e,t)=>function(e,t,i){return e.get(e.closestIndexOf(t)+Da(t)*i)}(hn.getValueFor(e),t||Tn.getValueFor(e),an.getValueFor(e))})),zn=(qa("neutral-stroke-divider-rest").withDefault((e=>Kn.getValueFor(e).evaluate(e))),Qa("neutral-stroke-input-recipe").withDefault({evaluate:(e,t)=>function(e,t,i,o,a,r,n,s){const c=e.closestIndexOf(t),l=Da(t),u=c+l*i,d=u+l*(o-i),h=u+l*(a-i),p=u+l*(r-i),C=`calc(100% - ${s})`;function g(t,i){const o=e.get(t);if(i){const i=e.get(t+l*n),a=`linear-gradient(${o.toColorString()} ${C}, ${i.toColorString()} ${C}, ${i.toColorString()})`;return Va.fromObject(o,a)}return o}return{rest:g(u,!0),hover:g(d,!0),active:g(h,!1),focus:g(p,!0)}}(hn.getValueFor(e),t||Tn.getValueFor(e),Qr.getValueFor(e),en.getValueFor(e),tn.getValueFor(e),on.getValueFor(e),20,er.getValueFor(e)+"px")})),Yn=(qa("neutral-stroke-input-rest").withDefault((e=>zn.getValueFor(e).evaluate(e).rest)),qa("neutral-stroke-input-hover").withDefault((e=>zn.getValueFor(e).evaluate(e).hover)),qa("neutral-stroke-input-active").withDefault((e=>zn.getValueFor(e).evaluate(e).active)),qa("neutral-stroke-input-focus").withDefault((e=>zn.getValueFor(e).evaluate(e).focus)),Qa("neutral-stroke-layer-recipe").withDefault({evaluate:(e,t)=>ja(hn.getValueFor(e),t||Tn.getValueFor(e),rn.getValueFor(e),nn.getValueFor(e),sn.getValueFor(e),rn.getValueFor(e))})),jn=(qa("neutral-stroke-layer-rest").withDefault((e=>Yn.getValueFor(e).evaluate(e).rest)),qa("neutral-stroke-layer-hover").withDefault((e=>Yn.getValueFor(e).evaluate(e).hover)),qa("neutral-stroke-layer-active").withDefault((e=>Yn.getValueFor(e).evaluate(e).active)),Qa("neutral-stroke-strong-recipe").withDefault({evaluate:(e,t)=>Ya(hn.getValueFor(e),t||Tn.getValueFor(e),5.5,0,cn.getValueFor(e),ln.getValueFor(e),un.getValueFor(e))})),Jn=(qa("neutral-stroke-strong-rest").withDefault((e=>jn.getValueFor(e).evaluate(e).rest)),qa("neutral-stroke-strong-hover").withDefault((e=>jn.getValueFor(e).evaluate(e).hover)),qa("neutral-stroke-strong-active").withDefault((e=>jn.getValueFor(e).evaluate(e).active)),qa("neutral-stroke-strong-focus").withDefault((e=>jn.getValueFor(e).evaluate(e).focus)),Qa("focus-stroke-outer-recipe").withDefault({evaluate:e=>(hn.getValueFor(e),Na(Tn.getValueFor(e))?Ma:La)})),$n=qa("focus-stroke-outer").withDefault((e=>Jn.getValueFor(e).evaluate(e))),Xn=Qa("focus-stroke-inner-recipe").withDefault({evaluate:e=>{return Cn.getValueFor(e),t=Tn.getValueFor(e),$n.getValueFor(e),Na(t)?La:Ma;var t}}),Zn=(qa("focus-stroke-inner").withDefault((e=>Xn.getValueFor(e).evaluate(e))),Qa("foreground-on-accent-large-recipe").withDefault({evaluate:e=>Ha(Pn.getValueFor(e),vn.getValueFor(e),yn.getValueFor(e),Nn.getValueFor(e),_n.large)})),qn=(qa("foreground-on-accent-rest-large").withDefault((e=>Zn.getValueFor(e).evaluate(e).rest)),qa("foreground-on-accent-hover-large").withDefault((e=>Zn.getValueFor(e).evaluate(e,vn.getValueFor(e)).hover)),qa("foreground-on-accent-active-large").withDefault((e=>Zn.getValueFor(e).evaluate(e,yn.getValueFor(e)).active)),qa("foreground-on-accent-focus-large").withDefault((e=>Zn.getValueFor(e).evaluate(e,Nn.getValueFor(e)).focus)),qa("neutral-fill-inverse-rest-delta").withDefault(0)),Qn=qa("neutral-fill-inverse-hover-delta").withDefault(-3),es=qa("neutral-fill-inverse-active-delta").withDefault(7),ts=qa("neutral-fill-inverse-focus-delta").withDefault(0);const is=Qa("neutral-fill-inverse-recipe").withDefault({evaluate:(e,t)=>function(e,t,i,o,a,r){const n=Da(t),s=e.closestIndexOf(e.colorContrast(t,14)),c=s+n*Math.abs(i-o);let l,u;return(1===n?i<o:n*i>n*o)?(l=s,u=c):(l=c,u=s),{rest:e.get(l),hover:e.get(u),active:e.get(l+n*a),focus:e.get(l+n*r)}}(hn.getValueFor(e),t||Tn.getValueFor(e),qn.getValueFor(e),Qn.getValueFor(e),es.getValueFor(e),ts.getValueFor(e))});qa("neutral-fill-inverse-rest").withDefault((e=>is.getValueFor(e).evaluate(e).rest)),qa("neutral-fill-inverse-hover").withDefault((e=>is.getValueFor(e).evaluate(e).hover)),qa("neutral-fill-inverse-active").withDefault((e=>is.getValueFor(e).evaluate(e).active)),qa("neutral-fill-inverse-focus").withDefault((e=>is.getValueFor(e).evaluate(e).focus));var os=class{constructor(){M(this,"element",void 0),M(this,"name",void 0),M(this,"moduleInterface",void 0)}};let as='button:enabled:not([slot="header-actions"]), textarea, input[type="text"], input[type="password"], div[role="slider"],\n      input[type="radio"]:checked, input[type="checkbox"]:enabled, a[href]:not([slot="header-actions"]):not(#infoIcon),\n      select:not([style*="display: none"]), details, a.autosMarketplaceListing, msft-shopping-link, msft-product-card,\n      fluent-button:not([slot="header-actions"]), fluent-anchor:not([class="aHeaderContent"]), msft-shopping-recommendation,\n      fluent-accordion, fluent-option, fluent-listbox, div.tipsDiv, msft-shopping-cashback-card, msft-shopping-coupon,\n      div#divHomeNotification, msft-shopping-coupon-printable, div#divYoutubeCouponsNotification, msft-micro-feedback-item,\n      msft-shopping-tooltip, #divPriceHistory svg, msft-shopping-cart:not([id="unselectable"]), rect.priceInsightBar,\n      msft-shopping-section:not([slot="header-content"]), msft-shopping-coupon-new, msft-banner-card, msft-product-feed,\n      div#packageTrackingAcknowledgementDescriptionDiv, msft-package-tracker-card-new, msft-travel-cheaper-flight-card, fluent-select\n      ';class rs{constructor(){M(this,"container",void 0),M(this,"currentFocusElement",void 0),M(this,"isEdgeDriver",!1),M(this,"flyoutData",void 0),M(this,"initialize",((e,t,i)=>{this.container=e,this.isEdgeDriver=t,this.flyoutData=i,this.container.addEventListener("keydown",this.trapFocus)})),M(this,"removeListeners",(()=>{this.container.removeEventListener("keydown",this.trapFocus)})),M(this,"trapFocus",(e=>{if("Tab"!==e.key||e.ctrlKey||!this.container)return;let t=Array.prototype.slice.call(this.container.querySelectorAll('fluent-button[slot="header-actions"], a[slot="header-actions"], button[slot="header-actions"]'));const i=Array.prototype.slice.call(this.container.querySelectorAll('#divPinterestSubTitle[slot="header-content"], fluent-anchor[slot="header-content"], fluent-button[slot="header-content"], button[slot="header-content"], div#divYoutubeCouponsNotification, msft-shopping-tooltip#header-tooltip, msft-shopping-section[slot="header-content"] msft-shopping-coupon-new, div[slot="header-content"] msft-shopping-tooltip'));t.push.apply(t,i),this.flyoutData&&this.flyoutData.common.openedWith===we.Auto&&this.flyoutData.common.popupOrigination===re.AUTO_SHOW_PRICE_HISTORY&&(as+=", #divPriceHistorySection");let o=Array.prototype.slice.call(this.container.querySelectorAll(as));o=o.filter((e=>!i.includes(e))),t.push.apply(t,o),this.isEdgeDriver&&(t=t.filter((e=>"fluent-accordion"!==e.nodeName.toLowerCase()&&e.offsetHeight>0))),this.flyoutData&&this.flyoutData.common.openedWith===we.Auto&&(t=t.filter((e=>"msft-micro-feedback-item"!==e.nodeName.toLowerCase())));const a=Array.prototype.slice.call(this.container.querySelectorAll('fluent-anchor[slot="footer"], fluent-button[slot="footer"],\n           button[slot="footer"], #footerDiv fluent-button'));if(t=t.filter((e=>!a.includes(e))),t.push.apply(t,a),t&&t.length>0){const i=t[0];let o=t[t.length-1];for(const e of t)e.classList.contains("checkoutButton")&&(o=e);let a=document.activeElement;if(a){if("divOverlayWrapper"===a.id){const e=a.shadowRoot;e&&(a=e.activeElement)}if(a===i&&e.shiftKey){let t=o?.parentElement?.shadowRoot;if("previousCashBackSection"===o.parentElement?.id){const e=o.parentElement?.parentElement?.shadowRoot;if(e){const i=e.querySelector("fluent-accordion-item");if(i&&!i.classList.contains("expanded")){const e=i.shadowRoot?.querySelector("button");e&&(e.focus(),t=null)}}}if(t){const e=t.querySelector("fluent-accordion-item");if(e&&!e.classList.contains("expanded")){const t=e.shadowRoot?.querySelector("button");t&&t.focus()}else o.focus()}else"previousCashBackSection"!==o.parentElement?.id&&(o.focus(),e.preventDefault())}else a!==o||e.shiftKey||(i.focus(),e.preventDefault())}}}))}static getInstance(){return null===rs.currentInstance&&(rs.currentInstance=new rs),rs.currentInstance}static getFirstFocusableElementInParent(e){return e.querySelectorAll(as)[0]}makeFocusOnActiveElement(e){if(this.currentFocusElement===document.activeElement)return;const t=e.querySelectorAll(as);0!==t.length&&(t.forEach((e=>{document.activeElement!==e||(this.currentFocusElement=e)})),this.currentFocusElement&&this.currentFocusElement.focus())}}M(rs,"currentInstance",null);var ns=rs;let ss=function(e){return e[e.XSmall=0]="XSmall",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e}({});var cs=class{constructor(e,t,i){M(this,"commonAssets",void 0),M(this,"flyoutData",void 0),M(this,"logModule",void 0),this.flyoutData=e,this.logModule=t,this.commonAssets=i}handleHTMLDecode(t,i=!1){if(e(t))return"";const o=document.createElement("span"),a=[t];return a.raw=a,o.innerHTML=Dt.getTrustedHTML(Object.freeze(a)),i?o.innerHTML:o.innerText}cleanCouponDescription(e){const t=/[^%％\w\.@\-, !$ぁ-ゔァ-ヴー一-龠々〆〤ヶÀ-ÖØ-öø-ÿĄąĆćĘęŁłŃńÓóŚśŹźŻżа-яА-ЯёЁ\u0621-\u064A\u0660-\u0669]/g;try{return e.replace(t,"")}catch{return" "}}timeAgo(e){const t=new Date,i=new Date(e),o=t.getTime()-i.getTime(),a=Math.ceil(o/6e4),r=Math.ceil(o/36e5);if(!(r<=0||r>2))return a<60?je.ReplaceValueInKey("timeSinceSuccessfulCoupon",this.flyoutData.strings.minutesAgo,a.toString()):1===r?je.ReplaceValueInKey("timeSinceSuccessfulCoupon",this.flyoutData.strings.hourAgo,r.toString()):r>1&&r<=2?je.ReplaceValueInKey("timeSinceSuccessfulCoupon",this.flyoutData.strings.hoursAgo,r.toString()):void 0}getDomainNameAndCapitalize(e){const t=e.split(".");let i;return i=-1!==["us","ca","uk","au","nz","ie","fr","de","it","es","mx","br","eu","jp"].indexOf(t[0])?Ut(t[1]):Ut(t[0]),"Macys"===i?"Macy's":"Kohls"===i?"Kohl's":i}removeDomainPrefix(e){const t=e.split(".");let i=0;return-1!==["us","ca","uk","au","nz","ie","fr","de","it","es","mx","br","eu","jp"].indexOf(t[0])&&(i=1),t.slice(i).join(".")}getPwiloPopupOrigination(e){const t=e?.getState(Oi.outOfFlow);if(t)return t===se.ABANDONED_CART_COUPONS?re.AUTO_SHOW_ABANDONED_CART:t===se.PRODUCT_TRACKING_BACK_IN_STOCK?re.AUTO_SHOW_PRODUCT_TRACKING_BACK_IN_STOCK:t===se.PRODUCT_TRACKING_EXP_PRICE_DROP?re.AUTO_PRODUCT_TRACKING_EXP_PRICE_DROP:t===se.PRODUCT_TRACKING_IMP_PRICE_DROP?re.AUTO_PRODUCT_TRACKING_IMP_PRICE_DROP:t===se.PRODUCT_TRACKING_OUT_OF_STOCK?re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK:void 0}toFixedSafe(e,t){return e&&e.toFixed?e.toFixed(t):""}formatToParts(e,t){try{let i,o,a,r;o=t||this.flyoutData.common.pageLocale;try{const t=e[e.length-3];","===t?(a=e.replace(".",""),a=a.replace(",",".")):"."===t&&(a=e.replace(",",""))}catch(e){}return r=a?+a:+e,i=new Intl.NumberFormat(o,{maximumFractionDigits:2,minimumFractionDigits:2}).formatToParts(r),i||i}catch(e){return[]}}getCurrencyMarket(e){return e||this.flyoutData.common.pageLocale}getFormattedPrice(e,t){return e%1!=0?new Intl.NumberFormat(t,{maximumFractionDigits:2,minimumFractionDigits:2}).format(e):new Intl.NumberFormat(t).format(e)}formatPrice(e,t){try{const i=this.getCurrencyMarket(t),o=this.getFormattedPrice(e,i);return o||this.toFixedSafe(e,2)}catch(t){return this.toFixedSafe(e,2)}}isDarkMode(){const e=this.flyoutData.common.currentTheme===Ne.Dark,t=window,i=!!(t&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches);return e||i}isPinterest(){return(void 0!==this.flyoutData.dataStoreModule.PinterestData?.productLink&&void 0!==this.flyoutData.common.lastCommittedURL&&null!==this.flyoutData.common.lastCommittedURL&&this.flyoutData.common.lastCommittedURL.includes("pinterest.com/pin"))??!1}createPDPLoadingStateUX(e,t,i,o,a){e.id=i,e.classList.add("loadingSection"),e.accordion=!0,e.expanded=!0;const r=kt("DIV",{style:'\n                display: grid;\n                grid-template-areas:\n                    "img img title title title title"\n                    "img img subTitle subTitle subTitle subTitle"\n                    "content1 content1 content1 content1 content1 content1"\n                    "content2 content2 content2 content2 content2 content2"\n                    "content3 content3 content3 content3 content3 content3";\n                grid-gap: 20px;\n                padding: 0px 2px;\n            '});r.id=t;let n=1;this.isDarkMode()&&(n=.08);const s=kt("DIV",{style:`\n                grid-area: img;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 100px;\n                opacity: ${n};\n            `}),c=kt("DIV",{style:`\n                grid-area: title;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-top: 20px;\n                margin-right: 50px;\n                opacity: ${n};\n            `}),l=kt("DIV",{style:`\n                grid-area: subTitle;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-bottom: 20px;\n                margin-right: 50px;\n                opacity: ${n};\n            `}),u=kt("DIV",{style:`\n                grid-area: content1;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ${n};\n            `}),d=kt("DIV",{style:`\n                grid-area: content2;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ${n};\n            `}),h=kt("DIV",{style:`\n                grid-area: content3;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ${n};\n            `});r.appendChild(s),r.appendChild(c),r.appendChild(l),r.appendChild(u),r.appendChild(d),r.appendChild(h),e.appendChild(r),setTimeout((()=>{const e=document.querySelector(`#${t}`);if(e){e.parentElement?.remove();const t=new CustomEvent(fi.PDPRemoved,{detail:{moduleName:a}});o.dispatchEvent(t)}}),7e3)}async setImageSrc(e,t,i){return new Promise(((o,a)=>{e.src=t,e.addEventListener("error",(()=>{e.src=i??this.commonAssets.getDefaultProductImage(),o(!1)})),e.addEventListener("load",(()=>{o(!0)}))}))}setImageSrcAndConvertToBase64(e,t,i){i?i.GetSafeImage(t).then((t=>{t.succ?e.src=t.safeImgData:e.src=this.flyoutData.common.resourcesEndpoint+"common/defaultProduct.svg"})):e.src=this.flyoutData.common.resourcesEndpoint+"common/defaultProduct.svg"}addCommonStyles(e,t,i){try{this.applyFluentDesignStyles(t),this.applyWrapperStyles(e,i)}catch(e){const t=new $e(n.OnErrorInvoked);this.logModule.LogErrorEvent(o.EdgeFlyoutStatus,`error adding common styles ${e}`,t)}}createCommonListStructure(e,t,i,o,a,r,n,s,c){const l=this.flyoutData.common.isPane;this.flyoutData.common.currentDevice===ye.Desktop?e.accordion=!0:e.accordion=!1,e.titleText=t,e.expanded=!1;const u=a(i),d=s?i?[...i.keys()]:null:i;if(d&&d.length>u){const a=document.createElement("fluent-button");if(a.slot="action",a.className+="action btnSeeMore",a.tabIndex=0,l){a.classList.add("newSeeMore"),a.appearance="neutral",e.classList.add("noInlinePadding");const t=kt("div");t.style.display="inline-block",t.style.paddingLeft="10px",t.innerHTML=this.commonAssets.getCaretDownIcon(),a.textContent=this.flyoutData.strings.bgShowMore,a.appendChild(t)}else a.appearance="lightweight",a.style.backgroundColor="transparent",a.style.padding="0px",i.length-u>20?a.textContent=je.ReplaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,"20+"):a.textContent=je.ReplaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,(i.length-u).toString());let s;if(a.setAttribute("aria-label",`${a.textContent} of ${t}`),this.isDarkMode()?a.style.color="#FFFFFF":a.style.color=this.flyoutData.common.isPane?"#1A1A1A":"#666666",c){const t=kt("DIV",{});t.classList.add("cjkNewSeeMore"),t.role="button",t.textContent=je.ReplaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,""+(i.length-u)),t.addEventListener("click",(o=>{this.seeMoreClickHandler(o,e,r,t,i,n)})),t.addEventListener("keydown",(o=>{"Enter"!==o.key&&" "!==o.key||(this.seeMoreClickHandler(o,e,r,t,i,n),o.preventDefault())})),t.tabIndex=0,e.appendChild(t),e.classList.add("cjkDivNewSeeMore")}else{if(o===Ue.COUPON||o===Ue.RECOMMENDATIONS||o===Ue.GROCERY_COUPON||o===Ue.PRINTABLE_COUPON||o===Ue.SOCIALCOUPONS||o===Ue.CASHBACK||o===Ue.GROCERY_CASHBACK||o===Ue.ITEMIZED_CASHBACK||l)e.appendChild(a);else{const t=this.isDarkMode()?"linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%)":us.isSafariClient(this.flyoutData)?"none":"linear-gradient(90deg, #FFFBF2 0%, #EEFCFF 53.12%, #F5F9FF 100%)";s=kt("DIV",{style:`\n                            background: ${t};\n                            height: 40px;\n                            padding-left: 12px;\n                            cursor: pointer;\n                            display: flex;\n                            align-items: center;\n                            border-top: 1px solid rgb(236, 236, 236);\n                        `}),s.className="divSeeMore",s.appendChild(a),e.appendChild(s),s&&s.addEventListener("click",(t=>{this.seeMoreClickHandler(t,e,r,s,i,n)}))}a&&a.addEventListener("click",(t=>{s||this.seeMoreClickHandler(t,e,r,a,i,n)}))}}else e.style.marginBottom="10px"}addFavIconSrc(e,t,i,a=!1,r=!1){const s=a?i:this.getFavIconSrc(i);let c=!0;e.style.maxWidth="16px",e.slot="icon",e.setAttribute("aria-hidden","true"),e.addEventListener("error",(()=>{if(c=!1,r){const e=new $e(n.NoFavIcon);this.logModule.LogInfoEvent(o.EdgeFlyoutStatus,"No Fav Icon rendered for "+i,e)}e.remove()})),this.flyoutData.common.isCJKEnabled&&(e.style.maxWidth="20px",e.style.maxHeight="20px"),s?e.src=s:c=!1,c&&t.appendChild(e)}addFavIconSVG(e,t,i){let o=!0;e.style.maxWidth="16px",e.slot="icon",e.setAttribute("aria-hidden","true"),e.addEventListener("error",(()=>{o=!1,e.remove()})),this.flyoutData.common.isCJKEnabled&&(e.style.maxWidth="20px",e.style.maxHeight="20px"),i?e.innerHTML=i:o=!1,o&&t.appendChild(e)}addFavIconBase64(e,t,i,o){e.style.maxWidth="16px",e.slot="icon",e.setAttribute("aria-hidden","true"),e.addEventListener("error",(()=>{e.remove()})),this.flyoutData.common.isCJKEnabled&&(e.style.maxWidth="20px",e.style.maxHeight="20px"),this.setImageSrcAndConvertToBase64(e,i,o),t.appendChild(e)}checkIfActionInLoadTimeData(e,t){return!(!e||!(t in e))}getFavIconSrc(e,t=20){return e?this.flyoutData.common.isCJKEnabled?`${e}`:(e=(e=e.replace("http://","")).replace("https://",""),this.flyoutData.dataLoader.IsServerData()?`https://edge.microsoft.com/favicon/v1/?client=chrome_desktop&nfrp=2&check_seen=true&size=${t}&fallback_opts=TYPE,SIZE,URL&url=http://${e}&origin=shoppingv2`:this.flyoutData.common.currentDevice===ye.Mobile?`https://${e}/favicon.ico`:`edge://favicon2/?size=16&scale_factor=1x&page_url=http://${e}&allow_google_server_fallback=1`):""}trapFlyoutFocusMac(){this.flyoutData.common.isPane||ns.getInstance().initialize(this.flyoutData.common.shopping,!1,this.flyoutData)}applyStyles(e,t,i,o){if(e){const a=kt("STYLE");let r=t;this.isDarkMode()&&(r=`${r}\n${o}`),a.textContent=r,a.type="text/css",a.rel="stylesheet",i&&(a.id=i),e.appendChild(a)}}addSectionSeparator(e){const t=kt("HR",{className:"sectionSeparator"});t.setAttribute("aria-hidden","true"),e.appendChild(t)}styleModules(e,t,i){this.styleModulesHeader(t,e,i),this.flyoutData.common.isPane&&(e.moduleLayout===Fe.BLOCK?e.element.classList.add("actionBlock"):e.element.classList.add("actionPane"),e.name!==Ue.PRODUCTHISTORY||i.classList.contains("isStoryBook")&&!i.classList.contains("isPolePositionStory")||(e.element.accordion=!1,e.element.classList.add("accordionPadding")))}appendNewModuleToFlyout(e){const t=this.flyoutData.common.shopping.querySelectorAll("msft-edge-shopping-section");let i=!1;if(t&&t.length>0&&!this.flyoutData.common.isPane)try{if(1===t.length){const o=kt("HR",{className:"sectionSeparator"});o.setAttribute("aria-hidden","true"),t[0].nextSibling?(this.flyoutData.common.shopping.insertBefore(o,t[0].nextSibling),this.flyoutData.common.shopping.insertBefore(e.element,o.nextSibling),i=!0):(this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(e.element),i=!0)}else for(let o=1;o<t.length;o++){const a=t[o];if(null!==a.getAttribute("accordion")){const t=kt("HR",{className:"sectionSeparator"});t.setAttribute("aria-hidden","true"),"HR"===a.previousSibling?.nodeName?(this.flyoutData.common.shopping.insertBefore(t,a.previousSibling),this.flyoutData.common.shopping.insertBefore(e.element,a.previousSibling)):(this.flyoutData.common.shopping.insertBefore(t,a),this.flyoutData.common.shopping.insertBefore(e.element,a)),i=!0}}}catch(t){this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(e.element),i=!0}else{const t=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(t){const i=kt("HR",{className:"sectionSeparator"});i.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(i,t),this.flyoutData.common.shopping.insertBefore(e.element,t)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(e.element),i=!0}if(!i){const t=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(t){const i=kt("HR",{className:"sectionSeparator"});i.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(i,t),this.flyoutData.common.shopping.insertBefore(e.element,t)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(e.element)}}shouldRenderSmallNotification(){if(this.flyoutData.common.openedWith===we.Auto){const e=this.flyoutData.common.popupOrigination;if(e===re.AUTO_SHOW_PRICE_HISTORY||e===re.AUTO_SHOW_PACKAGE_TRACKING||e===re.AUTO_SHOW_COUPONS_CHECKOUT||e===re.AUTO_SHOW_LOWER_PRICE_FOUND||e===re.AUTO_SHOW_PRICE_DROP_PLUS_CASHBACK||e===re.AUTO_SHOW_OTHER_SELLERS||e===re.AUTO_SHOW_REBATES_ORGANIC||e===re.AUTO_SHOW_REBATES_ORGANIC_NEW||e===re.AUTO_SHOW_REBATES_CHECKOUT||e===re.AUTO_SHOW_REBATES||e===re.AUTO_SHOW_REBATES_PDP||e===re.AUTO_SHOW_REBATES_CONFIRMATION||e===re.AUTO_SHOW_REBATES_DEACTIVATED||e===re.AUTO_SHOW_COUPONS_CLIPPING||e===re.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION||e===re.AUTO_SHOW_GIFT_CARD||e===re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK||e===re.AUTO_SHOW_AUTOS_MARKETPLACE||e===re.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER||e===re.AUTO_SHOW_AWARENESS_EXPANSION||e===re.AUTO_SHOW_SOCIAL_COUPONS||e===re.AA_CONSENT||e===re.AUTO_SHOW_PRODUCT_BEST_COUPON_CONSENT||e===re.AUTO_SHOW_RECOMMENDATIONS||e===re.AUTO_SHOW_PERSONALIZED_CASHBACK||e===re.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION||e===re.AUTO_SHOW_REBATES_SWITCHED_TO_MSA||e===re.AUTO_SHOW_CAMPAIGN_PDP_NOTIFICATION||e===re.AUTO_SHOW_PRICE_DROP_PLUS_COUPONS||e===re.AUTO_SHOW_CASHBACK_PDP_PLUS_COUPONS||e===re.AUTO_SHOW_CAMPAIGN_AWARENESS_NOTIFICATION||e===re.AUTO_SHOW_POST_PURCHASE_TRACKING||e===re.AUTO_SHOW_LOWER_PRICE_PLUS_CASHBACK_PLUS_COUPONS||e===re.AUTO_SHOW_ARTICLES_CASHBACK_NOTIFICATION||e===re.AUTO_SHOW_PERSONALIZED_CASHBACK_ADDRESSBAR||e===re.AUTO_SHOW_DISCOVER_NOTIFICATION||e===re.AUTO_SHOW_CJK_COUPON_FOUND||e===re.AUTO_SHOW_CJK_PRICE_DROP)return!0}return!1}isSearchPage(){const e=this.flyoutData.dataStoreModule.ApiData?.retailerData?.searchQueryUrlRegex,t=this.flyoutData.common.lastCommittedURL;if(e&&t){const i=new RegExp(e).exec(t);return i&&1===i.length}return!1}createProductImage(e,t,i,o,a){const r=kt("DIV"),n=kt("DIV");return this.setContainerStyles(r,e,t,a),this.setGrayOverlayStyles(n,e,t),this.setImageStyles(i,e,t,o),r.appendChild(i),a||r.appendChild(n),r}createNotificationModule(e,t,i){const o=new os;return o.element=e,o.name=t,o.moduleInterface=i,o}sendFlyoutUpdateEvent(e,t){$t.queueUpdate((()=>{const i=new CustomEvent(fi.onDataUpdate,{detail:{moduleType:t}});e.dispatchEvent(i)}))}async logMuidNotificationShown(e,t){if(!e||!t)return Promise.resolve(!1);const i={Muid:e,NotificationType:t,Timestamp:(new Date).toISOString()};return fetch("https://www.bing.com/api/shopping/v1/savings/user/logNotification",{body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then((async e=>200===e.status)).catch((e=>!1))}seeMoreClickHandler(e,t,i,o,a,r){const n=je.IsKeyboardClick(e);i(t,!0,n,a,r),o.remove(),$t.queueUpdate((()=>{const e=t.shadowRoot;if(e){const t=e.querySelector(".action");t&&(t.style.display="none")}}))}switchShoppingTab(e){if(x.isExperimentActive(w.singleScrollingShoreline))return void this.switchSingleScrollingShoppingTab(e);const t=window.document.querySelector("#shoppingTab");t&&t.activeid!==e&&(t.activeid=e)}switchSingleScrollingShoppingTab(e){const t=e===Ve.Home?Ve.MyShopping:Ve.CouponsSavings;globalThis.singleScrollingActiveTab=t}setFocusAfterDeletion(e,t,i,o,a){const r=e.querySelector(i),n=e.querySelector(a);let s=-1;return t+1<r?.childElementCount||t+1===r?.childElementCount&&null!==n?s=t:t+1===r?.childElementCount&&(s=t-1),-1===s&&$t.queueUpdate((()=>{const e=document.querySelector(o);e&&e.focus()})),s}createCommissionArrow(e,t=!1,i,o,a,r,n){const s=kt("DIV");s.className="imgCBTag",s.setAttribute("aria-hidden","true"),s.style.float="left",s.style.marginRight="-1px";const c=kt("DIV");c.className="imgCBTag",c.setAttribute("aria-hidden","true"),c.style.float="left";const l=kt("span");if(l.className="spanCommissionValue",l.style.paddingLeft="1px",t&&e){const t=this.createSplitPrice(e,a,i);l.append(t)}else{const t=e??this.retrieveCashBackAmount().cashBackAmount;l.textContent=n?`${a}${t}`:t}switch(i){case ss.XSmall:l.className="spanCommissionValueXSmall",s.innerHTML=this.commonAssets.getXSmallTagLeft(),s.style.height="16px",c.innerHTML=this.commonAssets.getXSmallTagRight(),c.style.height="16px";break;case ss.Small:l.className="spanCommissionValueSmall",s.innerHTML=this.commonAssets.getSmallTagLeft(),s.style.height="20px",c.innerHTML=this.commonAssets.getSmallTagRight(),c.style.height="20px";break;case ss.Medium:s.innerHTML=this.commonAssets.getMediumTagLeft(),s.style.height="24px",c.innerHTML=this.commonAssets.getMediumTagRight(),c.style.height="24px";break;case ss.Large:l.className="spanCommissionValueLarge";default:s.innerHTML=this.commonAssets.getLargeTagLeft(),s.style.height="30px",c.innerHTML=this.commonAssets.getLargeTagRight(),c.style.height="30px"}const u=kt("DIV");return u.className=r?"divPdpEstimateCommissionValue":"divCommissionValue",u.appendChild(s),u.appendChild(l),u.appendChild(c),o&&o(u),u}retrieveCashBackAmount(e,t=!1,i){let o="";const a=i??this.flyoutData.dataStoreModule.CashBackData?.highestCashBackCategory;let r,n,s="$";if(a?.commissionType&&!t){r=a.commissionType,n=a.commissionValue;const e=je.GetMarket(this.flyoutData.dataStoreModule.ApiData?.market,this.flyoutData.dataStoreModule.ApiData?.retailerData?.exclusiveMarket);s=ze.GetCurrencyFromMarket(e)??s}else e&&e?.commissionType?(r=e.commissionType,n=e.commissionValue,s=e.adsCurrencySymbol):e&&e?.adsCashback?.length>0&&(r=e.adsCashback[0].commissionType,n=e.adsCashback[0].commissionValue,s=e.adsCashback[0].adsCurrencySymbol);if(s=ze.ValidateCurrencySymbol(s),"%"===r)o=`${n}%`;else if("flat"===r)if(i)o=`${s}${Math.floor(n)}`;else{o=`${s}${this.formatPrice(n)||Math.floor(n)}`}return{cashBackAmount:o,currencySymbol:s}}createCloseButton(){const e=kt("fluent-button");e.ariaLabel=this.flyoutData.strings.commonClose,e.appearance="stealth";const t=kt("DIV");return t.style.display="flex",t.style.alignContent="center",t.setAttribute("aria-hidden","true"),t.innerHTML=this.commonAssets.getCloseButton(),e.appendChild(t),e}getImageSrc(e){let t,i=e?.ProductDetails?.extractedImage??e?.ProductDetails?.base64ProductImage??e?.ProductDetails?.imageUrl;if(!i){const e=new $e(n.PriceHistoryNoImage);this.logModule.LogInfoEvent(o.EdgeFlyoutStatus,"Price history - no image",e)}if(i)if(!e?.ProductDetails?.extractedImage&&e?.ProductDetails?.base64ProductImage)t=`data:image/png;base64,${i}`;else try{i.toString().startsWith("http")||(i="https://"+i),t=i}catch(e){}return t||(t=this.flyoutData.common.resourcesEndpoint+"common/defaultProduct.svg"),t}makeHtmlElementKeyboardClickable(e,t){e.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||t(e)}))}handleCjkSectionAsTopModuleStyle(e){if(e){const t=e.shadowRoot?.querySelector("fluent-accordion-item");t&&t.classList.add("cjk-region-top")}}createSplitPrice(t,i="$",o){const a=kt("div");a.style.display="inline-flex",a.style.justifyContent="center";const r=kt("span"),n=ze.BreakDownPrice(`${t}`);if("object"==typeof n){const t=kt("span");t.className=o===ss.Medium?"splitPriceSmall":"splitPrice",t.textContent=ze.ValidateCurrencySymbol(i),r.textContent=n.dollars;const s=kt("span");s.className=o===ss.Medium?"splitPriceSmall":"splitPrice",s.textContent=e(n.cents)?"00":n.cents,a.appendChild(t),a.appendChild(r),a.appendChild(s)}else r.textContent=`${i}${n}`,a.appendChild(r);return a}setImageBackgroundStyles(e,t,i){try{const o=new Image;o.crossOrigin="anonymous",o.src=e.src,o.onload=()=>{const a=document.createElement("canvas");a.width=o.width,a.height=o.height,a.getContext("2d")?.drawImage(o,0,0,o.width,o.height);const r=a.getContext("2d")?.getImageData(0,0,1,1).data;((r&&255===r[0]&&255===r[1]&&255===r[2])??!1)||(e.style.minWidth=`${t}px`,e.style.minHeight=`${i}px`,e.style.maxWidth="",e.style.maxHeight="")},e.style.maxWidth=t-10+"px",e.style.maxHeight=i-10+"px"}catch(o){e.style.maxWidth=t-10+"px",e.style.maxHeight=i-10+"px"}}applyFluentDesignStyles(e){const t=this.getFluentDesignElement(e);t&&(this.setFluentDesignFillColor(t),this.setFluentDesignDirection(t),this.flyoutData.common.isPane&&t.removeAttribute("role"))}getFluentDesignElement(e){return e||document.querySelector("fluent-design-system-provider")}setFluentDesignFillColor(e){this.isDarkMode()?(e.setAttribute("fill-color","#3b3b3b"),hr.setValueFor(e,.23)):(e.setAttribute("fill-color","#FFFFFF"),hr.setValueFor(e,$a.LightMode))}setFluentDesignDirection(e){this.flyoutData.common.currentDirection===be.RTL?e.style.direction="rtl":e.style.direction="ltr"}applyWrapperStyles(e,t){const i=this.getWrapperElement(t);i&&(this.applyStylesToWrapper(i,e),this.flyoutData.common.isCJKEnabled&&this.flyoutData.common.openedWith===we.Hover?i.classList.add("ms-edge-shopping-489"):this.applyExperimentClassToWrapper(i))}applyStylesToWrapper(e,t){this.shouldRenderSmallNotification()?this.applyStyles(e,t.getStyles()+t.getSmallerNotificationCssStyles(),void 0,t.getDarkModeStyles()):this.applyStyles(e,t.getStyles(),void 0,t.getDarkModeStyles())}applyExperimentClassToWrapper(e){x.isExperimentActive(w.showPaymentOptions)&&e.classList.add("ms-edge-shopping-650")}getWrapperElement(e){return e||document.querySelector("#divContentWrapper")}styleModulesHeader(e,t,i){const o=t.element,a=t.name;if(0===e&&o.expanded){let e=!1;const r=this.flyoutData.dataStoreModule.CashBackData;a===Ue.PRODUCTHISTORY||a===Ue.GROCERY_CASHBACK||a===Ue.ITEMIZED_CASHBACK||a===Ue.ABANDONED_CART||a===Ue.TRENDING_COUPONS||a===Ue.ACTIVE_RETAILER_INBOX_COUPONS||a===Ue.AX_SHOPPING_NAV||a===Ue.DISCOVER_CHAT_CHIPS||a===Ue.COUPON&&r?.canRenderCashback&&!r?.isCashBackActivated||i.classList.contains("isStoryBook")&&!i.classList.contains("isPolePositionStory")||((!this.flyoutData.common.isCJKEnabled||a!==Ue.PRICEHISTORY&&a!==Ue.PRICECOMPARISON&&a!==Ue.CJK_SIMILAR_PRODUCTS&&a!==Ue.COUPON)&&(t.element.hideTitle=!0),e=!0),e&&(a!==Ue.PRODUCTHISTORY&&a!==Ue.ABANDONED_CART&&a!==Ue.TRENDING_COUPONS&&a!==Ue.AX_SHOPPING_NAV||!this.flyoutData.common.isPane)||i.classList.contains("isStoryBook")&&!i.classList.contains("isPolePositionStory")||(o.accordion=!1,o.classList.add("accordionPadding")),o.style.marginTop="0px"}}setContainerStyles(e,t,i,o){e.className="divProductImageContainer",e.style.width=`${t}px`,e.style.height=`${i}px`,e.style.borderRadius=o?"0px":t>75?"8px":"4px"}setGrayOverlayStyles(e,t,i){e.className="divProductImageAlpha",e.style.width=`${t}px`,e.style.height=`${i}px`}setImageStyles(e,t,i,o){e.classList.add("imgProduct"),o?e.setAttribute("aria-label",o):e.setAttribute("aria-hidden","true"),this.setImageBackgroundStyles(e,t,i)}};class ls{static GetErrorString(e){return`${e?.name??""} ${e?.message??""} ${e?.stack??""}`}static GetPopupOriginationFromPageValidations(e){switch(e){case Xe.ABANDONED_CART:return re.AUTO_SHOW_AWARENESS_EXPANSION;case Xe.ATTAINABLE_COUPONS:return re.AUTO_SHOW_ATTAINABLE_COUPONS;case Xe.AUTOS_MARKETPLACE:return re.AUTO_SHOW_AUTOS_MARKETPLACE;case Xe.COUPONS_CLIPPING:return re.AUTO_SHOW_COUPONS_CLIPPING;case Xe.EXCLUSIVE_COUPONS:return re.AUTO_SHOW_SOCIAL_COUPONS;case Xe.GROCERY_ITEMIZED_CASHBACK:return re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK;case Xe.SPB_CASHBACK_LANDING:return re.AUTO_SHOW_SPB_CASHBACK_LANDING;case Xe.GROCERY_ITEMIZED_CASHBACK_LANDING:return re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK_LANDING;case Xe.OTHER_SELLERS_CONFIRMATION:return re.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER;case Xe.OTHER_SELLERS:case Xe.OTHER_SELLERS_TRIGGER:return re.AUTO_SHOW_OTHER_SELLERS;case Xe.PRINT_GROCERY:return re.AUTO_SHOW_RECOMMENDATIONS;case Xe.PRODUCT_TRACKING_OUT_OF_STOCK:return re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK;case Xe.REWARDS_GIFT_CARD:return re.AUTO_SHOW_GIFT_CARD;case Xe.AA_CONSENT:return re.AA_CONSENT;default:return null}}static GetFeatureFromPopupOrigination(e){switch(e){case re.AUTO_SHOW_COUPONS_CHECKOUT:case re.AA_CONSENT:case re.AUTO_SHOW_BING_SEARCH:return ne.COUPONS_CHECKOUT;case re.AUTO_SHOW_URL_PARAM_REBATES:return ne.REBATES_BING;case re.AUTO_SHOW_AUTOS_MARKETPLACE:return ne.AUTOS_MARKETPLACE;case re.AUTO_SHOW_COUPONS_CLIPPING:return ne.COUPONS_CLIPPING;case re.AUTO_SHOW_LOWER_PRICE_FOUND:case re.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON:return ne.PRICE_COMPARE;case re.AUTO_SHOW_PRICE_HISTORY:case re.AUTO_SHOW_URL_PARAM_PRICE_HISTORY:return ne.PRICE_HISTORY;case re.AUTO_SHOW_REBATES_CONFIRMATION:return ne.REBATES_CONFIRMATION;case re.AUTO_SHOW_REBATES:return ne.REBATES_BING;case re.AUTO_SHOW_REBATES_ORGANIC:case re.AUTO_SHOW_REBATES_ORGANIC_NEW:return ne.REBATES_ORGANIC;case re.AUTO_SHOW_REBATES_CHECKOUT:return ne.REBATES_CHECKOUT;case re.AUTO_SHOW_PERSONALIZED_CASHBACK||re.AUTO_SHOW_PERSONALIZED_CASHBACK_ADDRESSBAR:return ne.PERSONALIZED_CASHBACK;case re.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION:return ne.PERSONALIZED_CASHBACK_CONFIRMATION;case re.AUTO_SHOW_EXPRESS_CHECKOUT:return ne.EXPRESS_CHECKOUT;case re.AUTO_SHOW_SERVER_DRIVEN_REWARDS:return ne.REWARDS;case re.AUTO_SHOW_OTHER_SELLERS:case re.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER:return ne.OTHER_SELLER;case re.AUTO_SHOW_PROFESSIONAL_REVIEWS:return ne.REVIEWS;case re.AUTO_SHOW_SOCIAL_COUPONS:return ne.EXCLUSIVE_COUPONS;case re.AUTO_SHOW_GUEST_DOMAIN_COUPONS:return ne.GUEST_COUPONS;case re.AUTO_SHOW_SUSTAINABILITY_LANDING:return ne.SUSTAINABILITY_LANDING;case re.AUTO_SHOW_SUSTAINABILITY_PURCHASE:return ne.SUSTAINABILITY_PURCHASE;case re.AUTO_SHOW_PACKAGE_TRACKING:return ne.PACKAGE_TRACKING;case re.AUTO_SHOW_ATTAINABLE_COUPONS:return ne.ATTAINABLE_COUPONS;case re.AUTO_SHOW_GIFT_CARD:return ne.REWARDS_GIFT_CARD;case re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK:return ne.GROCERY_ITEMIZED_CASHBACK;case re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK:return ne.OUT_OF_STOCK;case re.AUTO_SHOW_AWARENESS_EXPANSION:return ne.ABANDONED_CART;case re.AUTO_SHOW_VIRTUAL_CARD:return ne.VIRTUAL_CARD;case re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK_LANDING:return ne.GROCERY_ITEMIZED_CASHBACK_LANDING;case re.AUTO_SHOW_SPB_CASHBACK_LANDING:return ne.SPB_CASHBACK_LANDING;case re.OPEN_FLYOUT_FROM_EDGE_DRIVER_EC:return ne.EXPRESS_CHECKOUT;case re.AUTO_SHOW_RECOMMENDATIONS:return ne.RECOMMENDATIONS;default:return ne.NONE}}static GetCommonPopupOriginationList(){return[re.AUTO_SHOW_BING_SEARCH,re.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION,re.AUTO_SHOW_BING_CAMPAIGN,re.AUTO_SHOW_AOC]}static GetPopupOriginationWhiteList(){return[re.AUTO_SHOW_REBATES_CONFIRMATION,re.AUTO_SHOW_REBATES_DEACTIVATED,re.AUTO_SHOW_REBATES,re.AUTO_SHOW_REBATES_ACTIVATION_FAILED,re.AUTO_SHOW_REBATES_SWITCHED_TO_MSA,re.AUTO_SHOW_COUPONS_CHECKOUT_MICRO_NOTIFICATION,re.AUTO_SHOW_REWARDS_ACTIVATION_FAILED,re.AUTO_SHOW_REWARDS_SWITCHED_TO_MSA,re.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION,re.AUTO_SHOW_PERSONALIZED_CASHBACK,re.AUTO_SHOW_SUSTAINABILITY_LANDING,re.AUTO_SHOW_SUSTAINABILITY_PURCHASE,re.AUTO_SHOW_SAN_CONSENT_CONFIRMATION,re.AUTO_SHOW_CODEX_MICRO_NOTIFICATION,re.AUTO_SHOW_DISCOVER_MICRO_NOTIFICATION,re.OPEN_FLYOUT_AX_SHOPPING]}static GetMicroNotificationPopuporignation(e){switch(e){case re.AUTO_SHOW_COUPONS_CHECKOUT:return re.AUTO_SHOW_COUPONS_CHECKOUT_MICRO_NOTIFICATION;case re.AUTO_SHOW_AWARENESS_EXPANSION:return re.AUTO_SHOW_AWARENESS_EXPANSION;default:return null}}static GetMicroNotificationPopupOriginationList(){return[re.AUTO_SHOW_COUPONS_CHECKOUT_MICRO_NOTIFICATION,re.AUTO_SHOW_AWARENESS_EXPANSION,re.AUTO_SHOW_RECOMMENDATIONS_MICRO_NOTIFICATION,re.AUTO_SHOW_PRODUCT_TRACKING_MICRO_NOTIFICATION,re.AUTO_SHOW_PERSONALIZED_CASHBACK_MICRO_NOTIFICATION,re.AUTO_SHOW_PRICE_HISTORY_MICRO_NOTIFICATION]}static getFriendlyFeatureName(e,t,i,o){if(o===re.AUTO_SHOW_ARTICLES_CASHBACK_NOTIFICATION)return e.strings.articlesCashbackFeatureName;if(o===re.AUTO_SHOW_COUPONS_CLIPPING)return e.strings.clippingFeatureName;if(o===re.AUTO_SHOW_GIFT_CARD)return e.strings.giftFeatureName;if(o===re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK||o===re.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK_LANDING)return e.strings.groceriesFeatureName;if(o===re.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER||o===re.AUTO_SHOW_OTHER_SELLERS)return e.strings.similarSellerFeatureName;if(o===re.AUTO_SHOW_LOWER_PRICE_FOUND||o===re.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON)return e.strings.pcFeatureName;if(o===re.AUTO_SHOW_PACKAGE_TRACKING||o===re.AUTO_SHOW_PACKAGE_TRACKING_MICRO_NOTIFICATION)return e.strings.packageTrackingFeatureName;if(o===re.AUTO_SHOW_PERSONALIZED_CASHBACK||o===re.AUTO_SHOW_REBATES||o===re.AUTO_SHOW_REBATES_ORGANIC||o===re.AUTO_SHOW_REBATES_ORGANIC_NEW||o===re.AUTO_SHOW_REBATES_CHECKOUT||o===re.AUTO_SHOW_REBATES_PDP||o===re.AUTO_SHOW_SPB_CHECK_OUT_PAGE_NOTIFICATION||o===re.AUTO_SHOW_URL_PARAM_REBATES||o===re.AUTO_SHOW_SPB_CASHBACK_LANDING||o===re.AUTO_SHOW_SPB_MICRO_NOTIFICATION||o===re.AUTO_SHOW_SPB_NUDGE_MICRO_NOTIFICATION||o===re.AUTO_SHOW_ADD_SPB_TO_CART_MICRO_NOTIFICATION||o===re.AUTO_SHOW_ORGANIC_CASHBACK_MICRO_NOTIFICATION||o===re.AUTO_SHOW_MOMENT_IN_TIME||o===re.AUTO_SHOW_PERSONALIZED_CASHBACK_MICRO_NOTIFICATION||o===re.AUTO_SHOW_PERSONALIZED_CASHBACK_ADDRESSBAR)return e.strings.cbFeatureName;if(o===re.AUTO_SHOW_PRICE_HISTORY||o===re.AUTO_SHOW_URL_PARAM_PRICE_HISTORY||o===re.AUTO_SHOW_PRICE_HISTORY_MICRO_NOTIFICATION)return e.strings.phFeatureName;if(o===re.AUTO_SHOW_PRICE_DROP_PLUS_COUPONS)return e.strings.phPlusCouponsFeatureName;if(o===re.AUTO_SHOW_CASHBACK_PDP_PLUS_COUPONS)return e.strings.cashbackPlusCouponsFeatureName;if(o===re.AUTO_SHOW_PRICE_DROP_PLUS_CASHBACK)return e.strings.cashbackPlusPriceDropFeatureName;if(o===re.AUTO_SHOW_LOWER_PRICE_PLUS_CASHBACK_PLUS_COUPONS)return e.strings.pcPlusCashbackPlusCouponsFeatureName;if(o===re.AUTO_SHOW_CAMPAIGN_PDP_NOTIFICATION||o===re.AUTO_SHOW_CAMPAIGN_AWARENESS_NOTIFICATION)return e.strings.dealDays;if(o===re.AUTO_SHOW_PROFESSIONAL_REVIEWS)return e.strings.rrFeatureName;if(o===re.AUTO_SHOW_SUSTAINABILITY_LANDING||o===re.AUTO_SHOW_SUSTAINABILITY_PURCHASE)return e.strings.sustainabilityFeatureName;if(o===re.AUTO_SHOW_VIRTUAL_CARD)return e.strings.virtualCardFeatureName;if(o===re.AUTO_SHOW_COUPONS_CHECKOUT)return x.isExperimentActive(w.newNotificationManagementUI)?e.strings.autoApplyFeatureName:e.strings.couponFeatureName;if(o===re.AUTO_SHOW_BING_SEARCH||o===re.AUTO_SHOW_ATTAINABLE_COUPONS||o===re.AUTO_SHOW_AWARENESS_EXPANSION||o===re.AA_CONSENT||o===re.AUTO_SHOW_TRENDING_COUPONS)return e.strings.couponFeatureName;if(o===re.AUTO_SHOW_RECOMMENDATIONS||o===re.AUTO_SHOW_RECOMMENDATIONS_MICRO_NOTIFICATION)return e.strings.recommendationsFeatureName;if(o===re.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION){const o=t.getPwiloPopupOrigination(i);if(o){if(o===re.AUTO_SHOW_ABANDONED_CART)return e.strings.abandonedCartFeatureName;if(o===re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK||o===re.AUTO_PRODUCT_TRACKING_EXP_PRICE_DROP||o===re.AUTO_PRODUCT_TRACKING_IMP_PRICE_DROP||o===re.AUTO_SHOW_PRODUCT_TRACKING_BACK_IN_STOCK)return e.strings.productTrackingFeatureName}return e.strings.productTrackingFeatureName}return o===re.AUTO_SHOW_EXPRESS_CHECKOUT||o===re.OPEN_FLYOUT_FROM_EDGE_DRIVER_EC?e.strings.checkoutFeatureName:o===re.AUTO_SHOW_GUEST_DOMAIN_COUPONS?e.strings.pintFeatureName:o===re.AUTO_SHOW_SOCIAL_COUPONS?e.strings.ytFeatureName:o===re.AUTO_SHOW_AUTOS_MARKETPLACE?e.strings.autosFeatureName:o===re.AUTO_SHOW_PRODUCT_TRACKING_MICRO_NOTIFICATION||o===re.AUTO_PRODUCT_TRACKING_EXP_PRICE_DROP||o===re.AUTO_PRODUCT_TRACKING_IMP_PRICE_DROP||o===re.AUTO_SHOW_PRODUCT_TRACKING_BACK_IN_STOCK||o===re.AUTO_PRODUCT_TRACKING_OUT_OF_STOCK?e.strings.productTrackingFeatureName:o===re.AUTO_SHOW_SAN_CONSENT_CONFIRMATION?e.strings.sanConsentFeatureName:o===re.AUTO_SHOW_ABANDONED_CART?e.strings.abandonedCartFeatureName:o===re.AUTO_SHOW_PRODUCT_BEST_COUPON_CONSENT?e.strings.productBestCouponFeatureName:o===re.AUTO_SHOW_AX_SHOPPING?e.strings.axShopFeatureName:o===re.CJK_OPEN_HUB_ICON?e.strings.cjkOpenHubIconName:o===re.HOVER_BUTTON_SHOW_FLYOUT?e.strings.cjkHoverButtonShowFlyoutName:o===re.AUTO_SHOW_CJK_PRICE_DROP?e.strings.cjkPriceDrop:o===re.AUTO_SHOW_CJK_COUPON_FOUND?e.strings.cjkCouponFound:o===re.AUTO_SHOW_IBC_UPSELL?e.strings.inboxCouponsFeatureName:o===re.AUTO_SHOW_POST_PURCHASE_TRACKING||o===re.AUTO_SHOW_AMAZON_SEARCH_PC?e.strings.postPurchaseTrackingFeatureName:o===re.AUTO_SHOW_SERVER_DRIVEN_REWARDS?e.strings.rewardsFeatureName:o===re.AUTO_SHOW_DISCOVER_NOTIFICATION?e.strings.discoverFeatureName:o===re.AUTO_SHOW_TRAVEL_NOTIFICATION_CHEAPER_FLIGHTS?e.strings.travelCheaperFlightsFeatureName:o===re.AUTO_SHOW_COUPONS_BACKGROUND_AUTO_APPLY?e.strings.backgroundAutoApplyFeatureName:o===re.AUTO_SHOW_INBOX_PRICE_MATCH_NOTIFICATION?e.strings.inboxSavingsFeatureName:""}static isAutoOpenEnabledForFeature(e,t,i,a){if(x.isExperimentActive(w.autoShowControlForFeature)&&e){if(x.isExperimentActive(w.autoOpenControllerScript)){const r=i.isPopupOriginationBlockedByPref(e),s=ls.GetFeatureFromPopupOrigination(e),c=(t.common.autoshowFeaturePref&s)===s;if(r!==c&&e<63){const l={blockedByAoc:r,blockedByClientPref:c,popupOrigination:e,feature:s},u=new $e(n.UserPrefMismatch,void 0,void 0,t.common.domain,JSON.stringify(l));if(a.LogInfoEvent(o.EdgeFlyoutStatus,"",u),c)return i.setUserPreference(!1,e),!c}return!r}{const i=ls.GetFeatureFromPopupOrigination(e);if(void 0!==t.common.autoshowFeaturePref)return(t.common.autoshowFeaturePref&i)!==i}}return t.common.isNotificationEnabled}static isAutoOpenEnabledByAOCForFeature(e,t,i){if(x.isExperimentActive(w.autoShowControlForFeature)&&e){return!i.isPopupOriginationBlockedByPref(e)}return t.common.isNotificationEnabled}static isSafariClient(e){return e.common.isSafariClient}constructor(e,t,i,o){M(this,"pageHandlerModule",void 0),M(this,"logModule",void 0),M(this,"viewModulesUtilities",void 0),M(this,"commonAssets",void 0),M(this,"storageHandler",void 0),M(this,"fixedHeaderUtilities",void 0),M(this,"footerUtilities",void 0),M(this,"tooltipUtilities",void 0),M(this,"telemetryHandler",void 0),M(this,"autoOpenControllerUtilities",void 0),M(this,"dataValidationUtilities",void 0),M(this,"discoverTelemetryHandler",void 0),this.pageHandlerModule=e,this.logModule=t,this.storageHandler=new Ui(e,i.dataLoader,t),this.fixedHeaderUtilities=new Bt,this.viewModulesUtilities=new cs(i,t,o),this.autoOpenControllerUtilities=new St,this.autoOpenControllerUtilities.init(i,this.logModule,this.storageHandler,Ze.EdgeImpressionId),this.footerUtilities=new Ei(i,this.viewModulesUtilities,e,t,this.autoOpenControllerUtilities),this.telemetryHandler=new no(i,this.viewModulesUtilities,e,t),this.dataValidationUtilities=new Ot(i,t),this.commonAssets=o,this.tooltipUtilities=new lo(i,this.viewModulesUtilities,this.commonAssets,this.footerUtilities),this.discoverTelemetryHandler=new _t(i,t,e)}}var us=ls;var ds=class{constructor(){M(this,"hasPDPDataArrived",void 0),M(this,"isBingAdReferred",void 0),M(this,"isAutosSupportedDomain",void 0),M(this,"isCjkScenario",void 0)}};let hs=function(e){return e.CheckoutPageValidationError="CheckoutPageValidationError",e.LogScriptTelemetry="LogScriptTelemetry",e.PageStatus="PageStatus",e.CheckoutPageGMV="CheckoutPageGMV",e.ExpressCheckoutPageGMV="ExpressCheckoutPageGMV",e.CheckoutPageValidationStatus="CheckoutPageValidationStatus",e.PurchaseCompleted="PurchaseCompleted",e.SetStorageValue="SetStorageValue",e.GuestDomain="GuestDomain",e.BackgroundAutoApplyStateValid="BackgroundAutoApplyStateValid",e.PlatformExpansionDomain="PlatformExpansionDomain",e.UpdateAddressBar="UpdateAddressBar",e.RecordShoppingUserEngagement="RecordShoppingUserEngagement",e.RecordShoppingUserAction="RecordShoppingUserAction",e.GetCashBack="GetCashBack",e.NavigateToUrlBackground="NavigateToUrlBackground",e.StartEdgeDriver="StartEdgeDriver",e.UpdateLoadTimeData="UpdateLoadTimeData",e}({});class ps{static CreateInstance(e){ps.instance=new ps(e)}static async SetTag(e,t){ps.instance&&t&&ps.instance.clarityEnabled&&ps.instance.WaitForClarityToLoad().then((()=>{window[ps.clarityKey]("set",e,t)}))}static ReportClientInfo(e,t,i){ps.reportedClientContextInfo||(ps.SetTag(ps.TAGNAME_CLIENTNAME,e),ps.SetTag(ps.TAGNAME_JSVERSION,t),ps.SetTag(ps.TAGNAME_EDGEVERSION,i),ps.reportedClientContextInfo=!0)}constructor(e){M(this,"clarityEnabled",!1),(x?.isExperimentActive(w.clarity)||x?.isExperimentActive(w.clarityWithCookies))&&(this.clarityEnabled=!0)}async WaitForClarityToLoad(){for(;!window.hasOwnProperty(ps.clarityKey);)await new Promise((e=>{setTimeout(e,1e3)}))}}M(ps,"TAGNAME_DOMAIN","domain"),M(ps,"TAGNAME_FLIGHT","flight"),M(ps,"TAGNAME_VIEW","view"),M(ps,"TAGNAME_CLIENTNAME","appinfoclientname"),M(ps,"TAGNAME_JSVERSION","jsversion"),M(ps,"TAGNAME_EDGEVERSION","edgeversion"),M(ps,"clarityKey","clarity"),M(ps,"instance",void 0),M(ps,"reportedClientContextInfo",!1);var Cs=ps;var gs=class{constructor(e,t,i,o){M(this,"AppInfoClientName",void 0),M(this,"JSVersion",void 0),M(this,"BuildVersion",void 0),M(this,"EnabledServiceFlights",void 0),M(this,"MUID",void 0),this.AppInfoClientName=e,this.JSVersion=t,this.BuildVersion=i,this.EnabledServiceFlights=o,Cs.ReportClientInfo(e,t,i)}};const Ss="2.301",ms="2.935",As="1.551";var fs=class{constructor(){M(this,"BgAutoApplyInProgress",void 0),M(this,"ForegroundApplyingBestCoupon",void 0),M(this,"progressBarStartPos",void 0),M(this,"progressBarEndPos",void 0),M(this,"currentCoupon",void 0),M(this,"currentCouponIndex",void 0),M(this,"couponsTotal",void 0),M(this,"result",void 0),M(this,"expiredState",void 0),M(this,"pageUrl",void 0),M(this,"domainName",void 0),M(this,"isBgaaFinished",void 0),M(this,"hasNotifiedUser",void 0)}};class Os{static Now(){return Math.round((new Date).getTime()/1e3)}constructor(e,t){M(this,"Lifetime",void 0),M(this,"Timestamp",void 0),this.Lifetime=e,this.Timestamp=t||Os.Now()}Expired(){return Os.Now()-this.Timestamp>=this.Lifetime}}var Is=Os;class Ts extends Is{constructor(...e){super(...e),M(this,"StartTime",void 0),M(this,"CouponsApplied",void 0),M(this,"ContextID",void 0),M(this,"InitialPrice",void 0),M(this,"TrueInitialPrice",void 0),M(this,"UnremovedDiscountSum",void 0),M(this,"BestCoupon",void 0),M(this,"MaxDiscount",void 0),M(this,"CouponResults",void 0),M(this,"ImpressionId",void 0),M(this,"StringifiedMap",void 0),M(this,"ImportOptions",void 0),M(this,"Currency",void 0),M(this,"PageCurrency",void 0),M(this,"CashBackActive",void 0),M(this,"AppliedCoupon",void 0),M(this,"BackgroundAACancelled",void 0),M(this,"BackgroundAAStatus",void 0),M(this,"SuggestedCoupons",void 0),M(this,"ExtractedInputBox",void 0),M(this,"ExtractedApplyButton",void 0),M(this,"ExtractedOrderTotalElement",void 0),M(this,"CartBlockedCoupons",void 0),M(this,"HideProgressOverlay",void 0)}static CreateNew(e,t){const i=new Ts(Ts.fourMinutesExpiryInSeconds);return i.ContextID=e,i.StartTime=Date.now(),i.CouponsApplied=new Map,i.UnremovedDiscountSum=0,i.MaxDiscount=0,i.CouponResults=[],i.BackgroundAAStatus=new fs,t&&(i.ImpressionId=t),i}static CreateFromObject(e){if(e&&null!==e.ContextID&&void 0!==e.ContextID){const t=Ts.CreateNew(e.ContextID);if(e.StringifiedMap){JSON.parse(e.StringifiedMap).forEach((e=>{const i=e[0],o=e[1];t.CouponsApplied.set(i,o)}))}return e.BestCoupon&&(t.BestCoupon=e.BestCoupon),null!==e.InitialPrice&&void 0!==e.InitialPrice&&(t.InitialPrice=e.InitialPrice),e.TrueInitialPrice&&(t.TrueInitialPrice=e.TrueInitialPrice),e.UnremovedDiscountSum&&(t.UnremovedDiscountSum=e.UnremovedDiscountSum),null!==e.MaxDiscount&&void 0!==e.MaxDiscount&&(t.MaxDiscount=e.MaxDiscount),e.CouponResults&&(t.CouponResults=e.CouponResults),e.ImpressionId&&(t.ImpressionId=e.ImpressionId),e.ImportOptions&&(t.ImportOptions=e.ImportOptions),e.CashBackActive&&(t.CashBackActive=e.CashBackActive),e.Currency&&(t.Currency=e.Currency),e.PageCurrency&&(t.PageCurrency=e.PageCurrency),e.StartTime&&(t.StartTime=e.StartTime),e.AppliedCoupon&&(t.AppliedCoupon=e.AppliedCoupon),e.BackgroundAACancelled&&(t.BackgroundAACancelled=e.BackgroundAACancelled),e.BackgroundAAStatus&&(t.BackgroundAAStatus=e.BackgroundAAStatus),e.SuggestedCoupons&&(t.SuggestedCoupons=e.SuggestedCoupons),e.ExtractedInputBox&&(t.ExtractedInputBox=e.ExtractedInputBox),e.ExtractedApplyButton&&(t.ExtractedApplyButton=e.ExtractedApplyButton),e.ExtractedOrderTotalElement&&(t.ExtractedOrderTotalElement=e.ExtractedOrderTotalElement),e.CartBlockedCoupons&&(t.CartBlockedCoupons=e.CartBlockedCoupons),e.HideProgressOverlay&&(t.HideProgressOverlay=e.HideProgressOverlay),t}return null}StringifyMap(){this.StringifiedMap=JSON.stringify(Array.from(this.CouponsApplied.entries()))}ToString(){return this.StringifyMap(),JSON.stringify(this)}}M(Ts,"fourMinutesExpiryInSeconds",480);var _s=Ts;class Es{static HasVisibleElement(e){return Es.CountVisibleElements(e)>0}static CountVisibleElements(e){if(!Oe.IsValidDataField(e))return 0;const t=e.split(";");for(const e of t){const t=Es.CountVisibleElementsSingleSel(e);if(t>0)return t}return 0}static RunQuerySelectorAll(e,t){if(!Oe.IsValidDataField(e))return[];const i=e.split("<");let o;o=t?t.querySelectorAll(i[0]):document.querySelectorAll(i[0]);for(const e of i.slice(1)){const t=o[0]?.shadowRoot;if(!t)return[];o=t.querySelectorAll(e)}return o}static IsElementVisible(e){return e&&e.offsetWidth>0&&e.offsetHeight>0}static GetFirstVisibleElement(e,t){if(!Oe.IsValidDataField(e))return;const i=e.split(";");for(const e of i)try{const i=Es.RunQuerySelectorAll(e,t);for(const e of i)if(Es.IsElementVisible(e))return e}catch(e){}}static GetAllVisibleElements(e){if(!Oe.IsValidDataField(e))return[];const t=e.split(";"),i=[];for(const e of t){const t=Es.RunQuerySelectorAll(e);for(const e of t)Es.IsElementVisible(e)&&i.push(e)}return i}static GetTextValue(e,t){const i=e.split(";"),o=i[0],a=Es.GetFirstVisibleElement(o,t);if(!a)return"";let r=a,n=r.innerText;if(1===i.length)r=Es.NormalizeIfSuperscripted(a),n=r.innerText;else{const e=r.cloneNode(!0);let a=i[1];const s=Es.GetFirstVisibleElement(a,r)??Es.GetFirstVisibleElement(a,t);let c="";if(s&&s.innerText){if(c="."+s.innerText,r.contains(s)){const t=Es.GetFirstMatchingElement(a,e);if(t?.innerText)e.removeChild(t);else{a.startsWith(o)&&(a=a.slice(o.length));const t=this.GetFirstMatchingElement(a,e);t?.innerText&&e.removeChild(t)}n=e?.innerText?e.innerText:n}n+=c}if(i.length>2){for(const t of i.slice(2)){const i=this.GetFirstMatchingElement(t,e);i?.innerText&&e.removeChild(i)}n=e?.innerText?e.innerText:n}n+=c}return Es.StripInvalidJSONCharacters(n)}static GetItemizedData(e,t,i){let o="";if(e&&""!==e){const a=Es.RunQuerySelectorAll(e,i);for(const e of a)e&&e.textContent&&(o+=e.textContent?.trim()+t)}return o}static StripInvalidJSONCharacters(e){return e.replace(/\n/gi,"")}static NormalizeIfSuperscripted(e){if(e&&e.innerHTML){if(e.innerHTML.toLowerCase().indexOf("</sup>")>-1)try{const t=e.cloneNode(!0),i=t.childNodes.length;for(let e=0;e<i;e++){const i=t.childNodes[e];if("SUP"===i.tagName){let e=i.innerText;const o=/[0-9\.]+/g.exec(e);if(null!==o)return e="."+o[0],i.innerText=e,t}}}catch(t){return e}}return e}static GetFirstMatchingElement(e,t){if(!Oe.IsValidDataField(e))return;const i=e.split(";");for(const e of i){const i=Es.RunQuerySelectorAll(e,t);for(const e of i)if(e)return e}}static GetAllMatchingElements(e){if(!Oe.IsValidDataField(e))return[];const t=e.split(";"),i=[];for(const e of t)try{const t=Es.RunQuerySelectorAll(e);for(const e of t)e&&i.push(e)}catch(e){}return i}static CountVisibleElementsSingleSel(e){if(!Oe.IsValidDataField(e))return 0;const t=Es.RunQuerySelectorAll(e);let i=0;for(const e of t)Es.IsElementVisible(e)&&i++;return i}}var Ps=Es;class vs{initialize(e){e.splice(0,2);try{this.initializeRuntime(e)}catch(e){return!1}return!0}raiseMessageFromHost(e){const t=e.shift();if(t)try{this.handleMessages(e,t)}catch(e){}}postMessageToHost(e,t){try{this.getNativeHandler().sendMessageToHost(e,t)}catch(e){}}}function ys(e,t,i,o){if("CheckoutPageValidation"===t){window.InitializeExposedMethods();try{const t=performance.now();"interactive"===document.readyState||"complete"===document.readyState?window.TryIsAutoApplyValid(e,i,o,t):window.addEventListener&&window.addEventListener("DOMContentLoaded",(a=>{window.CheckAndIsAutoApplyValid(e,i,o,t)})),i++}catch(e){}}else if("ExtractCheckoutPageGMV"===t)try{window.GetAndSnedExpressCheckoutGMV(e[0]??null)}catch(e){}else if("GetCashBackResponse"===t)try{window.ProcessCashBackResponse(e[0])}catch(e){}else if("WebAssistQueryResults"===t)window.ProcessWebAssistResponse(e[1]);else if("PdpValidation"===t)try{window.ProcessPdpCashBackResponse(e[0])}catch(e){}else"SharePriceComparisonData"===t||"ShareCompleteExtractionData"===t?Ns(e,!0,o):"OnGenericDealsServiceResponse"===t?window.ProcessClientRequestResponse(e):"BackgroundAutoApplyComplete"===t&&Ns(e,!1,o,t);return i}function Ns(e,t,i,o){try{if(window.AOCInitializeExposedMethods(),"interactive"===document.readyState||"complete"===document.readyState){const a=performance.now();t?"BackgroundAutoApplyComplete"===o?window.CanAutoOpenAfterBGAAComplete(i,a,o):window.CanAutoOpenAfterPDPData(e):"BackgroundAutoApplyComplete"===o?window.CanAutoOpenAfterBGAAComplete(i,a,o):window.CanAutoOpen(e,i,a)}else window.addEventListener&&window.addEventListener("DOMContentLoaded",(o=>{t?window.CheckAndCanAutoOpenAfterPDPData(e):window.CheckAndCanAutoOpen(e,i)}))}catch(e){return!1}}const Ds=new class extends vs{constructor(...e){super(...e),M(this,"initializeStartTime",performance.now()),M(this,"scriptRunNum",0)}initializeRuntime(e){let t,i;window.AutoOpenScriptInjected=!0,0!==this.scriptRunNum&&(this.initializeStartTime=performance.now()),e&&(e.length>z.enabled_features&&(t=e[z.enabled_features]),i=this.GetEnabledServiceFeatures(e)),x.Create(t,i);const o=hi();window.isAOCActive=o,ws.SetFullAOCActive(o),Ns(e,!1,this.initializeStartTime)}handleMessages(e,t){this.scriptRunNum=ys(e,t,this.scriptRunNum,this.initializeStartTime)}getNativeHandler(){return AutoOpenControllerNativeHandler}GetEnabledServiceFeatures(e){let t;return e.length>z.enabled_service_features&&e[z.enabled_service_features].length>0?t=e[z.enabled_service_features]:e.length>z.enabled_service_features_v2&&e[z.enabled_service_features_v2].length>0&&(t=e[z.enabled_service_features_v2]),t}};const Rs=new class extends vs{constructor(...e){super(...e),M(this,"initializeStartTime",performance.now()),M(this,"scriptRunNum",0),M(this,"apiResponseParam",[])}initializeRuntime(e){0!==this.scriptRunNum&&(this.initializeStartTime=performance.now()),this.apiResponseParam=e}handleMessages(e,t){let i,o;this.apiResponseParam&&(this.apiResponseParam.length>Y.enabled_features&&(i=this.apiResponseParam[Y.enabled_features]),o=this.GetEnabledServiceFeatures()),x.Create(i,o);const a=hi();ws.SetFullAOCActive(a),a||(this.scriptRunNum=ys(e,t,this.scriptRunNum,this.initializeStartTime))}getNativeHandler(){return checkoutPageValidatorNativeHandler}GetEnabledServiceFeatures(){let e;return this.apiResponseParam.length>Y.enabled_service_features&&this.apiResponseParam[Y.enabled_service_features].length>0?e=this.apiResponseParam[Y.enabled_service_features]:this.apiResponseParam.length>Y.checkout_enabled_service_features_v2&&this.apiResponseParam[Y.checkout_enabled_service_features_v2].length>0&&(e=this.apiResponseParam[Y.checkout_enabled_service_features_v2]),e}};class bs{static SetFullAOCActive(e){this.isFullAOCActive=e}static GetBoxValue(e){if(Oe.IsValidDataField(e))try{const t=bs.GetTextValue(e);return t?t.trim():t}catch(e){throw Error(e.message)}return""}static ParseBackgroundAutoApplyStateData(t){const i=bs.GetBackgroundAutoApplyStateString(t);return e(i)?null:_s.CreateFromObject(JSON.parse(i))}static GetBackgroundAutoApplyStateString(e){const t=ks.GetBackgroundAAKeyName();return"string"==typeof e[t]?e[t]:e[t]?.value}static parseDate(e){const t=e?.split(",");let i,o="";if(1===t?.length){const a=(new Date).getDate(),r=new Date;if(r.setHours(0,0,0,0),r.setDate(a+1),i=r,o=t[0].trim().split("-")[1],!o)throw new Error(`Unable to parse date: ${e}`)}else if(2===t?.length){const e=t[1].trim(),o=t[0].trim().split(" "),a=o[1].trim(),r=o[0].trim();i=new Date(`${a} ${r} ${e}`)}else if(3===t?.length){if(t[0].toLowerCase().includes("today"))i=new Date,i.setHours(0,0,0,0);else{const e=(new Date).getFullYear(),o=t[1].trim().split(" "),a=o[1].trim(),r=o[0].trim();i=new Date(`${r} ${a}, ${e}`)}if(o=t[2].trim().split("-")[1],!o)throw new Error(`Unable to parse date: ${e}`)}else i=new Date("");if(!o)return i;try{const e=this.parseHour(o);if(Number.isNaN(e))return i;i.setHours(e)}catch(e){}return i}static parseHour(e){let t=+e?.match(/\d{1,2}/i)[0];const i=e?.match(/(A|P)M/i)[0];return"pm"===i.toLowerCase()&&(t+=12),+t}static SendLogEvent(e,i,a,r,n,s,c,l){const u={Currency:n,Domain:l??je.GetDomainName(),EdgeFlyoutStatus:c?.EdgeFlyoutStatus,Metadata:c?.Metadata,PageUrl:je.GetPageUrl(),StartingPrice:r??-1,Status:a};bs.SendLogEventMessage(u,s??o.CheckoutPageValidation,e,i,t.Information)}static SendLogEventMessage(e,t,i,o,a){const r={};r.JsonData=JSON.stringify(e),r.EventType=t,r.LogLevel=a,r.Message=o,r.ClientContext=new gs(_e.GetClientName(),Ss,_e.GetBuildVersion(),_e.enabledServiceFlights),i&&(r.ImpressionId=i);const n=[JSON.stringify(r)];bs.SendMessage(hs.LogScriptTelemetry,n)}static SendMessage(e,t){this.isFullAOCActive?Ds.postMessageToHost(e,t):Rs.postMessageToHost(e,t)}static StartEdgeDriver(e,t){this.Invoke(hs.StartEdgeDriver,e,t)}static SendStorageMessage(e,t){bs.SendMessage(hs.SetStorageValue,[e,t])}static DeleteKeyFromPersistentStorage(e){bs.SendStorageMessage(e,JSON.stringify({value:null}))}static SendNavigateToUrlMessage(e){bs.SendMessage(hs.NavigateToUrlBackground,[e,e])}static SendStringStorageMessage(e,t){bs.SendMessage(hs.SetStorageValue,[e,JSON.stringify({value:t})])}static SendNumberStorageMessage(e,t){bs.SendMessage(hs.SetStorageValue,[e,JSON.stringify({value:t})])}static SendBooleanStorageMessage(e,t){bs.SendMessage(hs.SetStorageValue,[e,JSON.stringify({value:t})])}static SendPurchaseConfirmationLog(e,i,a,r,n,s){const c={CartId:n,Currency:s?.Currency,Domain:e,PageCurrency:s?.PageCurrency,PageUrl:je.GetPageUrl(),StartingPrice:s?.OrderTotal??-1,Status:r};bs.SendLogEventMessage(c,o.PurchaseConfirmation,i,a,t.Information)}static GetValidationLogMessage(e,t,i){return e?"Checkout Page is Valid":t?"Checkout Page is disabled or does not exist":i?"Checkout Page is Invalid - Invalid Selectors":"Checkout Page is Invalid"}static GetOrderTotalString(e,t){if(!Oe.IsValidDataField(e))return"";const i=e.split(",");for(let e=0;e<i.length;e++){const o=i[e];try{const e=bs.GetBoxValuePageQueryUtils(o,t);if(e&&e.match(/[0-9]/))return e}catch(t){if(e===i.length-1)return""}}return""}static IsValidPDPUrlHeuristic(t,i=""){return!e(t)&&t.includes(i)&&t.includes("/")&&!t.endsWith("#")&&!["help","credit","conditions","privacy","terms","about","faq","returns","careers","account"].some((e=>t.includes(e)))}static Invoke(e,...t){this.isFullAOCActive?Ds.postMessageToHost("Invoke",[e,...t]):Rs.postMessageToHost("Invoke",[e,...t])}static GetBoxValuePageQueryUtils(e,t){if(Oe.IsValidDataField(e))try{return Ps.GetTextValue(e,t)}catch(e){throw Error(e.message)}return""}static GetTextValue(e){const t=e.split(";"),i=Ps.GetFirstVisibleElement(t[0]);let o=i;if(void 0===o)return"";let a=o.innerText;if(1===t.length)o=Ps.NormalizeIfSuperscripted(i),a=o.innerText;else{const e=Ps.GetFirstVisibleElement(t[1]);if(e&&e.innerText){const t="."+e.innerText;if(o.contains(e)){const e=o.cloneNode(!0);e.childNodes.forEach((t=>{t.nodeType===Node.ELEMENT_NODE&&e.removeChild(t)})),a=e?.innerText?e.innerText:a}a+=t}}return Ps.StripInvalidJSONCharacters(a)}}M(bs,"isFullAOCActive",!1);var ws=bs;var ks=class{static GetBackgroundAAKeyName(){return je.GetBackgroundAAKeyName()}static CanCurrentPageDeleteBgaaState(e){return e===je.GetPageUrl()}static CanCurrentDomainDeleteBgaaState(e){return e===je.GetDomainName()}static ValidateBgAAState(e,t,i){return e.InitialPrice===t||e.TrueInitialPrice===t||this.AreEqualOrNear(e.InitialPrice-e.MaxDiscount,t)||e.InitialPrice===i||e.TrueInitialPrice===i||this.AreEqualOrNear(e.InitialPrice-e.MaxDiscount,i)}static AreEqualOrNear(e,t){return Math.abs(e-t)<.05}static SendBackgroundAAStateValidationMessage(e){ws.SendMessage(hs.BackgroundAutoApplyStateValid,[e])}static ResetBackgroundAAStateValidationMessage(){ws.SendMessage(hs.BackgroundAutoApplyStateValid,[""])}};var Us=class{constructor(e,t,i,o,a,r,n,s,c,l,u,d,h){M(this,"Name",void 0),M(this,"Type",void 0),M(this,"Value",void 0),M(this,"IsMandatory",void 0),M(this,"Format",void 0),M(this,"WaitForVisible",void 0),M(this,"WaitForNotDisabled",void 0),M(this,"WaitBefore",void 0),M(this,"WaitAfter",void 0),M(this,"WaitForNotVisible",void 0),M(this,"NotAlwaysShown",void 0),M(this,"DynamicFetch",void 0),M(this,"ShouldValue",void 0),this.Name=e,this.Type=t,this.Value=i,this.IsMandatory=o,this.Format=a,this.WaitForVisible=r,this.WaitForNotDisabled=n,this.WaitBefore=s,this.WaitAfter=c,this.WaitForNotVisible=l,this.NotAlwaysShown=u,this.DynamicFetch=d,this.ShouldValue=h}};var Ms=class{constructor(e,t,i){if(M(this,"PageUrl",void 0),M(this,"Type",void 0),M(this,"CheckoutElements",void 0),this.PageUrl=e,this.Type=t,this.CheckoutElements=new Map,i)for(const e of i)if(e){const t=e.Name;let i=e.Value;t&&this.CheckoutElements.set(t,new Us(t,e.Type,i,e.IsMandatory,e.Format,e.WaitForVisible,e.WaitForNotDisabled,e.WaitBefore,e.WaitAfter,e.WaitForNotVisble,e.NotAlwaysShown,e.DynamicFetch,e.ShouldValue))}}};class Ls{static Create(e){let t=JSON.parse(atob(e));const i=[],o=new Map,a=t?.[0]?.Group;if(a){let e=a;for(const i of t)if(i){const t=i.Group;if(t&&Oe.IsOnPage(i.PageUrl,location.pathname)){e=t;break}}t=t.map((t=>{if(t.Group===e)return t}))}for(const e of t)if(e){const t=e.Type;t&&!o.has(t)&&(i.push(t),o.set(t,new Ms(e.PageUrl,t,e.checkoutElements)))}return{map:o,array:i}}constructor(e){if(M(this,"DomainName",void 0),M(this,"AllcheckoutCompletionPages",void 0),M(this,"AllPageTypeArr",void 0),M(this,"AllCheckoutCompletionPagesStr",void 0),M(this,"IsExpressCheckoutEnabled",void 0),M(this,"CheckoutPageUrl",void 0),e){this.DomainName=e.domainName,this.CheckoutPageUrl=e.checkoutPageUrl,this.IsExpressCheckoutEnabled=e.isExpressCheckoutEnabled;const t=e.allCheckoutCompletionPagesStr;if(this.AllCheckoutCompletionPagesStr=t,t){const{map:e,array:i}=Ls.Create(t);this.AllcheckoutCompletionPages=e,this.AllPageTypeArr=i}}}}M(Ls,"PageTypeArr",[]);var Fs=Ls;class Bs{constructor(){M(this,"isPersonalizationDataConsentEnabled",void 0),M(this,"isPersonalizationDataConsentChanged",void 0),M(this,"isAnonymousFlowEnabled",void 0),M(this,"isBingSignedInUser",void 0),M(this,"isMSASignedIn",void 0),M(this,"isSSOEnabled",void 0),M(this,"isRebatesUser",void 0),M(this,"ageGroup",void 0),M(this,"anonymousUserId",""),M(this,"isAadEmailPresent",!1),M(this,"isAADSignedIn",void 0),M(this,"isMarketingCampaignEventEnrolled",void 0),M(this,"isCashbackPlatformAcknowledged",void 0),M(this,"isAADLinkedAccountValid",void 0),M(this,"isLinkingPolicyEnabled",void 0)}static Create(e,t,i,o,a){const r=new Bs;return r.isRebatesUser=t||e?.cashback?.userRebateResponse?.isRebatesUser||!1,r.isBingSignedInUser=e?.userInfo?.isBingSignedInUser??!1,r.isMSASignedIn=e?.userInfo?.isMSASignedIn??!1,r.isSSOEnabled=e?.userInfo?.isSSOEnabled??!1,r.isPersonalizationDataConsentEnabled=e?.userInfo?.isPersonalizationDataConsentEnabled??!1,r.isPersonalizationDataConsentChanged=e?.userInfo?.isPersonalizationDataConsentChanged??!1,r.ageGroup=e?.userInfo?.ageGroup??void 0,r.isAnonymousFlowEnabled=e?.itemLevelCashBack?.isAnonymousFlowEnabled??!1,r.isAadEmailPresent=!!i,r.isAADSignedIn=e?.userInfo?.isAADSignedIn??!1,r.isMarketingCampaignEventEnrolled=e?.promotionalCampaignDealsResponse?.isEnrolled,r.isCashbackPlatformAcknowledged=e?.promotionalCampaignDealsResponse?.isCashbackPlatformAcknowledged,r.isAADLinkedAccountValid=Oe.parseBool(o)||e?.userInfo?.isAADLinkedAccountValid||!1,r.isLinkingPolicyEnabled=Oe.parseBool(a),r}}var xs=Bs;class Hs{constructor(){M(this,"hasLink",void 0),M(this,"couponCodeElement",void 0),M(this,"couponCodeHash",void 0),M(this,"retailerElement",void 0),M(this,"retailerHash",void 0),M(this,"channelId",void 0),M(this,"username",void 0)}static Create(e){const t=new Hs;return t.hasLink=e.hasLink,t.couponCodeElement=e.couponCodeElement,t.couponCodeHash=e.couponCodeHash,t.retailerElement=e.retailerElement,t.retailerHash=e.retailerHash,t.channelId=e.channelId,t.username=e.username,t}}var Gs=Hs;var Vs=class{constructor(){M(this,"type",void 0),M(this,"urlRegex",void 0),M(this,"validationSelector",void 0),M(this,"details",void 0),M(this,"urlFields",void 0)}};class Ws{constructor(){M(this,"clipCouponSelector",void 0),M(this,"signedInSelector",void 0),M(this,"discountSelector",void 0),M(this,"orderTotalDataElementSelector",void 0),M(this,"clippedDiscountSelector",void 0),M(this,"alreadyClippedSelector",void 0),M(this,"waitForPageLoad",void 0),M(this,"clickBeforeClipSelector",void 0),M(this,"promoCodeSelector",void 0),M(this,"isSalePriceNotDiscount",void 0),M(this,"isSignInOptional",void 0)}static Create(e){const t=new Ws;return t.clipCouponSelector=e.clipCouponSelector,t.signedInSelector=e.signedInSelector,t.discountSelector=e.discountSelector,t.orderTotalDataElementSelector=e.orderTotalDataElementSelector,t.clippedDiscountSelector=e.clippedDiscountSelector,t.alreadyClippedSelector=e.alreadyClippedSelector,t.waitForPageLoad=e.waitForPageLoad,t.clickBeforeClipSelector=e.clickBeforeClipSelector,t.promoCodeSelector=e.promoCodeSelector,t.isSalePriceNotDiscount=e.isSalePriceNotDiscount,t.isSignInOptional=e.isSignInOptional,t}}var Ks=Ws;class zs{constructor(){M(this,"domainSelector",void 0),M(this,"productTitleSelector",void 0),M(this,"productImageSelector",void 0),M(this,"productLinkSelector",void 0)}static Create(e){const t=new zs;return t.domainSelector=e.domainSelector,t.productTitleSelector=e.productTitleSelector,t.productImageSelector=e.productImageSelector,t.productLinkSelector=e.productLinkSelector,t}}var Ys=zs;class js{constructor(){M(this,"descriptionSelector",void 0),M(this,"profileImageSelector",void 0),M(this,"influencerInfoSelector",void 0),M(this,"influencerIdSelector",void 0),M(this,"influencerFollowers",void 0)}static Create(e){const t=new js;return t.descriptionSelector=e.descriptionSelector,t.profileImageSelector=e.profileImageSelector,t.influencerInfoSelector=e.influencerInfoSelector,t.influencerIdSelector=e.influencerIdSelector,t.influencerFollowers=e.influencerFollowers,t}}var Js=js;class $s{constructor(){M(this,"cartSelector",void 0),M(this,"collapsedCartProductImageSelector",void 0),M(this,"productSelector",void 0),M(this,"productTitleSelector",void 0),M(this,"productPriceSelector",void 0),M(this,"productImageSelector",void 0),M(this,"productUrlSelector",void 0),M(this,"productQuantitySelector",void 0),M(this,"productSellerSelector",void 0),M(this,"productSellerRegex",void 0),M(this,"productIdSkuSelector",void 0),M(this,"productIdSkuRegex",void 0),M(this,"productIdSkuAttribute",void 0),M(this,"productPriceRegex",void 0)}static Create(e){const t=new $s;return t.cartSelector=e.cartSelector,t.collapsedCartProductImageSelector=e.collapsedCartProductImageSelector,t.productSelector=e.productSelector,t.productTitleSelector=e.productTitleSelector,t.productPriceSelector=e.productPriceSelector,t.productImageSelector=e.productImageSelector,t.productUrlSelector=e.productUrlSelector,t.productQuantitySelector=e.productQuantitySelector,t.productSellerSelector=e.productSellerSelector,t.productSellerRegex=e.productSellerRegex,t.productIdSkuSelector=e.productIdSkuSelector,t.productIdSkuRegex=e.productIdSkuRegex,t.productIdSkuAttribute=e.productIdSkuAttribute,t.productPriceRegex=e.productPriceRegex,t}}var Xs=$s;class Zs{constructor(){M(this,"productTitleSelector",void 0),M(this,"productSellerSelector",void 0),M(this,"productBrandSelector",void 0),M(this,"productImageSelector",void 0),M(this,"productOutOfStockSelector",void 0),M(this,"productPriceSelector",void 0),M(this,"productASIN",void 0),M(this,"productUPCSelector",void 0),M(this,"aggregateRatingSelector",void 0),M(this,"aggregateRatingNumberOfRatingsSelector",void 0),M(this,"reviewSelector",void 0),M(this,"reviewRatingSelector",void 0),M(this,"reviewDateSelector",void 0),M(this,"reviewerNameSelector",void 0)}static Create(e){const t=new Zs;return t.productTitleSelector=e.productTitleSelector,t.productSellerSelector=e.productSellerSelector,t.aggregateRatingSelector=e.aggregateRatingSelector,t.aggregateRatingNumberOfRatingsSelector=e.aggregateRatingNumberOfRatingsSelector,t.reviewSelector=e.reviewSelector,t.reviewRatingSelector=e.reviewRatingSelector,t.reviewDateSelector=e.reviewDateSelector,t.reviewerNameSelector=e.reviewerNameSelector,t.productImageSelector=e.productImageSelector,t.productPriceSelector=e.productPriceSelector,t.productOutOfStockSelector=e.productOutOfStockSelector,t.productBrandSelector=e.productBrandSelector,t.productASIN=e.productASIN,t.productUPCSelector=e.productUPCSelector,t}}var qs=Zs;class Qs{constructor(){M(this,"otherSellersOverlayLinkSelector",void 0),M(this,"otherSellerOfferElementSelector",void 0),M(this,"otherSellerHeadingSelector",void 0),M(this,"otherSellerPriceSelector",void 0),M(this,"otherSellerNameSelector",void 0),M(this,"productImageSelector",void 0),M(this,"otherSellerRatingSelector",void 0),M(this,"otherSellerDeliverySelector",void 0),M(this,"otherSellerAddButtonSelector",void 0),M(this,"otherSellerAddedConfirmationSelector",void 0),M(this,"otherSellerLowestPriceSelector",void 0),M(this,"jSVersionThreshold",void 0)}static Create(e){const t=new Qs;return t.otherSellersOverlayLinkSelector=e.otherSellersOverlayLinkSelector,t.otherSellerOfferElementSelector=e.otherSellerOfferElementSelector,t.otherSellerHeadingSelector=e.otherSellerHeadingSelector,t.otherSellerPriceSelector=e.otherSellerPriceSelector,t.otherSellerNameSelector=e.otherSellerNameSelector,t.productImageSelector=e.productImageSelector,t.otherSellerRatingSelector=e.otherSellerRatingSelector,t.otherSellerDeliverySelector=e.otherSellerDeliverySelector,t.otherSellerAddButtonSelector=e.otherSellerAddButtonSelector,t.otherSellerAddedConfirmationSelector=e.otherSellerAddedConfirmationSelector,t.otherSellerLowestPriceSelector=e.otherSellerLowestPriceSelector,t.jSVersionThreshold=e.jSVersionThreshold,t}}var ec=Qs;class tc{constructor(){M(this,"checkoutPageUrl",void 0),M(this,"priceSelector",void 0),M(this,"startDateSelector",void 0),M(this,"endDateSelector",void 0),M(this,"domainType",void 0),M(this,"nameSelector",void 0),M(this,"isRoundTripSelector",void 0)}static Create(e){const t=new tc;return t.checkoutPageUrl=e.checkoutPageUrl,t.priceSelector=e.priceSelector,t.startDateSelector=e.startDateSelector,t.endDateSelector=e.endDateSelector,t.nameSelector=e.nameSelector,t.domainType=e.domainType,t.isRoundTripSelector=e.isRoundTripSelector,t}}var ic=tc;class oc{constructor(){M(this,"pageUrlMatchRegex",void 0),M(this,"flightPriceSelector",void 0),M(this,"returnFlightPriceSelector",void 0),M(this,"startDateSelector",void 0),M(this,"endDateSelector",void 0),M(this,"domainType",void 0),M(this,"sourceLocationSelector",void 0),M(this,"destinationLocationSelector",void 0),M(this,"isRoundTripSelector",void 0)}static Create(e){const t=new oc;return t.pageUrlMatchRegex=e.pageUrlMatchRegex,t.flightPriceSelector=e.flightPriceSelector,t.returnFlightPriceSelector=e.returnFlightPriceSelector,t.startDateSelector=e.startDateSelector,t.endDateSelector=e.endDateSelector,t.domainType=e.domainType,t.sourceLocationSelector=e.sourceLocationSelector,t.destinationLocationSelector=e.destinationLocationSelector,t.isRoundTripSelector=e.isRoundTripSelector,t}}var ac=oc;class rc{constructor(){M(this,"inputBoxSelector",void 0),M(this,"applyButtonSelector",void 0),M(this,"removeCouponButtonSelector",void 0),M(this,"orderTotalDataElementSelector",void 0),M(this,"orderTotalDataContainerElementSelector",void 0),M(this,"orderSubTotalElementSelector",void 0),M(this,"disabled",void 0),M(this,"checkoutPageUrl",void 0),M(this,"layoutClickSelector",void 0),M(this,"clickBeforeStartSelector",void 0),M(this,"finalCheckoutButtonSelector",void 0),M(this,"edgeEnabled",void 0),M(this,"couponAcceptedMessageElementSelector",void 0),M(this,"closeModal",void 0),M(this,"appliedCouponSelector",void 0),M(this,"errorMessageSelector",void 0),M(this,"enabledTips",void 0),M(this,"otherSellerSelectors",void 0),M(this,"clippingSelectors",void 0),M(this,"cartSelectors",void 0),M(this,"catalogSelectors",void 0),M(this,"clickForCartSelector",void 0),M(this,"socialSelectors",void 0),M(this,"pinterestSelectors",void 0),M(this,"automatedCartExtractionEnabled",void 0),M(this,"shipmentSelector",void 0),M(this,"preTaxSelector",void 0),M(this,"estimatedTaxSelector",void 0),M(this,"waitAfterApplyingCurrentCoupon",void 0),M(this,"manualCouponApplyTrackingEnabled",void 0),M(this,"autosDataSelector",void 0),M(this,"suggestedCouponElementSelector",void 0),M(this,"suggestedCouponRegex",void 0),M(this,"suggestedCouponsOnlyPage",void 0),M(this,"supportedNoOrderTotal",void 0),M(this,"domMutationEnabled",void 0),M(this,"pageType",void 0),M(this,"automaticCouponSavingsSelector",void 0),M(this,"travelCheckoutSelectors",void 0),M(this,"isAutoShowDisabled",void 0),M(this,"productAddToCartSelector",void 0),M(this,"buyNowSelector",void 0),M(this,"pageUrlRegex",void 0),M(this,"pageTypeSelector",void 0),M(this,"addToCartOverlaySelector",void 0),M(this,"getProductNamesFromImg",void 0),M(this,"productTitleSearchSelector",void 0),M(this,"travelSearchSelectors",void 0),M(this,"isHomePageSameAsCheckout",void 0)}static Create(e){const t=new rc;return t.inputBoxSelector=e.inputBoxSelector,t.removeCouponButtonSelector=e.removeCouponButtonSelector,t.orderTotalDataElementSelector=e.orderTotalDataElementSelector,t.orderTotalDataContainerElementSelector=e.orderTotalDataContainerElementSelector,t.checkoutPageUrl=e.checkoutPageUrl,t.clickBeforeStartSelector=e.clickBeforeStartSelector,t.clickForCartSelector=e.clickForCartSelector,t.layoutClickSelector=e.layoutClickSelector,t.finalCheckoutButtonSelector=e.finalCheckoutButtonSelector,t.disabled=e.disabled,t.edgeEnabled=e.edgeEnabled,t.orderSubTotalElementSelector=e.orderSubTotalElementSelector,t.couponAcceptedMessageElementSelector=e.couponAcceptedMessageElementSelector,t.closeModal=e.closeModal,t.appliedCouponSelector=e.appliedCouponSelector,t.errorMessageSelector=e.errorMessageSelector,t.enabledTips=e.enabledTips,t.automatedCartExtractionEnabled=e.automatedCartExtractionEnabled,t.shipmentSelector=e.shipmentSelector,t.preTaxSelector=e.preTaxSelector,t.estimatedTaxSelector=e.estimatedTaxSelector,t.applyButtonSelector=e.applyButtonSelector,t.waitAfterApplyingCurrentCoupon=e.waitAfterApplyingCurrentCoupon,t.manualCouponApplyTrackingEnabled=e.manualCouponApplyTrackingEnabled,t.autosDataSelector=e.autosDataSelector,t.suggestedCouponElementSelector=e.suggestedCouponElementSelector,t.suggestedCouponRegex=e.suggestedCouponRegex,t.suggestedCouponsOnlyPage=e.suggestedCouponsOnlyPage,t.supportedNoOrderTotal=e.supportedNoOrderTotal,t.domMutationEnabled=e.domMutationEnabled,t.pageType=e.pageType,t.automaticCouponSavingsSelector=e.automaticCouponSavingsSelector,t.isAutoShowDisabled=e.isAutoShowDisabled,t.productAddToCartSelector=e.productAddToCartSelector,t.buyNowSelector=e.buyNowSelector,t.pageTypeSelector=e.pageTypeSelector,t.pageUrlRegex=e.pageUrlRegex,t.addToCartOverlaySelector=e.addToCartOverlaySelector,t.productTitleSearchSelector=e.productTitleSearchSelector,t.getProductNamesFromImg=e.getProductNamesFromImg,t.isHomePageSameAsCheckout=e.isHomePageSameAsCheckout,e.otherSellerSelectors&&(t.otherSellerSelectors=ec.Create(e.otherSellerSelectors)),e.clippingSelectors&&(t.clippingSelectors=Ks.Create(e.clippingSelectors)),e.cartSelectors&&(t.cartSelectors=Xs.Create(e.cartSelectors)),e.catalogSelectors&&(t.catalogSelectors=qs.Create(e.catalogSelectors)),e.socialSelectors&&(t.socialSelectors=Js.Create(e.socialSelectors)),e.pinterestSelectors&&(t.pinterestSelectors=Ys.Create(e.pinterestSelectors)),e.travelCheckoutSelectors&&(t.travelCheckoutSelectors=ic.Create(e.travelCheckoutSelectors)),e.travelSearchSelectors&&(t.travelSearchSelectors=ac.Create(e.travelSearchSelectors)),t}}var nc=rc;class sc{constructor(){M(this,"productPageUrl",void 0),M(this,"addToCartButtonSelector",void 0),M(this,"backgroundAAEnabled",void 0),M(this,"productAddedConfirmationSelector",void 0),M(this,"addToCartButtonContainer",void 0),M(this,"suggestedCouponElementSelector",void 0),M(this,"suggestedCouponRegex",void 0)}static Create(e){const t=new sc;return t.productPageUrl=e.productPageUrl,t.addToCartButtonSelector=e.addToCartButtonSelector,t.backgroundAAEnabled=e.backgroundAAEnabled,t.productAddedConfirmationSelector=e.productAddedConfirmationSelector,t.addToCartButtonContainer=e.addToCartButtonContainer,t.suggestedCouponElementSelector=e.suggestedCouponElementSelector,t.suggestedCouponRegex=e.suggestedCouponRegex,t}}var cc=sc;class lc{constructor(){M(this,"domainName",void 0),M(this,"orderConfirmationPageUrl",void 0),M(this,"allCheckoutPages",void 0),M(this,"isTravelDomain",void 0),M(this,"allFinalCheckoutPages",void 0),M(this,"checkoutPageKey",void 0),M(this,"finalCheckoutPageKey",void 0),M(this,"productPageKey",void 0),M(this,"exclusiveMarket",void 0),M(this,"multiMsgValidationEnabled",void 0),M(this,"youtubeTemplates",void 0),M(this,"allProductPages",void 0),M(this,"exactCheckoutPageUrl",void 0),M(this,"productOutOfStockSelector",void 0),M(this,"productNameSelector",void 0),M(this,"productPriceSelector",void 0),M(this,"productPageUrl",void 0),M(this,"productImageSelector",void 0),M(this,"aaConsentEnabled",void 0),M(this,"isStorewideCashbackEstimationEnabled",void 0),M(this,"storeCartInEdgeStorage",void 0),M(this,"cartMonitorUrl",void 0),M(this,"travelCheckoutPageKey",void 0),M(this,"checkoutPageUrl",void 0),M(this,"confirmationPageTelemetry",void 0),M(this,"isAOCFragmentCollectionEnabled",void 0),M(this,"aOCFragmentCollectionRate",void 0),M(this,"addressBarExpansionEnabled",void 0),M(this,"retailerTrivia",void 0),M(this,"disabledPopupOriginationList",void 0),M(this,"allAutomatedSelectors",void 0),M(this,"automatedSelectorsKey",void 0),M(this,"isAddressBarCashbackEnabled",void 0),M(this,"isCompositeNotificationPhCExcludedRetailer",void 0),M(this,"isCompositeNotificationPhCTopRetailer",void 0),M(this,"productPageUrlRegex",void 0)}static Create(e){const t=new lc;return e&&(t.domainName=e.domainName,t.orderConfirmationPageUrl=e.orderConfirmationPageUrl,t.exclusiveMarket=e.exclusiveMarket,t.multiMsgValidationEnabled=e.multiMsgValidationEnabled,t.exactCheckoutPageUrl=e.exactCheckoutPageUrl,t.productOutOfStockSelector=e.productOutOfStockSelector,t.productNameSelector=e.productNameSelector,t.productPriceSelector=e.productPriceSelector,t.productImageSelector=e.productImageSelector,t.aaConsentEnabled=e.aaConsentEnabled,t.storeCartInEdgeStorage=e.storeCartInEdgeStorage,t.cartMonitorUrl=e.cartMonitorUrl,t.checkoutPageUrl=e.checkoutPageUrl,t.isTravelDomain=e.isTravelDomain,t.isStorewideCashbackEstimationEnabled=e.isStorewideCashbackEstimationEnabled,t.createCheckoutPageList(e),t.createFinalCheckoutPageList(e),t.createYoutubeTemplateList(e),t.createProductPagesList(e),t.confirmationPageTelemetry=e.confirmationPageTelemetry,t.isAOCFragmentCollectionEnabled=e.isAOCFragmentCollectionEnabled,t.productPageUrl=e.productPageUrl,t.aOCFragmentCollectionRate=e.aOCFragmentCollectionRate,t.disabledPopupOriginationList=e.disabledPopupOriginationList,t.addressBarExpansionEnabled=e.addressBarExpansionEnabled,t.createTriviaData(e),t.createAutomatedSelectorsPageList(e),t.isAddressBarCashbackEnabled=e.isAddressBarCashbackEnabled,t.isCompositeNotificationPhCExcludedRetailer=e.isCompositeNotificationPhCExcludedRetailer,t.isCompositeNotificationPhCTopRetailer=e.isCompositeNotificationPhCTopRetailer,t.productPageUrlRegex=e.productPageUrlRegex),t}updateCurrentCheckoutPage(e){return this.checkoutPageKey=this.findCurrentPage(e,this.allCheckoutPages),-1!==this.checkoutPageKey}getCurrentCheckoutPage(e){return null!==this.checkoutPageKey&&-1!==this.checkoutPageKey&&void 0!==this.checkoutPageKey||-1!==this.checkoutPageKey&&e&&(this.updateCurrentCheckoutPage(e),null!==this.checkoutPageKey&&-1!==this.checkoutPageKey&&void 0!==this.checkoutPageKey)?this.allCheckoutPages[this.checkoutPageKey]:void 0}updateCurrentFinalCheckoutPage(e){const t=this.findCurrentPage(e,this.allFinalCheckoutPages);return-1!==t?(this.finalCheckoutPageKey=t,!0):(this.finalCheckoutPageKey=null,!1)}getCurrentFinalCheckoutPage(){if(null!=this.finalCheckoutPageKey)return this.allFinalCheckoutPages[this.finalCheckoutPageKey]}getCurrentProductPage(e){if(null!=this.productPageKey)return this.allProductPages[this.productPageKey];{const t=this.findCurrentProductPage(e,this.allProductPages);return-1!==t?(this.productPageKey=t,this.allProductPages[this.productPageKey]):void(this.productPageKey=null)}}getCurrentAutomatedSelectorsPage(e){return null!==this.automatedSelectorsKey&&void 0!==this.automatedSelectorsKey&&this.automatedSelectorsKey<this.allAutomatedSelectors.length||e&&(this.updateCurrentAutomatedSelectorsPage(e),null!==this.automatedSelectorsKey&&-1!==this.automatedSelectorsKey&&void 0!==this.automatedSelectorsKey)?this.allAutomatedSelectors[this.automatedSelectorsKey]:void 0}getAutomatedSelectorsPageByRegex(e){for(let t=0;t<this.allAutomatedSelectors.length;t++){const i=this.allAutomatedSelectors[t];if(new RegExp(i.urlRegex).test(e))return this.automatedSelectorsKey=t,i}this.automatedSelectorsKey=-1}isConfirmationPage(e){return new RegExp(this.orderConfirmationPageUrl).test(e)}updateCurrentAutomatedSelectorsPage(e){const t=this.findCurrentAutomatedSelectorsPage(e,this.allAutomatedSelectors);return-1!==t?(this.automatedSelectorsKey=t,!0):(this.automatedSelectorsKey=null,!1)}createCheckoutPageList(e){if(this.allCheckoutPages=[],e.allCheckoutPages&&e.allCheckoutPages.length>0)for(const t of e.allCheckoutPages)this.allCheckoutPages.push(nc.Create(t))}createFinalCheckoutPageList(e){if(this.allFinalCheckoutPages=[],e.allFinalCheckoutPages&&e.allFinalCheckoutPages.length>0)for(const t of e.allFinalCheckoutPages)this.allFinalCheckoutPages.push(nc.Create(t))}createAutomatedSelectorsPageList(e){if(this.allAutomatedSelectors=[],e.allAutomatedSelectors&&e.allAutomatedSelectors.length>0)for(const t of e.allAutomatedSelectors)this.allAutomatedSelectors.push(Oe.DeepAssign(new Vs,t))}createProductPagesList(e){if(this.allProductPages=[],e.allProductPages&&e.allProductPages.length>0)for(const t of e.allProductPages)this.allProductPages.push(cc.Create(t))}createYoutubeTemplateList(e){if(this.youtubeTemplates=[],e.youtubeTemplates&&e.youtubeTemplates.length>0)for(const t of e.youtubeTemplates)this.youtubeTemplates.push(Gs.Create(t))}findCurrentPage(e,t){for(let i=0;i<t.length;i++){if(Oe.IsPageMatch(t[i].checkoutPageUrl,t[i].pageUrlRegex,e))return t[i].disabled?-1:i}return-1}findCurrentProductPage(e,t){for(let i=0;i<t.length;i++){if(Oe.IsOnPage(t[i].productPageUrl,e))return i}return-1}findCurrentAutomatedSelectorsPage(e,t){for(let i=0;i<t.length;i++){if(Oe.IsPageRegexMatch(t[i].urlRegex,e))return i}return-1}createTriviaData(e){this.retailerTrivia={successRate:e?.retailerTrivia?.successRate??null}}isProductPage(e){return null!=this.productPageUrlRegex&&Oe.IsPageRegexMatch(this.productPageUrlRegex,e)||null!=this.productPageUrl&&Oe.IsPageRegexMatch(this.productPageUrl,e)}getCurrentPageType(){const e=this.getCurrentCheckoutPage()?.pageType??l.UnknownPage;return e!==l.UnknownPage?e:this.isProductPage(location.href)?l.ProductPage:l.UnknownPage}}var uc=lc;class dc{constructor(){M(this,"retailerData",void 0),M(this,"userInfo",void 0),M(this,"traceId",void 0),M(this,"disabledNotifications",void 0),M(this,"impressionId",void 0),M(this,"coupons",void 0),M(this,"cashback",void 0),M(this,"market",void 0),M(this,"page_locale",void 0),M(this,"aFDMarket",void 0),M(this,"userPersonalizationInfo",void 0),M(this,"price",void 0),M(this,"base64ProductImage",void 0),M(this,"ranking",void 0),M(this,"extracted_entity",void 0),M(this,"comparableOffers",void 0),M(this,"priceHistory",void 0),M(this,"url",void 0),M(this,"isAwarenessExpansionEnabled",void 0),M(this,"personalizedAdsResponse",void 0),M(this,"isCashbackEstimationSupportedForDomain",void 0),M(this,"youtubeTemplates",void 0),M(this,"youtubeData",void 0),M(this,"trendingCoupons",void 0),M(this,"productTracking",void 0),M(this,"recommendations",void 0),M(this,"isSSOEnabled",void 0),M(this,"uHId",void 0),M(this,"itemLevelCashBack",void 0),M(this,"productItemizedCashBack",void 0),M(this,"codexConfig",void 0),M(this,"autos",void 0),M(this,"shoppingDataContainer",void 0),M(this,"checkoutData",void 0),M(this,"dealDaysRetailerData",void 0),M(this,"dealDaysPDP",void 0),M(this,"isUserEnrolledInDealDays",void 0),M(this,"completeExtractedEntity",void 0),M(this,"isAmazonGiftCardEnabled",void 0),M(this,"productBestCoupon",void 0),M(this,"isPackageTrackingEnabled",void 0),M(this,"inboxPriceMatchNotification",void 0)}static getApiResponse(){return this.apiResponse}static setApiResponse(e,t){this.apiResponse=JSON.parse(e),this.apiResponse?.retailerData&&(this.apiResponse.retailerData=uc.Create(this.apiResponse.retailerData),this.apiResponse.userInfo=xs.Create(this.apiResponse)),this.apiResponse.traceId=t}}M(dc,"apiResponse",new dc);var hc=dc;class pc{constructor(){M(this,"commissionType",void 0),M(this,"commissionValue",void 0),M(this,"category",void 0),M(this,"isRebatesSupportedDomain",void 0),M(this,"isRebatesUser",void 0),M(this,"merchantName",void 0),M(this,"highestCashbackCategory",void 0)}static Create(e){const t=new pc;return t.commissionType=e.highestCashbackCategory?.commissionType,t.commissionValue=e.highestCashbackCategory?.commissionValue,t.category=e.highestCashbackCategory?.category,t.isRebatesSupportedDomain=e.IsRebatesSupportedDomain??null,t.isRebatesUser=e.userRebateResponse?.isRebatesUser??!1,t.merchantName=e.merchantName,t.highestCashbackCategory=e.highestCashbackCategory,t}}var Cc=pc;function gc(){try{const e="__storage__test";return window.sessionStorage.setItem(e,""),window.sessionStorage.removeItem(e),!0}catch(e){return!1}}function Sc(e){return gc()?window.sessionStorage.getItem(e):null}function mc(e,t){gc()&&window.sessionStorage.setItem(e,t)}var Ac=class extends tt{constructor(...e){super(...e),M(this,"traceId",void 0)}init(e,t,i,o){this.initCommonInfo(e,t,i,A.Validator),this.traceId=o,this.sendErrorMessage=this.sendValidatorErrorMessage.bind(this),this.sendStorageMessage=ws.SendStorageMessage.bind(this),this.initialize()}initialize(){this.autoOpenDataStr=Ee?.AutoOpenData,this.lastCleanedDataStr=Ee?.LastCleanedData,this.initializeData()}sendValidatorErrorMessage(e,t){try{const i="error";ws.SendLogEvent(e,t,i,void 0,void 0,void 0),ws.SendMessage(hs.CheckoutPageValidationError,[i,this.traceId])}catch(e){}}};var fc=class{constructor(){M(this,"retailerData",void 0),M(this,"impressionId",void 0),M(this,"coupons",void 0),M(this,"market",void 0),M(this,"userPersonalizationInfo",void 0),M(this,"cashback",void 0),M(this,"isCashbackEstimationSupportedForDomain",void 0),M(this,"codexConfig",void 0),M(this,"userInfo",void 0)}};let Oc=function(e){return e.ClippingGrocery="ClippingGrocery",e.GroceryNoClipping="GroceryNoClipping",e.Clipping="Clipping",e.GiftCard="GiftCard",e.SaveSocialCoupons="SaveSocialCoupons",e.GroceryCashback="GroceryCashback",e.Grocery="Grocery",e.OtherSellers="OtherSellers",e.NoRetailerData="NoRetailerData",e.FailUpdateCheckoutPage="FailUpdateCheckoutPage",e.NoCheckoutPageUrl="NoCheckoutPageUrl",e.NoPDPPage="NoPDPPage",e.NotGiftCard="NotGiftCard",e.NotGroceries="NotGroceries",e.PageIsValid="PageIsValid",e.PageIsInvalid="PageIsInvalid",e.IsPageValidError="IsPageValidError",e.NoPinterestDeals="NoPinterestDeals",e.PinterestDeals="PinterestDeals",e.NoSocialCoupons="NoSocialCoupons",e.NoSelectors="NoSelectors",e.FallbackValidation="FallbackValidation",e.FallbackError="FallbackError",e.NoCoupons="NoCoupons",e.PageBecameValid="PageBecameValid",e.CheckingOtherSellers="CheckingOtherSellers",e.AutosMarketplace="AutosMarketplace",e.TrendingDealsChina="TrendingDealsChina",e.SuggestedCouponsOnlyPage="SuggestedCouponsOnlyPage",e.AbandonedCart="AbandonedCart",e.ProductTracking="ProductTracking",e.AutoOpenControllerActive="AutoOpenControllerActive",e.DisabledCheckoutPageData="DisabledCheckoutPageData",e.AAConsent="AAConsent",e.EndofScript_ProductPage="EndofScript_ProductPage",e.EndofScript_CheckoutPage="EndofScript_CheckoutPage",e.EndofScript_HomePage="EndofScript_HomePage",e.EndofScript_SearchPage="EndofScript_SearchPage",e.SponsoredPromotions="SponsoredPromotions",e.EnablePersonalization="EnablePersonalization",e.AAMicroNotification="AAMicroNotification",e.InvalidCartTotal="InvalidCartTotal",e}({});var Ic=class{constructor(){M(this,"domain",void 0),M(this,"validationReason",void 0),M(this,"time",void 0),M(this,"initializeTime",void 0),M(this,"preValidationTime",void 0),M(this,"path",void 0),M(this,"pageStatus",void 0),M(this,"scriptRunNum",void 0),M(this,"validationMsgNum",void 0)}};class Tc{static async WaitAndGetCartValue(e,t,i){const o=e;let a={OrderTotal:-1,Currency:ze.GetCurrencyFromMarket(t)??"$",PageCurrency:""};return Oe.IsValidDataField(o)&&(a=await Oe.WaitForCondition((async()=>Tc.GetCartValue(o,t)?.OrderTotal>0),i??1e4).then((()=>Tc.GetCartValue(o,t))).catch((()=>a))),a}static async WaitAndGetCartValue2(e,t,i){let o={OrderTotal:-1,Currency:ze.GetCurrencyFromMarket(t)??"$",PageCurrency:""};return Oe.IsValidDataField(e)&&(o=await Oe.WaitForCondition((async()=>Tc.TrySimpleGetCartValue(e,t)?.OrderTotal>0),i??1e4).then((()=>Tc.TrySimpleGetCartValue(e,t))).catch((()=>o))),o}static TrySimpleGetCartValue(e,t){const i=document.querySelector(e);let o=-1,a=ze.GetCurrencyFromMarket(t)??"$";const r=i?.textContent??"";o=ze.GetPriceStringAsNumber(r);const n=ze.ExtractCurrencyString(r,!0);return a=ze.GetStandardizedCurrency(n,t),{OrderTotal:o,Currency:a,PageCurrency:n}}static GetCartValue(e,t){let i=-1,o=ze.GetCurrencyFromMarket(t)??"$";const a=ws.GetOrderTotalString(e);i=ze.GetPriceStringAsNumber(a)??-1;const r=ze.ExtractCurrencyString(a,!0);return o=ze.GetStandardizedCurrency(r,t),{OrderTotal:i,Currency:o,PageCurrency:r}}}var _c=Tc;var Ec=class{static CreateCheckoutPageData(e){if(e){const t=new fc;if(e.retailerData&&(t.retailerData=uc.Create(e.retailerData)),e.impressionId&&(t.impressionId=e.impressionId),e.coupons){t.coupons=[];for(const i of e.coupons)t.coupons.push(i)}return e.userPersonalizationInfo&&(t.userPersonalizationInfo=e.userPersonalizationInfo),e.market&&(t.market=e.market),e.cashback&&(t.cashback=Cc.Create(e.cashback)),e.userInfo&&(t.userInfo=xs.Create(e)),t.isCashbackEstimationSupportedForDomain=e.isCashbackEstimationSupportedForDomain,t}return new fc}static GetInitialFields(e){const t=[],i=e.retailerData.getCurrentCheckoutPage();if(i){[i.inputBoxSelector,i.removeCouponButtonSelector,i.clickBeforeStartSelector,i.layoutClickSelector].forEach((e=>{Oe.IsValidDataField(e)&&t.push(e)}))}return t}static GetAndSendOrderTotal(e,t,i){let o=!1,a=!1;i!==Oc.NoCheckoutPageUrl&&i!==Oc.DisabledCheckoutPageData||(o=!0),i!==Oc.NoSelectors&&i!==Oc.PageIsInvalid&&i!==Oc.IsPageValidError||(a=!0);const r=this.getDefaultOrderTotalErrorMessage(i),n=hc.getApiResponse(),s=n.retailerData?.domainName;try{const i=n.retailerData.getCurrentCheckoutPage();this.GetOrderTotal(i,e,n.impressionId,s).then((e=>{this.SendValidationLog(t,n.impressionId,n.traceId,o,a,s,e.OrderTotal,e.Currency),e.OrderTotal>0&&(mc("orderTotal",e.OrderTotal.toString()),mc("pageCurrency",e.PageCurrency.toString()))}))}catch(e){ws.SendLogEvent(n.impressionId,e?.message??r,"error")}}static GetCurrentPathName(){return location.pathname}static SendValidationLog(e,t,i,o,a,r,n,s){const c=ws.GetValidationLogMessage(e,o,a);e?n&&-1!==n&&ws.SendLogEvent(t,c,"true",n,s,void 0,void 0,r):ws.SendLogEvent(t,c,"false",n,s,void 0,void 0,r),n&&-1!==n&&this.SendGMVMessage(n,s??"$",i)}static SendGMVMessage(e,t,i){const o=ze.IsCurrencyCode(t)?t:ze.GetCurrencyCodeFromSymbol(t)??"USD";ws.SendMessage(hs.CheckoutPageGMV,[i,e.toString(),o])}static async GetOrderTotal(e,t,i,o){let a={OrderTotal:-1,Currency:ze.GetCurrencyFromMarket(t)??"$",PageCurrency:""};e&&Oe.IsValidDataField(e.orderTotalDataElementSelector)&&(a=await Oe.WaitForCondition((async()=>Ps.HasVisibleElement(e.orderTotalDataElementSelector)),5e3).then((()=>_c.GetCartValue(e.orderTotalDataElementSelector,t))).catch((e=>(ws.SendLogEvent(i,e?.message??"checkoutpage GMV error.","error"),a))));try{const e=Ee?.CartValues,t=je.GetStorageObject(e,!0)??{},i=new Date;t[o]={cartValue:a,timestamp:i};const r=JSON.stringify({value:JSON.stringify(t)});ws.SendStorageMessage("CartValues",r)}catch(e){}return a}static GetValidatorAutoOpenController(){const e=hc.getApiResponse(),t=location.pathname,i=new Ac;return i.init(e.impressionId,e?.retailerData?.domainName,t,e.traceId),i}static getDefaultOrderTotalErrorMessage(e){switch(e){case Oc.DisabledCheckoutPageData:return"disabled checkoutpage GMV error.";case Oc.NoSelectors:return"no valid initial fields to check";case Oc.NoCoupons:return"no coupons";case Oc.NoCheckoutPageUrl:return"no checkoutpage data GMV error."}return"checkoutpage GMV error."}};class Pc{static IsECPage(e){if(e&&e.checkoutData){const t=new Fs(e.checkoutData);if(Pc.IsECURLMatch(t,location.pathname)&&t.IsExpressCheckoutEnabled){const e=Pc.GetECValidationElements(t);return Pc.IsECElementsExist(e)}}return!1}static IsECElementsExist(e){for(const t of e)if(Ps.HasVisibleElement(t.Value))return!0;return!1}static GetECValidationElements(e){const t=[],i=e?.AllcheckoutCompletionPages?.get("ShippingAddress");if(i){const e=i.CheckoutElements.get("address1"),o=i.CheckoutElements.get("clickBefore");e&&e.Value&&t.push(e),o&&o.Value&&t.push(o)}const o=e?.AllcheckoutCompletionPages?.get("ContactInfo");if(o){const e=o.CheckoutElements.get("email"),i=o.CheckoutElements.get("clickBefore");e&&e.Value&&t.push(e),i&&i.Value&&t.push(i)}return t}static IsECURLMatch(e,t){let i=!1;if(e&&e.CheckoutPageUrl){e.CheckoutPageUrl.split(",").forEach((e=>{i=i||Oe.IsOnPage(e,t)}))}return i}static GetExpressCheckoutGMVSelector(e){const t=e?.retailerData?.allFinalCheckoutPages??[],i=t?.filter((e=>"none"!==e?.enabledTips&&Oe.IsOnPage(e?.checkoutPageUrl,location.pathname)));let o;if(i?.length>0&&(o=i[0]?.orderTotalDataElementSelector),e.checkoutData){const t=new Fs(e.checkoutData),i=t?.AllcheckoutCompletionPages?.get("OrderInfo");o=i?.CheckoutElements?.get("orderTotal")?.Value??o}return o}static async GetExpressCheckoutGMV(e,t,i){let o={OrderTotal:-1,Currency:"$",PageCurrency:""};if(e&&Oe.IsValidDataField(e)){await Oe.WaitForCondition((async()=>Ps.HasVisibleElement(e)),i??5e3);const a=Ec.CreateCheckoutPageData(t),r=je.GetMarket(a?.market,a.retailerData?.exclusiveMarket);o=_c.GetCartValue(e,r)}return o}static async GetAndSendExpressCheckoutPageGMV(e){const t=hc.getApiResponse();try{const i=Pc.GetExpressCheckoutGMVSelector(e);if(i){const o=await Pc.GetExpressCheckoutGMV(i,e),{OrderTotal:a,Currency:r}=o;if(a&&a>0)return this.SendExpressCheckoutGMVMessage(a,r,e.traceId),void ws.SendLogEvent(t.impressionId,"Complete GetAndSendExpressCheckoutPageGMV","true",a);throw new Error(`Shopping cart value is invalid - ${a}`)}}catch(e){ws.SendLogEvent(t.impressionId,`GetAndSendExpressCheckoutPageGMV error. ${e?.message}`,"error")}}static SendExpressCheckoutGMVMessage(e,t,i){const o=ze.IsCurrencyCode(t)?t:ze.GetCurrencyCodeFromSymbol(t)??"USD";ws.SendMessage(hs.ExpressCheckoutPageGMV,[i,e.toString(),o])}}var vc=Pc;var yc=class extends Je{constructor(e,t,i,o,a,r){super(),M(this,"CouponCode",void 0),M(this,"Domain",void 0),M(this,"Scenario",void 0),M(this,"PageUrl",void 0),M(this,"data",void 0),M(this,"description",void 0),this.CouponCode=e,this.Domain=t,this.Scenario=i,this.PageUrl=o,this.data=a??"",this.description=r}};var Nc=class{constructor(e,t=!1){M(this,"EXPIRY_PERIOD",432e6),M(this,"PAGE_WAIT_TIME",5e3),M(this,"MAX_SUGGESTED_COUPONS_COUNT_FOR_AA",3),M(this,"MAX_SUGGESTED_COUPONS_COUNT_TO_STORE",10),M(this,"domainName",void 0),M(this,"key",void 0),M(this,"AllSuggestedCoupons",void 0),M(this,"suggestedCoupons",void 0),M(this,"fromPlatformDetection",void 0),M(this,"suggestedCouponEnhancementExp",void 0),M(this,"sendStorageMessage",void 0),M(this,"invalidCouponList",["NOT_ELIGIBLE_CARD","INVALID_CARD","AMAZON_PAYMENT_V2","ERROR"]),this.sendStorageMessage=e,this.fromPlatformDetection=t}GetSuggestedCoupons(){return this.suggestedCoupons.slice(0,this.MAX_SUGGESTED_COUPONS_COUNT_FOR_AA)}PostValidation(){return Promise.resolve()}Init(){const e=x.isExperimentActive(w.suggestedCouponEnhancement);return this.domainName=hc.getApiResponse().retailerData?.domainName??je.GetDomainName(),this.key="SuggestedCoupons",this.AllSuggestedCoupons=je.GetStorageObject(Ee.rawStorageObj[this.key])??new Map,this.suggestedCoupons=this.AllSuggestedCoupons[this.domainName]??[],Object.keys(this.AllSuggestedCoupons).forEach((e=>{this.AllSuggestedCoupons[e]=this.AllSuggestedCoupons[e].filter((e=>e.timestamp+this.EXPIRY_PERIOD>Date.now())),0===this.AllSuggestedCoupons[e].length&&delete this.AllSuggestedCoupons[e]})),this.suggestedCouponEnhancementExp=e??!1,Promise.resolve()}async Update(t,i,o,a,r,n){let s=this.PAGE_WAIT_TIME;n&&(s=0,o&&await Oe.WaitForCondition((async()=>Ps.HasVisibleElement(o)),this.PAGE_WAIT_TIME)),await Oe.Sleep(s).then((()=>{if(o){const n=Ps.GetFirstVisibleElement(o);let s;if(void 0===a||e(a))s=n?.textContent;else{const e=n?.textContent?.match(a);s=e&&e[1]?e[1]:""}e(s)||this.AddCoupons([s],i,t,W.Selector,r)}let n=[];if(this.suggestedCouponEnhancementExp){const e=document.body.cloneNode(!0);let t="";e.querySelectorAll("script").forEach((e=>{t+=e.innerHTML,e.remove()})),n=[...this.GetSuggestedCouponsFromStr(e.innerHTML,this.GetHTMLRegex()),...this.GetSuggestedCouponsFromStr(t,this.GetScriptRegex())],n=[...new Set(n)]}else n=[...new Set([...document.body.innerHTML.matchAll(/[^\w](?<!area\s?|zip\s?|postal\s?|no\s)(?:(?:coupon)?code|promotion)"?(?::|\s|<\w+>|>)+"?(\w+)/gi)].map((e=>e[1])).filter((e=>e.length>3&&e.length<20&&(/\d/.test(e)||e===e.toUpperCase()))))];this.AddCoupons(n,i,t,W.Automated,r),this.RemoveInvalidCoupons(),this.suggestedCoupons&&this.suggestedCoupons.length>0&&(this.suggestedCoupons.sort(((e,t)=>t.timestamp-e.timestamp)),this.suggestedCouponEnhancementExp?this.suggestedCoupons=this.suggestedCoupons.slice(0,this.MAX_SUGGESTED_COUPONS_COUNT_TO_STORE):this.suggestedCoupons=this.suggestedCoupons.slice(0,this.MAX_SUGGESTED_COUPONS_COUNT_FOR_AA),this.suggestedCoupons.sort(((e,t)=>this.GetScore(e)-this.GetScore(t))),this.AllSuggestedCoupons[this.domainName]=this.suggestedCoupons),this.sendStorageMessage(this.key,JSON.stringify({value:JSON.stringify(this.AllSuggestedCoupons)}))})).catch((e=>{}))}GetUpdatedAllSuggestedCouponsHistory(e){return e.forEach((e=>{if("NotApplicable"===e.Applicability){const t=e.Code;this.UpdateSuggestedCouponFails(t)}})),this.AllSuggestedCoupons[this.domainName]=this.suggestedCoupons,Object.keys(this.AllSuggestedCoupons).forEach((e=>{this.AllSuggestedCoupons[e]=this.AllSuggestedCoupons[e].sort(((e,t)=>t.timestamp-e.timestamp)),this.AllSuggestedCoupons[e]=this.AllSuggestedCoupons[e].slice(0,this.MAX_SUGGESTED_COUPONS_COUNT_TO_STORE),this.AllSuggestedCoupons[e]=this.AllSuggestedCoupons[e].filter((e=>e.timestamp+this.EXPIRY_PERIOD>Date.now())),0===this.AllSuggestedCoupons[e].length&&delete this.AllSuggestedCoupons[e]})),this.AllSuggestedCoupons}IsSuggestedCouponsEnhancementExpEnabled(){return this.suggestedCouponEnhancementExp}UpdateSuggestedCouponFails(e){const t=this.suggestedCoupons.findIndex((t=>t.couponCode.toLocaleLowerCase()===e.toLocaleLowerCase()));-1!==t&&this.suggestedCoupons[t].numberOfFails++}AddCoupons(e,i,a,r,n){e&&e.length>0&&e.forEach((e=>{const s=this.FindCoupon(i,e),c=this.FindCoupon(this.suggestedCoupons,e);if(c)c.timestamp=Date.now(),c.extraction=Math.min(c.extraction,r),void 0===c.numberOfFails&&(c.numberOfFails=0),a<c.source&&(c.source=a,c.title=`Coupon suggested by ${this.domainName}`);else{const i=new K;if(i.attribution=this.domainName,i.title=`Coupon suggested by ${this.domainName}`,i.couponCode=e,i.extraction=r,i.numberOfFails=0,i.providerId="SuggestedCoupon",i.source=a,i.timestamp=Date.now(),this.suggestedCoupons.push(i),!s){const a=new yc(e,this.domainName,m.SuggestedCoupon,location.pathname,JSON.stringify(i)),r=this.fromPlatformDetection?"Site suggested a coupon we didn't have from platform detection":"Site suggested a coupon we didn't have";ws.SendLogEventMessage(a,o.CollectedCoupons,n??"",r,t.Information)}}}))}FindCoupon(e,t){return e.find((e=>e.couponCode.toLocaleLowerCase()===t.toLocaleLowerCase()))}RemoveInvalidCoupons(){this.suggestedCoupons&&this.suggestedCoupons.length>0&&(this.suggestedCoupons=this.suggestedCoupons.filter((t=>!this.invalidCouponList.find((i=>!e(t.couponCode)&&i.toLocaleLowerCase()===t.couponCode.toLocaleLowerCase())))),this.AllSuggestedCoupons[this.domainName]=this.suggestedCoupons)}GetScore(e){return this.suggestedCouponEnhancementExp?10*e.extraction+5*e.numberOfFails+e.source:10*e.extraction+e.source}GetSuggestedCouponsFromStr(e,t){return[...e.matchAll(t)].map((e=>e[1])).filter((e=>(e.length>3||3===e.length&&!ze.IsCurrencyValid(e))&&(/\d/.test(e)||e===e.toUpperCase())))}GetScriptRegex(){return/[^\w](?<!no\s|product\s)(?:(?:couponcode|aktionscode)"?|code|promotion)(?::|-|\s|<[^>]+>|>)+"?(\w+)/gi}GetHTMLRegex(){return/[^\w](?<!no\s|product\s)(?:(?:coupon|aktions)?code|promotion)"?(?::|-|\s|<[^>]+>|>)+"?(\w+)/gi}};const Dc="CartDataStorageInfo",Rc="CartDataFastCollection",bc=432e5;class wc{constructor(){M(this,"OrderTotal",void 0),M(this,"OrderSubTotal",void 0),M(this,"CartDataCreationTime",void 0),M(this,"CartId",void 0),M(this,"CartPreTax",void 0),M(this,"CartEstimatedTax",void 0),M(this,"ShipmentDate",void 0),M(this,"Currency",void 0),M(this,"Products",void 0),M(this,"ProductIds",void 0),M(this,"ProductUrls",void 0),M(this,"BlockedCoupons",void 0),M(this,"ExtractionId",void 0)}}class kc{static Create(e){const t=new kc;return t.productTitle=e.productTitle,t.productPrice=e.productPrice,t.productUrl=e.productUrl,t.productImg=e.productImg,t.productQuantity=e.productQuantity,t.productSeller=e.productSeller,t.buyNowItem=e.buyNowItem,t}constructor(){M(this,"productTitle",void 0),M(this,"productPrice",void 0),M(this,"productUrl",void 0),M(this,"productImg",void 0),M(this,"productQuantity",void 0),M(this,"productSeller",void 0),M(this,"foundInWebAssist",void 0),M(this,"webAssistTitle",void 0),M(this,"webAssistPrice",void 0),M(this,"webAssistImg",void 0),M(this,"buyNowItem",void 0),this.foundInWebAssist=!1}}var Uc=kc;class Mc{constructor(){M(this,"domain",void 0),M(this,"cartValue",void 0),M(this,"subTotal",void 0),M(this,"currency",void 0),M(this,"cartUrl",void 0),M(this,"products",void 0),M(this,"cartId",void 0),M(this,"productIds",void 0)}static Create(e){const t=new Mc;return t.domain=e.domain,t.cartValue=e.cartValue,t.currency=e.currency,t.cartUrl=e.cartUrl,t.cartId=e.cartId,t.products=[],t.productIds="",e.products?.forEach((e=>{t.products.push(Uc.Create(e))})),t}}var Lc=Mc;var Fc=class{constructor(e){M(this,"webAssistQueryService",void 0),this.webAssistQueryService=e}async TryCollectCartInformation(e,i,a,r,n,s,c){try{await this.CollectCartInformation(e,i,a,r,n,s,c)}catch(i){const a={cartId:c??"",cartUrl:location.pathname,domain:e};this.LogCartExtractionEvent(a,o.CartExtraction,i?.message,t.Error,r)}}async CollectCartInformation(e,i,a,r,n,s,c){const l=new Lc;l.domain=e,l.cartValue=i.OrderTotal,l.currency=i.Currency,l.cartUrl=location.pathname,l.cartId=c??H.uuidv4(),l.products=[];let u,d=0,h=null,p=null;if(await Oe.WaitForCondition((async()=>(u=document.querySelectorAll("img"),void 0!==u&&u.length>0)),5e3),await Oe.Sleep(1e4),u=document.querySelectorAll("img"),void 0===u||u.length<=0){const e="Unable to automatically find products in cart";this.LogCartExtractionEvent(l,o.CartExtractionError,e,t.Error,r)}else{for(const t of u){if(!this.isVisible(t))continue;if(this.isAtTopOfPage(t))continue;if(0===d&&!this.isInViewPort(t))continue;const i=this.findProductContainer(t);if(0===d&&t.offsetHeight>0){const o=this.isPotentialCartItem(t,i,e);if(!o||!i)continue;d=t.offsetHeight,h=i,l.products.push(o)}else if(d===t.offsetHeight){const o=this.isPotentialCartItem(t,i,e);if(!o||!i)continue;if(null==p){if(!h)continue;if(p=this.getCommonParent(h,i),null==p)continue}const a=Node.DOCUMENT_POSITION_CONTAINED_BY;if(!(p.compareDocumentPosition(i)&a))continue;l.products.push(o)}}if(await this.augmentWithWebAssist(l.products,e,n,s),l.products=[],l.products?.length>0){const e="Successfully automatically extracted Cart Information";this.LogCartExtractionEvent(l,o.CartExtraction,e,t.Information,r),this.StoreCartInfoInLocalStorage(l,i)}else{const a=this.scrapeCandidateUrls(e),c=await this.generateWebassistProducts(a,n,s);if(c?.length>0){l.products=c;const e="Successfully automatically extracted Cart Information via webassist scraping";this.LogCartExtractionEvent(l,o.CartExtraction,e,t.Information,r),this.StoreCartInfoInLocalStorage(l,i)}else{const e="Unable to automatically get enough info about products in cart";this.LogCartExtractionEvent(l,o.CartExtractionError,e,t.Error,r)}}}}async augmentWithWebAssist(e,t,i,o){if(!e||0===e.length)return;const a=e.map((e=>this.normalizeUrl(e.productUrl,t))),r=await this.webAssistQueryService.QueryWebAssistUrls(i,a,o);r&&e.forEach((e=>{if(e?.productUrl){const i=this.normalizeUrl(e.productUrl,t);if(this.HasValidWebAssistEntry(r,i)){const t=r[i];t.entity&&this.AugmentProductWithWebAssistProduct(e,t)}}}))}normalizeUrl(e,t){return e?e.startsWith("http")?e:`https://www.${t}${e}`:""}isVisible(e){return e.offsetHeight>0&&e.offsetWidth>0&&"hidden"!==e.style.visibility&&"none"!==e.style.display}isAtTopOfPage(e){return window.pageYOffset+(e.getBoundingClientRect()?.top??0)<200}isInViewPort(e){const t=e.getBoundingClientRect(),i=t.left,o=t.top;return!0===document.elementFromPoint(i,o)?.isSameNode(e)}isPotentialCartItem(e,t,i){if(null==t)return null;const o=t.tagName.toLocaleLowerCase();if("html"===o||"body"===o)return null;const a=[...t.querySelectorAll("a")].filter((e=>ws.IsValidPDPUrlHeuristic(e.href,i)));if(a.length<=0)return null;const r=a[0],n=r.href,s=new Uc;s.productUrl=n;let c=r.innerText??r.getAttribute("title");if(""===c&&a.length>1)for(let e=1;e<a.length&&""===c;e++)c=a[e].innerText??a[e].getAttribute("title");""===c&&(c=e.getAttribute("title")??e.getAttribute("alt")??""),s.productTitle=c,s.productImg=e.getAttribute("src")??"";const l=this.GetPrices(t);return l?.length&&(s.productPrice=this.GetMinimumPrice(l)),s}GetMinimumPrice(e){const t=ze.ExtractCurrencyString(e[0]);return Math.min(...e.map((e=>parseFloat(e.replace(t,"").replace(/,/g,"")))))}findProductContainer(e){let t=e.parentElement;for(;null!=t&&"BODY"!==t.nodeName;){const e=this.GetPrices(t);if(e?.length&&t.querySelector("a"))return t;t=t.parentElement}return null}GetPrices(e){const t=ze.ExtractCurrencyString(e.innerText);if(t&&ze.IsCurrencyValid(t)){const i=new RegExp("("+ze.GetEscapedCurrency(t)+"[0-9,]+(?:.[0-9]{1,2}){0,1})","g");return e.innerText.match(i)}return[]}getCommonParent(e,t){let i=e.parentElement;if(e===t)return i;if(null==i)return null;const o=Node.DOCUMENT_POSITION_CONTAINED_BY;let a=i.compareDocumentPosition(t);for(;!(a&o);){if(i=i.parentElement,null==i)return null;a=i.compareDocumentPosition(t)}const r=i.tagName.toLocaleLowerCase();return"html"===r||"body"===r?null:i}HasValidWebAssistEntry(e,t){return e.hasOwnProperty(t)}AugmentProductWithWebAssistProduct(e,t){const i=t.entity;e.foundInWebAssist=!0,e.webAssistTitle=t.title??i.name,e.webAssistImg=i.image;const o=this.CleanWebAssistPrice(i.price_value);o&&(e.webAssistPrice=o)}scrapeCandidateUrls(e){const t=Array.from(document.querySelectorAll("a")).filter((e=>e.href&&""!==e.href&&"#"!==e.href)).filter((e=>!this.isAtTopOfPage(e))).map((e=>e.href)).filter((t=>ws.IsValidPDPUrlHeuristic(t,e)));return[...new Set(t)]}async generateWebassistProducts(e,t,i){const o=await this.webAssistQueryService.QueryWebAssistUrls(t,e,i),a=[];if(o)for(const e in o)if(o[e].entity){const t=new Uc;t.productUrl=e,this.AugmentProductWithWebAssistProduct(t,o[e]),a.push(t)}return a}LogCartExtractionEvent(e,t,i,o,a){ws.SendLogEventMessage(e,t,a,i,o)}StoreCartInfoInLocalStorage(e,t){const i=new wc;i.OrderTotal=t.OrderTotal,i.CartDataCreationTime=Date.now(),i.CartId=e.cartId,Se(Dc,JSON.stringify(i))}CleanWebAssistPrice(e){if(e)try{const t=(e=e.replace(/\s/g,"")).split("-");return ze.GetPriceStringAsNumber(t[0])}catch(e){}}};var Bc=class{constructor(){M(this,"timeStamp",void 0),M(this,"allowed",void 0)}static GetAAConsentStorageKey(e){return"AAConsentData_"+e}};let xc=function(e){return e[e.Clipping=0]="Clipping",e[e.OtherSellers=1]="OtherSellers",e[e.BackgroundAA=2]="BackgroundAA",e[e.PDPconsentAA=3]="PDPconsentAA",e[e.ApplyClickedCoupon=4]="ApplyClickedCoupon",e[e.ItemizedCashbackAddToCart=5]="ItemizedCashbackAddToCart",e[e.ScrollToItem=6]="ScrollToItem",e[e.InstantAddToCart=8]="InstantAddToCart",e[e.ApplyProductBestCoupon=9]="ApplyProductBestCoupon",e[e.ApplyExclusiveCoupon=10]="ApplyExclusiveCoupon",e}({});const Hc=864e5;function Gc(e){const t=e?new Date(e):new Date;return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))}function Vc(t,i){if(e(t))return-1;const o=new Date(t),a=void 0===i?new Date:new Date(i),r=o?a.getTime()-o.getTime():0;return Math.floor(r/1e3/60/60)}var Wc=class{constructor(){M(this,"BgaaResultAvailable",void 0)}};var Kc=class{constructor(){M(this,"localDataService",void 0),M(this,"aaConsentEnabled",void 0),M(this,"aaConsentData",void 0),M(this,"validatorModule",void 0),M(this,"domainName",void 0),M(this,"apiResponse",void 0)}async Init(){if(this.localDataService=Wd.GetLocalDataService(),this.validatorModule=Wd.GetValidatorModule(),this.domainName=this.localDataService.GetDomainName(),this.aaConsentEnabled=this.localDataService.GetCheckoutPageData().retailerData?.aaConsentEnabled??!1,this.apiResponse=h